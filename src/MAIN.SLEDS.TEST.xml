<?xml version="1.0" encoding="UTF-8"?>
<set xmlns="http://docbook.org/ns/docbook"
     xmlns:its="http://www.w3.org/2005/11/its"
     xmlns:xi="http://www.w3.org/2001/XInclude"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     version="5.2"
     xml:lang="en"
     xml:id="set-sleds"><!--                                                                       --><!--                                                                       --><!-- ##################################################################### --><!-- Common Books                                                          --><!--                                                                       --><!-- Admin and Installation Guide --><!-- Deployment Guide --><!-- GNOME User Guide --><!-- AutoYaST Guide --><!-- Security Guide --><!-- System Analysis and Tuning Guide --><!--                                                                       --><!--                                                                       --><!-- ##################################################################### --><!-- SLES Books                                                            --><!--                                                                       --><!-- Storage --><!-- Virtualization --><!-- Containers --><!-- ##################################################################### --><!-- Quick Starts                                                          --><!--                                                                       -->
   <title>
      <phrase role="productname">SUSE Linux Enterprise Server</phrase> Documentation</title>
   <info>
      <productname>
         <phrase role="productname">SUSE Linux Enterprise Server</phrase>
      </productname>
      <productname role="abbrev">
         <phrase role="productname">SLES</phrase>
      </productname>
      <productnumber>
         <phrase role="productnumber">15 SP7</phrase>
      </productnumber>
      <!--
   <meta name="task" its:translate="no">
   <phrase></phrase>
  </meta>
  -->
      <meta name="series">Product Documentation</meta>
      <!-- authors by lastname in alphabetical order -->
      <authorgroup version="5.2"><?file common_authors.xml?>
         <author>
            <personname>
               <firstname>Tomáš</firstname>
               <surname>Bažant</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Jana</firstname>
               <surname>Halackova</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Stefan</firstname>
               <surname>Knorr</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Dmitri</firstname>
               <surname>Popov</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Liam</firstname>
               <surname>Proven</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Tanja</firstname>
               <surname>Roth</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Thomas</firstname>
               <surname>Schraitle</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Carla</firstname>
               <surname>Schroder</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Sven</firstname>
               <surname>Seeberg-Elverfeldt</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Frank</firstname>
               <surname>Sundermeyer</surname>
            </personname>
         </author>
         <author>
            <personname>
               <firstname>Christoph</firstname>
               <surname>Wickert</surname>
            </personname>
         </author>
      </authorgroup>
   </info>
   <!--                                                                       -->
   <!--                                                                       -->
   <!-- ##################################################################### -->
   <!-- Common Books                                                          -->
   <!--                                                                       -->
   <!-- Admin and Installation Guide -->
   <!-- ##################################################################### -->
   <!-- Administration Guide                                                  -->
   <!-- ##################################################################### -->
   <book version="5.2" xml:lang="en" xml:id="book-administration"><?file book_administration.xml?>
      <info>
         <title>Administration Guide</title>
         <productname>
            <phrase role="productname">SUSE Linux Enterprise Server</phrase>
         </productname>
         <productnumber>
            <phrase role="productnumber">15 SP7</phrase>
         </productnumber>
         <date><?dbtimestamp format="B d, Y" ?></date>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <legalnotice xml:lang="en" version="5.2"><?file common_copyright_gfdl.xml?>
            <info/>
            <para>Copyright © 2006–<?dbtimestamp format="Y"?> SUSE LLC and contributors. All rights reserved.</para>
            <para>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.2 or (at your option) version 1.3; with the Invariant Section being this copyright notice and license. A copy of the license version 1.2 is included in the section entitled <quote>GNU Free Documentation License</quote>.</para>
            <para>For SUSE trademarks, see <link xlink:href="https://www.suse.com/company/legal/"/>. All third-party trademarks are the property of their respective owners. Trademark symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates. Asterisks (*) denote third-party trademarks.</para>
            <para>All information found in this book has been compiled with utmost attention to detail. However, this does not guarantee complete accuracy. Neither SUSE LLC, its affiliates, the authors nor the translators shall be held liable for possible errors or the consequences thereof.</para>
         </legalnotice>
         <abstract>
            <para>This guide covers system administration tasks like maintaining, monitoring and customizing an initially installed system.</para>
         </abstract>
         <meta name="title">Administration Guide</meta>
         <meta name="series">Products &amp; Solutions</meta>
         <meta name="description">How to maintain, monitor and customize an installed <phrase role="productname">SLES</phrase> system</meta>
         <meta name="social-descr">Maintain, monitor and customize <phrase role="productname">SLES</phrase>
         </meta>
         <meta name="task">Administration Configuration Maintenance</meta>
         <revhistory xml:id="rh-book-administration">
            <revision>
               <date>2025-06-17</date>
               <revdescription>
                  <para>Updated for the initial release of <phrase role="productname">SUSE Linux Enterprise Server</phrase><phrase role="productnumber">15 SP7</phrase>.</para>
               </revdescription>
            </revision>
         </revhistory>
      </info>
      <preface version="5.2" xml:id="preface-administration"><?file sle_admin_intro.xml?>
         <title>Preface</title>
         <info/>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?file common_intro_available_doc.xml?>
            <title>Available documentation</title>
            <info/>
            <variablelist>
               <varlistentry>
                  <term>Online documentation</term>
                  <listitem>
                     <para>Our documentation is available online at <link xlink:href="https://documentation.suse.com"/>. Browse or download the documentation in various formats.</para>
                     <note>
                        <title>Latest updates</title>
                        <para>The latest updates are usually available in the English-language version of this documentation.</para>
                     </note>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>SUSE Knowledgebase</term>
                  <!--based on 'Support Resources' listed at https://www.suse.com/support/kb/-->
                  <listitem>
                     <para>If you run into an issue, check out the Technical Information Documents (TIDs) that are available online at <link xlink:href="https://www.suse.com/support/kb/"/>. Search the SUSE Knowledgebase for known solutions driven by customer need.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Release notes</term>
                  <listitem>
                     <para>For release notes, see <link xlink:href="https://www.suse.com/releasenotes/"/>.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>In your system</term>
                  <listitem>
                     <para>For offline use, the release notes are also available under <filename>/usr/share/doc/release-notes</filename> on your system. The documentation for individual packages is available at <filename>/usr/share/doc/packages</filename>.</para>
                     <para>Many commands are also described in their <emphasis>manual pages</emphasis>. To view them, run <command>man</command>, followed by a specific command name. If the <command>man</command> command is not installed on your system, install it with <command>sudo zypper install man</command>.</para>
                  </listitem>
               </varlistentry>
            </variablelist>
         </sect1>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?file common_intro_feedback.xml?>
            <title>Improving the documentation</title>
            <info/>
            <para>Your feedback and contributions to this documentation are welcome. The following channels for giving feedback are available:</para>
            <variablelist>
               <varlistentry>
                  <term>Service requests and support</term>
                  <listitem>
                     <para>For services and support options available for your product, see <link xlink:href="https://www.suse.com/support/"/>.</para>
                     <para>To open a service request, you need a SUSE subscription registered at SUSE Customer Center. Go to <link xlink:href="https://scc.suse.com/support/requests"/>, log in, and click <guimenu>Create New</guimenu>.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Bug reports</term>
                  <listitem>
                     <para>Report issues with the documentation at <link xlink:href="https://bugzilla.suse.com/"/>.</para>
                     <para>To simplify this process, click the <guimenu>Report an issue</guimenu> icon next to a headline in the HTML version of this document. This preselects the right product and category in Bugzilla and adds a link to the current section. You can start typing your bug report right away.</para>
                     <para>A Bugzilla account is required.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Contributions</term>
                  <listitem>
                     <para>To contribute to this documentation, click the <guimenu>Edit source document</guimenu> icon next to a headline in the HTML version of this document. This will take you to the source code on GitHub, where you can open a pull request.</para>
                     <para>A GitHub account is required.</para>
                     <note>
                        <title>
                           <guimenu>Edit source document</guimenu> only available for English</title>
                        <para>The <guimenu>Edit source document</guimenu> icons are only available for the English version of each document. For all other languages, use the <guimenu>Report an issue</guimenu> icons instead.</para>
                     </note>
                     <para>For more information about the documentation environment used for this documentation, see the repository's README.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Mail</term>
                  <listitem>
                     <para>You can also report errors and send feedback concerning the documentation to <email>doc-team@suse.com</email>. Include the document title, the product version, and the publication date of the document. Additionally, include the relevant section number and title (or provide the URL) and provide a concise description of the problem.</para>
                  </listitem>
               </varlistentry>
            </variablelist>
         </sect1>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?file common_intro_convention.xml?>
            <title>Documentation conventions</title>
            <info/>
            <para>The following notices and typographic conventions are used in this document:</para>
            <itemizedlist>
               <listitem>
                  <para><filename>/etc/passwd</filename>: Directory names and file names</para>
               </listitem>
               <listitem>
                  <para><replaceable>PLACEHOLDER</replaceable>: Replace <replaceable>PLACEHOLDER</replaceable> with the actual value</para>
               </listitem>
               <listitem>
                  <para><envar>PATH</envar>: An environment variable</para>
               </listitem>
               <listitem>
                  <para><command>ls</command>, <option>--help</option>: Commands, options, and parameters</para>
               </listitem>
               <listitem>
                  <para><systemitem class="username">user</systemitem>: The name of a user or group</para>
               </listitem>
               <listitem>
                  <para><package>package_name</package>: The name of a software package</para>
               </listitem>
               <listitem>
                  <para><keycap function="alt"/>, <keycombo><keycap function="alt"/><keycap>F1</keycap></keycombo>: A key to press or a key combination. Keys are shown in uppercase as on a keyboard.</para>
               </listitem>
               <listitem>
                  <para><guimenu>File</guimenu>, <menuchoice><guimenu>File</guimenu><guimenu>Save As</guimenu></menuchoice>: menu items, buttons</para>
               </listitem>
               <listitem>
                  <para arch="x86_64"><phrase role="arch-start">x86_64 ▶</phrase>This paragraph is only relevant for the AMD64/Intel 64 architectures. The arrows mark the beginning and the end of the text block.<phrase role="arch-end">◀</phrase></para>
                  <para arch="zseries;power"><phrase role="arch-start">zseries;power ▶</phrase>This paragraph is only relevant for the architectures <literal>IBM Z</literal> and <literal>POWER</literal>. The arrows mark the beginning and the end of the text block.<phrase role="arch-end">◀</phrase></para>
               </listitem>
               <listitem>
                  <para><citetitle>Chapter 1, <quote>Example chapter</quote></citetitle>: A cross-reference to another chapter in this guide.</para>
               </listitem>
               <listitem>
                  <para>Commands that must be run with <systemitem class="username">root</systemitem> privileges. You can also prefix these commands with the <command>sudo</command> command to run them as a non-privileged user:</para>
                  <screen><prompt role="root">#</prompt><command>command</command><prompt>&gt;</prompt><command>sudo</command><command>command</command></screen>
               </listitem>
               <listitem>
                  <para>Commands that can be run by non-privileged users:</para>
                  <screen><prompt>&gt;</prompt><command>command</command></screen>
               </listitem>
               <listitem>
                  <para>Commands can be split into two or multiple lines by a backslash character (<literal>\</literal>) at the end of a line. The backslash informs the shell that the command invocation will continue after the end of the line:</para>
                  <screen><prompt>&gt;</prompt><command>echo</command> a b \
c d</screen>
               </listitem>
               <listitem>
                  <para>A code block that shows both the command (preceded by a prompt) and the respective output returned by the shell:</para>
                  <screen><prompt>&gt;</prompt><command>command</command>
output</screen>
               </listitem>
               <listitem>
                  <para>Notices</para>
                  <warning>
                     <title>Warning notice</title>
                     <para>Vital information you must be aware of before proceeding. Warns you about security issues, potential loss of data, damage to hardware, or physical hazards.</para>
                  </warning>
                  <important>
                     <title>Important notice</title>
                     <para>Important information you should be aware of before proceeding.</para>
                  </important>
                  <note>
                     <title>Note notice</title>
                     <para>Additional information, for example about differences in software versions.</para>
                  </note>
                  <tip>
                     <title>Tip notice</title>
                     <para>Helpful information, like a guideline or a piece of practical advice.</para>
                  </tip>
               </listitem>
               <listitem>
                  <para>Compact Notices</para>
                  <note role="compact">
                     <para>Additional information, for example about differences in software versions.</para>
                  </note>
                  <tip role="compact">
                     <para>Helpful information, like a guideline or a piece of practical advice.</para>
                  </tip>
               </listitem>
            </itemizedlist>
         </sect1>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?file common_intro_support.xml?>
            <title>Support</title>
            <info/>
            <para>Find the support statement for <phrase role="productname">SUSE Linux Enterprise Server</phrase> and general information about technology previews below. For details about the product lifecycle, see <link xlink:href="https://www.suse.com/lifecycle"/>. <!-- 2024-05-23 tbazant: resolves bsc#1221920 --></para>
            <para>If you are entitled to support, find details on how to collect information for a support ticket at <link xlink:href="https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html"/>.</para>
            <sect2>
               <title>Support statement for <phrase role="productname">SUSE Linux Enterprise Server</phrase>
               </title>
               <para>To receive support, you need an appropriate subscription with SUSE. To view the specific support offers available to you, go to <link xlink:href="https://www.suse.com/support/"/> and select your product.</para>
               <para>The support levels are defined as follows:</para>
               <variablelist>
                  <varlistentry>
                     <term>L1</term>
                     <listitem>
                        <para>Problem determination, which means technical support designed to provide compatibility information, usage support, ongoing maintenance, information gathering and basic troubleshooting using available documentation.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>L2</term>
                     <listitem>
                        <para>Problem isolation, which means technical support designed to analyze data, reproduce customer problems, isolate a problem area and provide a resolution for problems not resolved by Level 1 or prepare for Level 3.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>L3</term>
                     <listitem>
                        <para>Problem resolution, which means technical support designed to resolve problems by engaging engineering to resolve product defects which have been identified by Level 2 Support.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>For contracted customers and partners, <phrase role="productname">SUSE Linux Enterprise Server</phrase> is delivered with L3 support for all packages, except for the following:</para>
               <itemizedlist>
                  <listitem>
                     <para>Technology previews.</para>
                  </listitem>
                  <listitem>
                     <para>Sound, graphics, fonts, and artwork.</para>
                  </listitem>
                  <listitem>
                     <para>Packages that require an additional customer contract.</para>
                  </listitem>
                  <listitem>
                     <para>Some packages shipped as part of the module <emphasis>Workstation Extension</emphasis> are L2-supported only.</para>
                  </listitem>
                  <listitem>
                     <para>Packages with names ending in <package>-devel</package> (containing header files and similar developer resources) will only be supported together with their main packages.</para>
                  </listitem>
               </itemizedlist>
               <para>SUSE will only support the usage of original packages. That is, packages that are unchanged and not recompiled.</para>
            </sect2>
            <sect2>
               <title>Technology previews</title>
               <para>Technology previews are packages, stacks, or features delivered by SUSE to provide glimpses into upcoming innovations. Technology previews are included for your convenience to give you a chance to test new technologies within your environment. We would appreciate your feedback. If you test a technology preview, please contact your SUSE representative and let them know about your experience and use cases. Your input is helpful for future development.</para>
               <para>Technology previews have the following limitations:</para>
               <itemizedlist>
                  <listitem>
                     <para>Technology previews are still in development. Therefore, they may be functionally incomplete, unstable, or otherwise <emphasis>not</emphasis> suitable for production use.</para>
                  </listitem>
                  <listitem>
                     <para>Technology previews are <emphasis>not</emphasis> supported.</para>
                  </listitem>
                  <listitem>
                     <para>Technology previews may only be available for specific hardware architectures.</para>
                  </listitem>
                  <listitem>
                     <para>Details and functionality of technology previews are subject to change. As a result, upgrading to subsequent releases of a technology preview may be impossible and require a fresh installation.</para>
                  </listitem>
                  <listitem>
                     <para>SUSE may discover that a preview does not meet customer or market needs, or does not comply with enterprise standards. Technology previews can be removed from a product at any time. SUSE does not commit to providing a supported version of such technologies in the future.</para>
                  </listitem>
               </itemizedlist>
               <para>For an overview of technology previews shipped with your product, see the release notes at <link xlink:href="https://www.suse.com/releasenotes"/>.</para>
            </sect2>
         </sect1>
      </preface>
      <!-- ===================================================================== -->
      <!-- Part: Administration                                                  -->
      <!-- ===================================================================== -->
      <part xml:id="part-administration">
         <title>Common tasks</title>
         <chapter version="5.2" xml:id="cha-adm-shell"><?file adm_shell.xml?><!-- Better Title? -->
            <title>Bash and Bash scripts</title>
            <info>
               <abstract>
                  <para>Today, many people use computers with a graphical user interface (GUI) like GNOME. Although GUIs offer many features, they are limited when performing automated task execution. Shells complement GUIs well, and this chapter gives an overview of several aspects of shells, in this case the Bash shell.</para>
               </abstract>
            </info>
            <!-- Better Title? -->
            <sect1 xml:id="sec-adm-whatistheshell">
               <title>What is <quote>the shell</quote>?</title>
               <!--<para>A shell is fundamental to Linux system operation: Its
      interface allows users to enter commands that execute different
      tasks, like listing directories, showing files, or searching
      the directory tree for files with the wildcard operator.</para>-->
               <para>Traditionally, <emphasis>the</emphasis> Linux shell is Bash (Bourne again Shell). When this chapter speaks about <quote>the shell</quote> it means Bash. There are more shells available (ash, csh, ksh, zsh, …), each employing different features and characteristics.</para>
               <sect2 xml:id="sec-adm-configfiles">
                  <title>Bash configuration files</title>
                  <para>A shell can be invoked as an:</para>
                  <orderedlist spacing="normal">
                     <listitem>
                        <formalpara>
                           <title>Interactive login shell</title>
                           <para>This is used when logging in to a machine, invoking Bash with the <option>--login</option> option or when logging in to a remote machine with SSH.</para>
                        </formalpara>
                     </listitem>
                     <listitem>
                        <formalpara>
                           <title>Interactive non-login shell</title>
                           <para>This is normally the case when starting xterm, konsole, gnome-terminal, or similar command line interface (CLI) tools.</para>
                        </formalpara>
                     </listitem>
                     <listitem>
                        <formalpara>
                           <title>Non-interactive non-login shell</title>
                           <para>This is invoked when invoking a shell script at the command line.</para>
                        </formalpara>
                     </listitem>
                  </orderedlist>
                  <para>Each shell reads different configuration files. The following tables show the login and non-login shell configuration files.</para>
                  <tip>
                     <para>Bash looks for its configuration files in a specific order depending on the type of shell where it is run. Find more details on the Bash man page (<command>man 1 bash</command>). Search for the headline <literal>INVOCATION</literal>.</para>
                  </tip>
                  <table xml:id="tab-adm-shell-config-loginshells">
                     <title>Bash configuration files for login shells</title>
                     <tgroup cols="2">
                        <thead>
                           <row>
                              <entry><para>File</para></entry>
                              <entry><para>Description</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><filename>/etc/profile</filename></para></entry>
                              <entry><para>Do not modify this file, otherwise your modifications may be destroyed during your next update.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/etc/profile.local</filename></para></entry>
                              <entry><para>Use this file if you extend <filename>/etc/profile</filename></para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/etc/profile.d/</filename></para></entry>
                              <entry><para>Contains system-wide configuration files for specific programs</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>~/.profile</filename></para></entry>
                              <entry><para>Insert user specific configuration for login shells here</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para>The login shell also sources the configuration files listed under <xref linkend="tab-adm-shell-configs-nonloginshells"/>.</para>
                  <table xml:id="tab-adm-shell-configs-nonloginshells">
                     <title>Bash configuration files for non-login shells</title>
                     <tgroup cols="2">
                        <tbody>
                           <row>
                              <entry><para><filename>/etc/bash.bashrc</filename></para></entry>
                              <entry><para>Do not modify this file, otherwise your modifications may be destroyed during your next update.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/etc/bash.bashrc.local</filename></para></entry>
                              <entry><para>Use this file to insert your system-wide modifications for Bash only</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>~/.bashrc</filename></para></entry>
                              <entry><para>Insert user specific configuration here</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para>Additionally, Bash uses multiple files:</para>
                  <table>
                     <title>Special files for Bash</title>
                     <tgroup cols="2">
                        <thead>
                           <row>
                              <entry><para>File</para></entry>
                              <entry><para>Description</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><filename>~/.bash_history</filename></para></entry>
                              <entry><para>Contains a list of all commands you have typed</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>~/.bash_logout</filename></para></entry>
                              <entry><para>Executed when logging out</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>~/.alias</filename></para></entry>
                              <entry><para>User defined aliases of frequently used commands. See <command>man 1 alias</command> for more details about defining aliases.</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <bridgehead>No-Login Shells</bridgehead>
                  <para>There are special shells that block users from logging into the system: <systemitem>/bin/false</systemitem> and <systemitem>/sbin/nologin</systemitem>. Both fail silently when the user attempts to log into the system. This was intended as a security measure for system users, though modern Linux operating systems have more effective tools for controlling system access, such as PAM and AppArmor.</para>
                  <para>The default on <phrase role="productname">SUSE Linux Enterprise Server</phrase> is to assign <systemitem>/bin/bash</systemitem> to human users, and <systemitem>/bin/false</systemitem> or <systemitem>/sbin/nologin</systemitem> to system users. The <systemitem class="username">nobody</systemitem> user has <systemitem>/bin/bash</systemitem> for historical reasons, as it is a user with minimum privileges that used to be the default for system users. However, whatever little bit of security gained by using <systemitem class="username">nobody</systemitem> is lost when multiple system users use it. It should be possible to change it to <systemitem>/sbin/nologin</systemitem>; the fastest way to test it is change it and see if it breaks any services or applications.</para>
                  <para>Use the following command to list which shells are assigned to all users, system and human users, in <filename>/etc/passwd</filename>. The output varies according to the services and users on your system:</para>
                  <screen><prompt>&gt;</prompt>sort -t: -k 7 /etc/passwd | awk -F: '{print $1"\t" $7}' | column -t
tux               /bin/bash
nobody            /bin/bash
root              /bin/bash
avahi             /bin/false
chrony            /bin/false
dhcpd             /bin/false
dnsmasq           /bin/false
ftpsecure         /bin/false
lightdm           /bin/false
mysql             /bin/false
postfix           /bin/false
rtkit             /bin/false
sshd              /bin/false
tftp              /bin/false
unbound           /bin/false
bin               /sbin/nologin
daemon            /sbin/nologin
ftp               /sbin/nologin
lp                /sbin/nologin
mail              /sbin/nologin
man               /sbin/nologin
nscd              /sbin/nologin
polkitd           /sbin/nologin
pulse             /sbin/nologin
qemu              /sbin/nologin
radvd             /sbin/nologin
rpc               /sbin/nologin
statd             /sbin/nologin
svn               /sbin/nologin
systemd-coredump  /sbin/nologin
systemd-network   /sbin/nologin
systemd-timesync  /sbin/nologin
usbmux            /sbin/nologin
vnc               /sbin/nologin
wwwrun            /sbin/nologin
messagebus        /usr/bin/false
scard             /usr/sbin/nologin</screen>
               </sect2>
               <sect2 version="5.2" xml:id="sec-adm-dirstructure"><?file fs_structure_i.xml?>
                  <title>The directory structure</title>
                  <info/>
                  <para>The following table provides a short overview of the most important higher-level directories that you find on a Linux system. Find more detailed information about the directories and important subdirectories in the following list.</para>
                  <table>
                     <title>Overview of a standard directory tree</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1" colwidth="25*"/>
                        <colspec colnum="2" colname="2" colwidth="75*"/>
                        <thead>
                           <row>
                              <entry><para>Directory</para></entry>
                              <entry><para>Contents</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><filename>/</filename></para></entry>
                              <entry><para>Root directory—the starting point of the directory tree.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/bin</filename></para></entry>
                              <entry><para>Essential binary files, such as commands that are needed by both the system administrator and normal users. Usually also contains the shells, such as Bash.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/boot</filename></para></entry>
                              <entry><para>Static files of the boot loader.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/dev</filename></para></entry>
                              <entry><para>Files needed to access host-specific devices.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/etc</filename></para></entry>
                              <entry><para>Host-specific system configuration files.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/home</filename></para></entry>
                              <entry><para>Holds the home directories of all users who have accounts on the system. However, <systemitem class="username">root</systemitem>'s home directory is not located in <filename>/home</filename> but in <filename>/root</filename>.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/lib</filename></para></entry>
                              <entry><para>Essential shared libraries and kernel modules.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/media</filename></para></entry>
                              <entry><para>Mount points for removable media.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/mnt</filename></para></entry>
                              <entry><para>Mount point for temporarily mounting a file system.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/opt</filename></para></entry>
                              <entry><para>Add-on application software packages.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/root</filename></para></entry>
                              <entry><para>Home directory for the superuser <systemitem class="username">root</systemitem>.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/sbin</filename></para></entry>
                              <entry><para>Essential system binaries.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/srv</filename></para></entry>
                              <entry><para>Data for services provided by the system.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/tmp</filename></para></entry>
                              <entry><para>Temporary files.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/usr</filename></para></entry>
                              <entry><para>Secondary hierarchy with read-only data.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/var</filename></para></entry>
                              <entry><para>Variable data such as log files.</para></entry>
                           </row>
                           <row>
                              <entry><para><filename>/windows</filename></para></entry>
                              <entry><para>Only available if you have both Microsoft Windows* and Linux installed on your system. Contains the Windows data.</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para>The following list provides more detailed information and gives some examples of which files and subdirectories can be found in the directories:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <filename>/bin</filename>
                        </term>
                        <listitem>
                           <para>Contains the basic shell commands that may be used both by <systemitem class="username">root</systemitem> and by other users. These commands include <command>ls</command>, <command>mkdir</command>, <command>cp</command>, <command>mv</command>, <command>rm</command> and <command>rmdir</command>. <filename>/bin</filename> also contains Bash, the default shell in <phrase role="productname">SUSE Linux Enterprise Server</phrase>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/boot</filename>
                        </term>
                        <listitem>
                           <para>Contains data required for booting, such as the boot loader, the kernel, and other data that is used before the kernel begins executing user-mode programs.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/dev</filename>
                        </term>
                        <listitem>
                           <para>Holds device files that represent hardware components.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/etc</filename>
                        </term>
                        <listitem>
                           <para>Contains local configuration files that control the operation of programs like the X Window System. The <filename>/etc/init.d</filename> subdirectory contains LSB init scripts that can be executed during the boot process.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/home/<replaceable>USERNAME</replaceable>
                           </filename>
                        </term>
                        <listitem>
                           <para>Holds the private data of every user who has an account on the system. The files located here can only be modified by their owner or by the system administrator. By default, your e-mail directory and personal desktop configuration are located here in the form of hidden files and directories, such as <filename>.gconf/</filename> and <filename>.config</filename>.</para>
                           <note>
                              <title>Home directory in a network environment</title>
                              <para>If you are working in a network environment, your home directory may be mapped to a directory in the file system other than <filename>/home</filename>.</para>
                           </note>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/lib</filename>
                        </term>
                        <listitem>
                           <para>Contains the essential shared libraries needed to boot the system and to run the commands in the root file system. The Windows equivalent for shared libraries are DLL files.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/media</filename>
                        </term>
                        <listitem>
                           <para>Contains mount points for removable media, such as CD-ROMs, flash disks, and digital cameras (if they use USB). <filename>/media</filename> generally holds any type of drive except the hard disk of your system. When your removable medium has been inserted or connected to the system and has been mounted, you can access it from here. <remark>taroth 060518: find out how the names of the drives are assigned to a medium!</remark></para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/mnt</filename>
                        </term>
                        <listitem>
                           <para>This directory provides a mount point for a temporarily mounted file system. <systemitem class="username">root</systemitem> may mount file systems here.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/opt</filename>
                        </term>
                        <listitem>
                           <para>Reserved for the installation of third-party software. Optional software and larger add-on program packages can be found here.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/root</filename>
                        </term>
                        <listitem>
                           <para>Home directory for the <systemitem class="username">root</systemitem> user. The personal data of <systemitem class="username">root</systemitem> is located here.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/run</filename>
                        </term>
                        <listitem>
                           <para>A tmpfs directory used by <systemitem>systemd</systemitem> and various components. <filename>/var/run</filename> is a symbolic link to <filename>/run</filename>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/sbin</filename>
                        </term>
                        <listitem>
                           <para>As the <literal>s</literal> indicates, this directory holds utilities for the superuser. <filename>/sbin</filename> contains the binaries essential for booting, restoring and recovering the system in addition to the binaries in <filename>/bin</filename>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/srv</filename>
                        </term>
                        <listitem>
                           <para>Holds data for services provided by the system, such as FTP and HTTP.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/tmp</filename>
                        </term>
                        <listitem>
                           <para>This directory is used by programs that require temporary storage of files.</para>
                           <important>
                              <title>Cleaning up <filename>/tmp</filename> at boot time</title>
                              <para>Data stored in <filename>/tmp</filename> is not guaranteed to survive a system reboot. It depends, for example, on settings made in <filename>/etc/tmpfiles.d/tmp.conf</filename>.</para>
                           </important>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/usr</filename>
                        </term>
                        <listitem>
                           <para><literal>/usr</literal> has nothing to do with users, but is the acronym for Unix system resources. The data in <filename>/usr</filename> is static, read-only data that can be shared among various hosts compliant with the <literal>Filesystem Hierarchy Standard</literal> (FHS). This directory contains all application programs including the graphical desktops such as GNOME and establishes a secondary hierarchy in the file system. <filename>/usr</filename> holds several subdirectories, such as <filename>/usr/bin</filename>, <filename>/usr/sbin</filename>, <filename>/usr/local</filename>, and <filename>/usr/share/doc</filename>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/usr/bin</filename>
                        </term>
                        <listitem>
                           <para>Contains generally accessible programs.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/usr/sbin</filename>
                        </term>
                        <listitem>
                           <para>Contains programs reserved for the system administrator, such as repair functions.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/usr/local</filename>
                        </term>
                        <listitem>
                           <para>In this directory the system administrator can install local, distribution-independent extensions.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/usr/share/doc</filename>
                        </term>
                        <listitem>
                           <para>Holds various documentation files and the release notes for your system. In the <filename>manual</filename> subdirectory find an online version of this manual. If more than one language is installed, this directory may contain versions of the manuals for different languages.</para>
                           <para>Under <filename>packages</filename> find the documentation included in the software packages installed on your system. For every package, a subdirectory <filename>/usr/share/doc/packages/<replaceable>PACKAGENAME</replaceable></filename> is created that often holds README files for the package and sometimes examples, configuration files or additional scripts.</para>
                           <para>If HOWTOs are installed on your system <filename>/usr/share/doc</filename> also holds the <filename>howto</filename> subdirectory in which to find additional documentation on many tasks related to the setup and operation of Linux software.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/var</filename>
                        </term>
                        <listitem>
                           <para>Whereas <filename>/usr</filename> holds static, read-only data, <filename>/var</filename> is for data which is written during system operation and thus is variable data, such as log files or spooling data. For an overview of the most important log files you can find under <filename>/var/log/</filename>, refer to <xref linkend="tab-trouble-info"/>.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-adm-shellscripts">
               <title>Writing shell scripts</title>
               <para>Shell scripts provide a convenient way to perform a wide range of tasks: collecting data, searching for a word or phrase in a text and other useful things. The following example shows a small shell script that prints a text:</para>
               <example>
                  <title>A shell script printing a text</title>
                  <screen>#!/bin/sh <co xml:id="co-adm-shell-shebang"/>
# Output the following line: <co xml:id="co-adm-shell-comment"/>
echo "Hello World" <co xml:id="co-adm-shell-echo"/></screen>
                  <calloutlist>
                     <callout arearefs="co-adm-shell-shebang">
                        <para>The first line begins with the <emphasis>Shebang</emphasis> characters (<literal>#!</literal>) which indicate that this file is a script. The interpreter, specified after the <emphasis>Shebang</emphasis>, executes the script. In this case, the specified interpreter is <command>/bin/sh</command>.</para>
                     </callout>
                     <callout arearefs="co-adm-shell-comment">
                        <para>The second line is a comment beginning with the hash sign. We recommend that you comment difficult lines. With proper commenting, you can remember the purpose and function of the line. Also, other readers can better understand your script. Commenting is considered good practice in the development community.</para>
                     </callout>
                     <callout arearefs="co-adm-shell-echo">
                        <para>The third line uses the built-in command <command>echo</command> to print the corresponding text.</para>
                     </callout>
                  </calloutlist>
               </example>
               <para>Before you can run this script, there are a few prerequisites:</para>
               <orderedlist spacing="normal">
                  <listitem>
                     <para>Every script should contain a Shebang line (as in the example above). If the line is missing, you need to call the interpreter manually.</para>
                  </listitem>
                  <listitem>
                     <para>You can save the script wherever you want. However, it is a good idea to save it in a directory where the shell can find it. The search path in a shell is determined by the environment variable <envar>PATH</envar>. A normal user does not have write access to <filename>/usr/bin</filename>. Therefore it is recommended to save your scripts in the users' directory <filename>~/bin/</filename>. The above example gets the name <filename>hello.sh</filename>.</para>
                  </listitem>
                  <listitem>
                     <para>The script needs executable permissions. Set the permissions with the following command:</para>
                     <screen><prompt>&gt;</prompt>chmod +x ~/bin/hello.sh</screen>
                  </listitem>
               </orderedlist>
               <para>If you have fulfilled all the above prerequisites, you can execute the script in the following ways:</para>
               <orderedlist spacing="normal">
                  <listitem>
                     <formalpara>
                        <title>As absolute path</title>
                        <para>The script can be executed with an absolute path. In our case, it is <command>~/bin/hello.sh</command>.</para>
                     </formalpara>
                  </listitem>
                  <listitem>
                     <formalpara>
                        <title>Everywhere</title>
                        <para>If the <envar>PATH</envar> environment variable contains the directory where the script is located, you can execute the script with <command>hello.sh</command>.</para>
                     </formalpara>
                  </listitem>
               </orderedlist>
            </sect1>
            <sect1 xml:id="sec-adm-shell-redirect">
               <title>Redirecting command events</title>
               <para>Each command can use three channels, either for input or output:</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <formalpara>
                        <title>Standard output</title>
                        <para>This is the default output channel. Whenever a command prints something, it uses the standard output channel.</para>
                     </formalpara>
                  </listitem>
                  <listitem>
                     <formalpara>
                        <title>Standard input</title>
                        <para>If a command needs input from users or other commands, it uses this channel.</para>
                     </formalpara>
                  </listitem>
                  <listitem>
                     <formalpara>
                        <title>Standard error</title>
                        <para>Commands use this channel for error reporting.</para>
                     </formalpara>
                  </listitem>
               </itemizedlist>
               <para>To redirect these channels, there are the following possibilities:</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <literal>Command &gt; File</literal>
                     </term>
                     <listitem>
                        <para>Saves the output of the command into a file, the existing file is deleted. For example, the <command>ls</command> command writes its output into the file <filename>listing.txt</filename>:</para>
                        <screen><prompt>&gt;</prompt>ls &gt; listing.txt</screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>Command &gt;&gt; File</literal>
                     </term>
                     <listitem>
                        <para>Appends the output of the command to a file. For example, the <command>ls</command> command appends its output to the file <filename>listing.txt</filename>:</para>
                        <screen><prompt>&gt;</prompt>ls &gt;&gt; listing.txt</screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>Command &lt; File</literal>
                     </term>
                     <listitem>
                        <para>Reads the file as input for the given command. For example, the <command>read</command> command reads in the content of the file into the variable:</para>
                        <screen><prompt>&gt;</prompt>read a &lt; foo</screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>Command1 | Command2</literal>
                     </term>
                     <listitem>
                        <para>Redirects the output of the left command as input for the right command. For example, the <command>cat</command> command outputs the content of the <filename>/proc/cpuinfo</filename> file. This output is used by <command>grep</command> to filter only those lines which contain <literal>cpu</literal>:</para>
                        <screen><prompt>&gt;</prompt>cat /proc/cpuinfo | grep cpu</screen>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>Every channel has a <emphasis>file descriptor</emphasis>: 0 (zero) for standard input, 1 for standard output and 2 for standard error. It is allowed to insert this file descriptor before a <literal>&lt;</literal> or <literal>&gt;</literal> character. For example, the following line searches for a file starting with <filename>foo</filename>, but suppresses its errors by redirecting it to <filename>/dev/null</filename>:</para>
               <screen><prompt>&gt;</prompt>find / -name "foo*" 2&gt;/dev/null</screen>
            </sect1>
            <sect1 xml:id="sec-adm-alias">
               <title>Using aliases</title>
               <para>An alias is a shortcut definition of one or more commands. The syntax for an alias is:</para>
               <screen>alias <replaceable>NAME</replaceable>=<replaceable>DEFINITION</replaceable></screen>
               <para>For example, the following line defines an alias <command>lt</command> that outputs a long listing (option <option>-l</option>), sorts it by modification time (<option>-t</option>), and prints it in reverse sorted order (<option>-r</option>):</para>
               <screen><prompt>&gt;</prompt>alias lt='ls -ltr'</screen>
               <para>To view all alias definitions, use <command>alias</command>. Remove your alias with <command>unalias</command> and the corresponding alias name.</para>
            </sect1>
            <sect1 xml:id="sec-adm-variables">
               <title>Using variables in Bash</title>
               <para>A shell variable can be global or local. Global variables, or environment variables, can be accessed in all shells. In contrast, local variables are visible in the current shell only.</para>
               <para>To view all environment variables, use the <command>printenv</command> command. If you need to know the value of a variable, insert the name of your variable as an argument:</para>
               <screen><prompt>&gt;</prompt>printenv PATH</screen>
               <para>A variable, be it global or local, can also be viewed with <command>echo</command>:</para>
               <screen><prompt>&gt;</prompt>echo $PATH</screen>
               <para>To set a local variable, use a variable name followed by the equal sign, followed by the value:</para>
               <screen><prompt>&gt;</prompt>PROJECT="SLED"</screen>
               <para>Do not insert spaces around the equal sign, otherwise you get an error. To set an environment variable, use <command>export</command>:</para>
               <screen><prompt>&gt;</prompt>export NAME="tux"</screen>
               <para>To remove a variable, use <command>unset</command>:</para>
               <screen><prompt>&gt;</prompt>unset NAME</screen>
               <para>The following table contains common environment variables that you can use in you shell scripts:</para>
               <table xml:id="tab-adm-envars">
                  <title>Useful environment variables</title>
                  <tgroup cols="2">
                     <tbody>
                        <row>
                           <entry><para><envar>HOME</envar></para></entry>
                           <entry><para>the home directory of the current user</para></entry>
                        </row>
                        <row>
                           <entry><para><envar>HOST</envar></para></entry>
                           <entry><para>the current host name</para></entry>
                        </row>
                        <row>
                           <entry><para><envar>LANG</envar></para></entry>
                           <entry><para>when a tool is localized, it uses the language from this environment variable. English can also be set to <literal>C</literal></para></entry>
                        </row>
                        <row>
                           <entry><para><envar>PATH</envar></para></entry>
                           <entry><para>the search path of the shell, a list of directories separated by colon</para></entry>
                        </row>
                        <row>
                           <entry><para><envar>PS1</envar></para></entry>
                           <entry><para>specifies the normal prompt printed before each command</para></entry>
                        </row>
                        <row>
                           <entry><para><envar>PS2</envar></para></entry>
                           <entry><para>specifies the secondary prompt printed when you execute a multi-line command</para></entry>
                        </row>
                        <row>
                           <entry><para><envar>PWD</envar></para></entry>
                           <entry><para>current working directory</para></entry>
                        </row>
                        <row>
                           <entry><para><envar>USER</envar></para></entry>
                           <entry><para>the current user</para></entry>
                        </row>
                     </tbody>
                  </tgroup>
               </table>
               <sect2 xml:id="sec-adm-variables-argument">
                  <title>Using argument variables</title>
                  <para>For example, if you have the script <command>foo.sh</command> you can execute it like this:</para>
                  <screen><prompt>&gt;</prompt>foo.sh "Tux Penguin" 2000 </screen>
                  <para>To access all the arguments which are passed to your script, you need positional parameters. These are <envar>$1</envar> for the first argument, <envar>$2</envar> for the second, and so on. You can have up to nine parameters. To get the script name, use <envar>$0</envar>.</para>
                  <para>The following script <command>foo.sh</command> prints all arguments from 1 to 4:</para>
                  <screen>#!/bin/sh
echo \"$1\" \"$2\" \"$3\" \"$4\"</screen>
                  <para>If you execute this script with the above arguments, you get:</para>
                  <screen>"Tux Penguin" "2000" "" ""</screen>
                  <!--
      <table id="tab-adm-shell-argvar">
        <title>Argument variables</title>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>
                <para>Form</para>
              </entry>
              <entry>
                <para>Meaning</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <screen>${VAR?message}</screen>
              </entry>
              <entry>
                <para>prints the message and complains, if variable
                  <replaceable>VAR</replaceable> is undefined</para>
                <screen>echo ${FOO?'Not defined'}
bash: FOO: Not defined</screen>
              </entry>
            </row>
            <row>
              <entry>
                <screen>${VAR-default}</screen>
              </entry>
              <entry>
                <para>return a default value, if variable
                  <replaceable>VAR</replaceable> is undefined but do
                  not define the variable</para>
                <screen>echo ${FOO-Hi}
Hi
echo Variable \"$FOO\"
Variable ""</screen>
              </entry>
            </row>
            <row>
              <entry>
                <screen>${VAR+value}</screen>
              </entry>
              <entry>
                <para>if the variable <replaceable>VAR</replaceable> is
                defined, return its new value but keep it unchanged</para>
                <screen>FOO=Hi
echo ${FOO+Hello}
Hello
echo $FOO
Hi</screen>
              </entry>
            </row>
            <row>
              <entry>
                <screen>${VAR=value}</screen>
              </entry>
              <entry>
                <para>if the variable <replaceable>VAR</replaceable> is
                undefined, define it and assign the value to it:</para>
                <screen>unset FOO
echo ${FOO="Hello World"}
"Hello World"
x=2
echo ${x=3}
2</screen>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
 -->
               </sect2>
               <sect2 xml:id="sec-adm-shell-varsubst">
                  <title>Using variable substitution</title>
                  <para>Variable substitutions apply a pattern to the content of a variable either from the left or right side. The following list contains the possible syntax forms:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>${VAR#pattern}</literal>
                        </term>
                        <listitem>
                           <para>removes the shortest possible match from the left:</para>
                           <screen><prompt>&gt;</prompt>file=/home/tux/book/book.tar.bz2
<prompt>&gt;</prompt>echo ${file#*/}
home/tux/book/book.tar.bz2</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>${VAR##pattern}</literal>
                        </term>
                        <listitem>
                           <para>removes the longest possible match from the left:</para>
                           <screen><prompt>&gt;</prompt>file=/home/tux/book/book.tar.bz2
<prompt>&gt;</prompt>echo ${file##*/}
book.tar.bz2</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>${VAR%pattern}</literal>
                        </term>
                        <listitem>
                           <para>removes the shortest possible match from the right:</para>
                           <screen><prompt>&gt;</prompt>file=/home/tux/book/book.tar.bz2
<prompt>&gt;</prompt>echo ${file%.*}
/home/tux/book/book.tar</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>${VAR%%pattern}</literal>
                        </term>
                        <listitem>
                           <para>removes the longest possible match from the right:</para>
                           <screen><prompt>&gt;</prompt>file=/home/tux/book/book.tar.bz2
<prompt>&gt;</prompt>echo ${file%%.*}
/home/tux/book/book</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>${VAR/pattern_1/pattern_2}</literal>
                        </term>
                        <listitem>
                           <para>substitutes the content of <replaceable>VAR</replaceable> from the <replaceable>PATTERN_1</replaceable> with <replaceable>PATTERN_2</replaceable>:</para>
                           <screen><prompt>&gt;</prompt>file=/home/tux/book/book.tar.bz2
<prompt>&gt;</prompt>echo ${file/tux/wilber}
/home/wilber/book/book.tar.bz2</screen>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <!--
       toms 2008-11-04: TODO: Add variable substitution:
      ${V:-def}  $V, or "def" if unset
      ${V:+def}  if $V is empty, it stays empty, otherwise
                 replace it with "def"
      ${V:=def}  $V set to "def" if unset
      ${V:?err}  $V, or output "err" if unset
      ${V#pattern}
      ${V##pattern}
      ${V%pattern}
      ${V%%pattern}
      ${!V}  similar to \$${V}
    -->
               </sect2>
            </sect1>
            <sect1 xml:id="sec-adm-shell-grouping">
               <title>Grouping and combining commands</title>
               <para>Shells allow you to concatenate and group commands for conditional execution. Each command returns an exit code which determines the success or failure of its operation. If it is 0 (zero) the command was successful, everything else marks an error which is specific to the command.</para>
               <para>The following list shows, how commands can be grouped:</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <literal>Command1 ; Command2</literal>
                     </term>
                     <listitem>
                        <para>executes the commands in sequential order. The exit code is not checked. The following line displays the content of the file with <command>cat</command> and then prints its file properties with <command>ls</command> regardless of their exit codes:</para>
                        <screen><prompt>&gt;</prompt>cat filelist.txt ; ls -l filelist.txt</screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>Command1 &amp;&amp; Command2</literal>
                     </term>
                     <listitem>
                        <para>runs the right command, if the left command was successful (logical AND). The following line displays the content of the file and prints its file properties only, when the previous command was successful (compare it with the previous entry in this list):</para>
                        <screen><prompt>&gt;</prompt>cat filelist.txt &amp;&amp; ls -l filelist.txt</screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>Command1 || Command2</literal>
                     </term>
                     <listitem>
                        <para>runs the right command, when the left command has failed (logical OR). The following line creates only a directory in <filename>/home/wilber/bar</filename> when the creation of the directory in <filename>/home/tux/foo</filename> has failed:</para>
                        <screen><prompt>&gt;</prompt>mkdir /home/tux/foo || mkdir /home/wilber/bar</screen>
                     </listitem>
                  </varlistentry>
                  <!--<varlistentry>
        <term><literal>{ Command1 ; Command2 }</literal></term>
        <listitem>
          <para>group the commands in the curley brackets and run it in
            the current shell.</para>
        </listitem>
      </varlistentry>-->
                  <varlistentry>
                     <term>
                        <literal>funcname(){ ... }</literal>
                     </term>
                     <listitem>
                        <para>creates a shell function. You can use the positional parameters to access its arguments. The following line defines the function <literal>hello</literal> to print a short message:</para>
                        <screen><prompt>&gt;</prompt>hello() { echo "Hello $1"; }</screen>
                        <para>You can call this function like this:</para>
                        <screen><prompt>&gt;</prompt>hello Tux</screen>
                        <para>which prints:</para>
                        <screen>Hello Tux</screen>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="sec-adm-shell-commonconstructs">
               <title>Working with common flow constructs</title>
               <para>To control the flow of your script, a shell has <command>while</command>, <command>if</command>, <command>for</command> and <command>case</command> constructs.</para>
               <!-- toms: Explaining test expressions? -->
               <sect2 xml:id="sec-adm-shell-if">
                  <title>The if control command</title>
                  <para>The <command>if</command> command is used to check expressions. For example, the following code tests whether the current user is Tux:</para>
                  <screen>if test $USER = "tux"; then
  echo "Hello Tux."
else
  echo "You are not Tux."
fi</screen>
                  <para>The test expression can be as complex or simple as possible. The following expression checks if the file <filename>foo.txt</filename> exists:</para>
                  <screen>if test -e /tmp/foo.txt ; then
  echo "Found foo.txt"
fi</screen>
                  <para>The test expression can also be abbreviated in square brackets:</para>
                  <screen>if [ -e /tmp/foo.txt ] ; then
  echo "Found foo.txt"
fi</screen>
                  <para>Find more useful expressions at <link xlink:href="https://bash.cyberciti.biz/guide/If..else..fi"/>.</para>
               </sect2>
               <sect2 xml:id="sec-adm-shell-for">
                  <title>Creating loops with the <command>for</command> command</title>
                  <para>The <command>for</command> loop allows you to execute commands to a list of entries. For example, the following code prints certain information about PNG files in the current directory:</para>
                  <screen>for i in *.png; do
 ls -l $i
done</screen>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-adm-shell-moreinfo">
               <title>More information</title>
               <para>Important information about Bash is provided in the man pages <command>man bash</command>. More about this topic can be found in the following list:</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <para><link xlink:href="https://tldp.org/LDP/Bash-Beginners-Guide/html/index.html"/>—Bash Guide for Beginners</para>
                  </listitem>
                  <listitem>
                     <para><link xlink:href="https://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html"/>—BASH Programming - Introduction HOW-TO</para>
                  </listitem>
                  <listitem>
                     <para><link xlink:href="https://tldp.org/LDP/abs/html/index.html"/>—Advanced Bash-Scripting Guide</para>
                  </listitem>
                  <listitem>
                     <para><link xlink:href="https://www.grymoire.com/Unix/Sh.html"/>—Sh - the Bourne Shell</para>
                  </listitem>
               </itemizedlist>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-adm-sudo"><?file adm_sudo.xml?>
            <title>
               <command>sudo</command> basics</title>
            <info/>
            <para>Running certain commands requires root privileges. However, for security reasons and to avoid mistakes, it is not recommended to log in as <systemitem class="username">root</systemitem>. A safer approach is to log in as a regular user, and then use <command>sudo</command> to run commands with elevated privileges.</para>
            <para>On <phrase role="productname">SUSE Linux Enterprise Server</phrase>, <command>sudo</command> is configured to work similarly to <command>su</command>. However, <command>sudo</command> provides a flexible mechanism that allows users to run commands with privileges of any other user. This can be used to assign roles with specific privileges to certain users and groups. For example, it is possible to allow members of the group <systemitem class="groupname">users</systemitem> to run a command with the privileges of user <systemitem class="username">wilber</systemitem>. Access to the command can be further restricted by disallowing any command options. While su always requires the <systemitem class="username">root</systemitem> password for authentication with PAM, <command>sudo</command> can be configured to authenticate with your own credentials. This means that the users do not need to share the <systemitem class="username">root</systemitem> password, which improves security.</para>
            <sect1 xml:id="sec-adm-sudo-usage">
               <title>Basic <command>sudo</command> usage</title>
               <para>The following chapter provides an introduction to basic usage of <command>sudo</command>.</para>
               <sect2 xml:id="sec-adm-sudo-usage-cmd">
                  <title>Running a single command</title>
                  <para>As a regular user, you can run any command as <systemitem class="username">root</systemitem> by adding <command>sudo</command> before it. This prompts you to provide the root password. If authenticated successfully, this runs the command as <systemitem class="username">root</systemitem>:</para>
                  <screen><prompt>&gt;</prompt><command>id -un</command><co xml:id="co-sudo-usage-id"/>
tux
<prompt>&gt;</prompt><command>sudo</command><command>id -un</command>
root's password:<co xml:id="co-sudo-usage-pw"/>
root
<prompt>&gt;</prompt><command>id -un</command>
tux<co xml:id="co-sudo-usage-after"/><prompt>&gt;</prompt><command>sudo</command><command>id -un</command><co xml:id="co-sudo-usage-nopw"/>
root
</screen>
                  <calloutlist>
                     <callout arearefs="co-sudo-usage-id">
                        <para>The <command>id -un</command> command prints the login name of the current user.</para>
                     </callout>
                     <callout arearefs="co-sudo-usage-pw">
                        <para>The password is not shown during input, neither as clear text nor as masking characters.</para>
                     </callout>
                     <callout arearefs="co-sudo-usage-after">
                        <para>Only commands that start with <command>sudo</command> run with elevated privileges.</para>
                     </callout>
                     <callout arearefs="co-sudo-usage-nopw">
                        <para>The elevated privileges persist for a certain period of time, so you do not need to provide the <systemitem class="username">root</systemitem> password again.</para>
                     </callout>
                  </calloutlist>
                  <tip>
                     <title>I/O redirection</title>
                     <para>When using <command>sudo</command>, I/O redirection does not work:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> echo s &gt; /proc/sysrq-trigger
bash: /proc/sysrq-trigger: Permission denied
<prompt>&gt;</prompt><command>sudo</command> cat &lt; /proc/1/maps
bash: /proc/1/maps: Permission denied
</screen>
                     <para>In the example above, only the <command>echo</command> and <command>cat</command> commands run with elevated privileges. The redirection is done by the user's shell with user privileges. To perform redirection with elevated privileges, either start a shell as in <xref linkend="sec-sudo-shell"/> or use the <command>dd</command> utility:</para>
                     <screen>
echo s | sudo dd of=/proc/sysrq-trigger
sudo dd if=/proc/1/maps | cat <!-- TODO: Better example! --></screen>
                  </tip>
               </sect2>
               <sect2 xml:id="sec-sudo-shell">
                  <title>Starting a shell</title>
                  <para>Using <command>sudo</command> every time to run a command with elevated privileges is not always practical. While you can use the <command>sudo bash</command> command, it is recommended to use one of the built-in mechanisms to start a shell:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>sudo -s (&lt;command&gt;)</literal>
                        </term>
                        <listitem>
                           <para>Starts a shell specified by the <envar>SHELL</envar> environment variable or the target user's default shell. If a command is specified, it is passed to the shell (with the <option>-c</option> option). Otherwise the shell runs in interactive mode.</para>
                           <screen><prompt>tux:~ &gt;</prompt>sudo -s
root's password:
<prompt>root:/home/tux #</prompt>exit
<prompt>tux:~ &gt;</prompt></screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>sudo -i (&lt;command&gt;)</literal>
                        </term>
                        <listitem>
                           <para>Similar to <option>-s</option>, but starts the shell as a login shell. This means that the shell's start-up files (<filename>.profile</filename> etc.) are processed, and the current working directory is set to the target user's home directory.</para>
                           <screen><prompt>tux:~ &gt;</prompt>sudo -i
root's password:
<prompt>root:~ #</prompt>exit
<prompt>tux:~ &gt;</prompt></screen>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <tip>
                     <title>Environment variables</title>
                     <para>By default, <command>sudo</command> does not propagate environment variables. This behavior can be changed using the <literal>env_reset</literal> option (see <xref linkend="tab-adm-sudo-options"/>).</para>
                  </tip>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-sudo-conf">
               <title>Configuring <command>sudo</command>
               </title>
               <para><command>sudo</command> provides a wide range on configurable options.</para>
               <note>
                  <title>Locked yourself out of sudo</title>
                  <para>If you accidentally locked yourself out of <command>sudo</command>, use <command>su -</command> and the <systemitem class="username">root</systemitem> password to start a root shell. To fix the error, run <command>visudo</command>.</para>
               </note>
               <!-- 2024-02-09 tbazant: importing smartdoc content
    <sect2 xml:id="sec-sudo-conf-edit">
      <title>Editing the configuration files</title>
      <para>
        The main policy configuration file for &sudo; is
        <filename>/etc/sudoers</filename>. As it is possible to lock yourself
        out of the system if the file is malformed, it is strongly recommended
        to use <command>visudo</command> for editing. It prevents editing
        conflicts and checks for syntax errors before saving the modifications.
      </para>
      <para>
        You can use another editor instead of vi by setting the
        <envar>EDITOR</envar> environment variable, for example:
      </para>
<screen>sudo EDITOR=<replaceable>/usr/bin/nano</replaceable> visudo</screen>
      <para>
        Keep in mind that the <filename>/etc/sudoers</filename> file is
        supplied by the system packages, and modifications done directly in the
        file may break updates. Therefore, it is recommended to put custom
        configuration into files in the <filename>/etc/sudoers.d/</filename>
        directory. Use the following command to create or edit a file:
      </para>
<screen>sudo visudo -f /etc/sudoers.d/<replaceable>NAME</replaceable></screen>
      <para>
        The command bellow opens the file using a different editor (in this
        case, <command>nano</command>):
      </para>
<screen>sudo EDITOR=<replaceable>/usr/bin/nano</replaceable> visudo -f /etc/sudoers.d/<replaceable>NAME</replaceable></screen>
      <note>
        <title>Ignored files in <filename>/etc/sudoers.d</filename></title>
        <para>
          The <literal>#includedir</literal> directive in
          <filename>/etc/sudoers</filename> ignores files that end with the
          <literal>~</literal> (tilde) character or contain the
          <literal>.</literal> (dot) character.
        </para>
      </note>
      <para>
        For more information on the <command>visudo</command> command, run
        <command>man 8 visudo</command>.
      </para>
    </sect2>
    -->
               <warning>
                  <title>Example configurations are for demonstration purposes only</title>
                  <para>The example rules outlined below are purely for demonstration purposes. Use them to understand the general syntax of <command>sudo</command> configuration files. Do not use them in real-world setups, because they do not reflect the complexity of these environments.</para>
               </warning>
               <sect2 xml:id="sudo-creating-custom-configuration-bp">
                  <title>
                     <command>sudo</command> configuration best practices</title>
                  <para>Before you start, here are a few ground rules for maintaining <command>sudo</command> configurations:</para>
                  <variablelist>
                     <varlistentry>
                        <term>Always use <command>visudo</command> to edit <command>sudo</command> configuration files</term>
                        <listitem>
                           <para>Any changes to the <command>sudo</command> configuration should be done using the <command>visudo</command> command. <command>visudo</command> is a tailor-made tool that allows you to edit the <command>sudo</command> configuration files and runs basic syntax checks, making sure that the configuration remains intact and functional. A faulty <command>sudo</command> configuration can result in a user being locked out of their own system.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Always create custom configurations under <filename>/etc/sudoers.d/</filename>
                        </term>
                        <listitem>
                           <para>Custom configurations must reside under <filename>/etc/sudoers.d/</filename> to be pulled in by <command>sudo</command>. Settings in the custom configuration files take precedence over the ones in the default configuration in <filename>/etc/sudoers</filename>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Always mind the order in which configurations are read</term>
                        <listitem>
                           <para>To make sure the custom configurations are read in the correct order, prefix them with numbers. Use leading zeroes to establish the order in which the files are read. For example, <filename>01_myfirstconfig</filename> is parsed before <filename>10_myotherconfig</filename>. If a directive has been set in a file that is read before another file that contains conflicting information, the last-read directive is applied.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Always use descriptive file names</term>
                        <listitem>
                           <para>Use file names that hint at what the configuration file does. This helps you keep track of what your <command>sudo</command> setup is supposed to do.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="sudo-creating-custom-config-single-user">
                  <title>Create a user-specific configuration file</title>
                  <para>Create a <command>sudo</command> configuration file that allows a normal user (<systemitem class="username">tux</systemitem>) to use the <command>useradd</command> command with their own password instead of the <systemitem class="username">root</systemitem> password.</para>
                  <example xml:id="ex-sudo-custom-config-user">
                     <title>Create a user-specific configuration file</title>
                     <procedure>
                        <step>
                           <para>As system administrator (<systemitem class="username">root</systemitem>), create a custom configuration file that holds the new user-specific directives by starting <command>visudo</command>. Use both numbering and a descriptive name:</para>
                           <screen><prompt role="root">#</prompt><command>visudo -f /etc/sudoers.d/02_usermanagement</command></screen>
                        </step>
                        <step>
                           <para>Create a rule that allows <systemitem class="username">tux</systemitem> to execute the <command>/usr/sbin/useradd</command> binary in the entire environment that this <command>sudo</command> configuration is applied to:</para>
                           <screen>
  tux<co xml:id="co-who"/> ALL<co xml:id="co-where"/> = /usr/sbin/useradd<co xml:id="co-what"/></screen>
                           <calloutlist>
                              <callout arearefs="co-who">
                                 <para>Specify the user or group. List users by name or <literal>#UID</literal>, and groups by <literal>%GROUPNAME</literal>. Separate multiple items with commas. To negate entries, use <literal>!</literal>.</para>
                              </callout>
                              <callout arearefs="co-where">
                                 <para>Specify one or several (separated by commas) hosts. Use (fully qualified) host names or IP addresses. Add <literal>ALL</literal> to enforce this setting globally across all hosts. Use <literal>!</literal> for negations.</para>
                              </callout>
                              <callout arearefs="co-what">
                                 <para>Specify one or several executables (separated by commas). When specifying them, make sure to mind the following rules:</para>
                                 <variablelist>
                                    <varlistentry>
                                       <term>
                                          <command>/usr/sbin/useradd</command>
                                       </term>
                                       <listitem>
                                          <para>Without any additional options added, this allows the execution of every possible <command>useradd</command> command.</para>
                                       </listitem>
                                    </varlistentry>
                                    <varlistentry>
                                       <term>
                                          <command>/usr/sbin/useradd -c</command>
                                       </term>
                                       <listitem>
                                          <para>If you explicitly specify an option, then that option is the only one that is allowed. Nothing else would be available to the user you specified above.</para>
                                       </listitem>
                                    </varlistentry>
                                    <varlistentry>
                                       <term>
                                          <command>/usr/sbin/useradd ""</command>
                                       </term>
                                       <listitem>
                                          <para>This would just let the user invoke a mere <command>useradd</command> without any option at all.</para>
                                       </listitem>
                                    </varlistentry>
                                 </variablelist>
                                 <para>In the example above, you would want to either allow all options and subcommands or limit them to a few for security reasons, but forbidding a user from specifying any option at all would be pointless in this context.</para>
                              </callout>
                           </calloutlist>
                        </step>
                        <step>
                           <para>To let the user use their own password instead of the <systemitem class="username">root</systemitem> password, add the following line:</para>
                           <screen>Defaults:tux !targetpw
            </screen>
                           <para>When active, this flag requires the user to enter the password of the target user, that is, <systemitem class="username">root</systemitem>. This flag is enabled by default on any <phrase role="productname">SUSE Linux Enterprise Server</phrase> system. Negate it using <literal>!</literal> to require the user to just enter their own password instead of the <systemitem class="username">root</systemitem> password.</para>
                        </step>
                        <step>
                           <para>Save the configuration, leave the editor and open a second shell to test whether <command>sudo</command> honors your new configuration.</para>
                        </step>
                     </procedure>
                  </example>
               </sect2>
               <sect2 xml:id="sudo-creating-custom-config-group">
                  <title>Create custom configurations by grouping items</title>
                  <para>Modify the configuration from <xref linkend="ex-sudo-custom-config-user"/> so that a group of named users can run the <command>useradd</command> command without the need for the <systemitem class="username">root</systemitem> password. Also, add the <command>usermod</command> and <command>userdel</command> to the list of commands available to this group.</para>
                  <example xml:id="ex-sudo-custom-config-group">
                     <title>Create custom configurations by grouping items</title>
                     <procedure>
                        <step>
                           <para>To modify the example configuration, open it as system administrator with <command>visudo</command>:</para>
                           <screen><prompt role="root">#</prompt><command>visudo /etc/sudoers.d/02_usermanagement</command></screen>
                        </step>
                        <step>
                           <para>Add more users to the rule in a comma-separated list:</para>
                           <screen>tux, wilber ALL = /usr/sbin/useradd
            </screen>
                        </step>
                        <step>
                           <para>To allow the listed users to execute a list of commands, specify the commands as a comma-separated list:</para>
                           <screen>tux, wilber ALL = /usr/sbin/useradd, /usr/sbin/usermod, /usr/sbin/userdel
            </screen>
                        </step>
                        <step>
                           <para>To let the listed users use their own password instead of the <systemitem class="username">root</systemitem> password, add the following line:</para>
                           <screen>Defaults:tux, wilber !targetpw
            </screen>
                           <para>When active, this flag requires the listed users to enter the password of the target user, that is, <systemitem class="username">root</systemitem>. This flag is enabled by default on any <phrase role="productname">SUSE Linux Enterprise Server</phrase> system. Negate it using <literal>!</literal> to require the listed users to just enter their own password instead of the <systemitem class="username">root</systemitem> password.</para>
                        </step>
                        <step>
                           <para>Save the configuration, leave the editor and open a second shell to test whether <command>sudo</command> honors your new configuration.</para>
                        </step>
                     </procedure>
                  </example>
               </sect2>
               <sect2 xml:id="sudo-creating-custom-config-aliases">
                  <title>Simplify configurations by applying aliases</title>
                  <para>Use aliases to simplify your custom configuration from <xref linkend="ex-sudo-custom-config-group"/> even further. Grouping items helps to a certain extent, but using global aliases for users, commands and hosts is the most efficient way to keep a clean and lean <command>sudo</command> configuration.</para>
                  <para>Using aliases and groups instead of lists is a much better way to address changes in your setup. Should a user leave, just remove them from the global <literal>User_Alias</literal> declaration in your alias declaration file instead of scouring all the separate custom configuration files. The same procedure applies for any other type of alias (<literal>Host_Alias</literal>, <literal>Cmnd_Alias</literal> and <literal>Runas_Alias</literal>).</para>
                  <example xml:id="ex-sudo-custom-config-alias">
                     <title>Simplify configurations by applying aliases</title>
                     <procedure>
                        <step>
                           <para>Create a new file to hold your global alias definitions:</para>
                           <screen><prompt role="root">#</prompt><command>visudo /etc/sudoers.d/01_aliases</command></screen>
                        </step>
                        <step>
                           <para>Add the following line to create the <literal>TEAMLEADERS</literal> alias:</para>
                           <screen>User_Alias    TEAMLEADERS = tux, wilber
            </screen>
                        </step>
                        <step>
                           <para>Add the following line to create the <literal>USERMANAGEMENT</literal> alias:</para>
                           <screen>Cmnd_Alias    USERMANAGEMENT = /usr/sbin/useradd, /usr/sbin/usermod, /usr/sbin/userdel
            </screen>
                        </step>
                        <step>
                           <para>Save your changes and exit <command>visudo</command>.</para>
                        </step>
                        <step>
                           <para>As system administrator, start <command>visudo</command> to edit the example configuration file:</para>
                           <screen><prompt role="root">#</prompt><command>visudo -f /etc/sudoers.d/02_usermanagement</command></screen>
                        </step>
                        <step>
                           <para>Delete the previous rule and replace it with the following rule that uses the aliases you have just defined above:</para>
                           <screen>TEAMLEADERS ALL = USERMANAGEMENT
            </screen>
                        </step>
                        <step>
                           <para>To let all the users defined by <literal>User_Alias</literal> use their own password instead of the <systemitem class="username">root</systemitem> password, add the following line:</para>
                           <screen>Defaults:TEAMLEADERS !targetpw</screen>
                        </step>
                        <step>
                           <para>Save the configuration, leave the editor and open a second shell to test whether <command>sudo</command> honors your new configuration.</para>
                        </step>
                     </procedure>
                  </example>
               </sect2>
               <sect2 xml:id="sec-sudo-conf-syntax">
                  <title>Basic sudoers configuration syntax</title>
                  <para>The sudoers configuration files contain two types of options: strings and flags. While strings can contain any value, flags can be turned either ON or OFF. The most important syntax constructs for sudoers configuration files are as follows:</para>
                  <screen>
# Everything on a line after # is ignored <co xml:id="co-sudo-syntax-comment"/>
Defaults !insults # Disable the insults flag <co xml:id="co-sudo-syntax-flag"/>
Defaults env_keep += "DISPLAY HOME" # Add DISPLAY and HOME to env_keep
tux ALL = NOPASSWD: /usr/bin/frobnicate, PASSWD: /usr/bin/journalctl <co xml:id="co-sudo-syntax-rule"/></screen>
                  <calloutlist>
                     <callout arearefs="co-sudo-syntax-comment">
                        <para>There are two exceptions: <literal>#include</literal> and <literal>#includedir</literal> are regular commands.</para>
                     </callout>
                     <callout arearefs="co-sudo-syntax-flag">
                        <para>Remove the <literal>!</literal> character to set the desired flag to ON.</para>
                     </callout>
                     <callout arearefs="co-sudo-syntax-rule">
                        <para>See <xref linkend="sec-sudo-conf-rule"/>.</para>
                     </callout>
                  </calloutlist>
                  <variablelist xml:id="tab-adm-sudo-options">
                     <title>Useful flags and options</title>
                     <varlistentry>
                        <term>
                           <literal>targetpw</literal>
                        </term>
                        <listitem>
                           <para>This flag controls whether the invoking user is required to enter the password of the target user (ON) (for example <systemitem class="username">root</systemitem>) or the invoking user (OFF).</para>
                           <screen>Defaults targetpw # Turn targetpw flag ON</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>rootpw</literal>
                        </term>
                        <listitem>
                           <para>If set, <command>sudo</command> prompts for the <systemitem class="username">root</systemitem> password. The default is OFF.</para>
                           <screen>Defaults !rootpw # Turn rootpw flag OFF</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>env_reset</literal>
                        </term>
                        <listitem>
                           <para>If set, <command>sudo</command> constructs a minimal environment with <envar>TERM</envar>, <envar>PATH</envar>, <envar>HOME</envar>, <envar>MAIL</envar>, <envar>SHELL</envar>, <envar>LOGNAME</envar>, <envar>USER</envar>, <envar>USERNAME</envar>, and <envar>SUDO_*</envar>. Additionally, variables listed in <literal>env_keep</literal> are imported from the calling environment. The default is ON.</para>
                           <screen>Defaults env_reset # Turn env_reset flag ON</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>env_keep</literal>
                        </term>
                        <listitem>
                           <para>List of environment variables to keep when the <literal>env_reset</literal> flag is ON.</para>
                           <screen>
# Set env_keep to contain EDITOR and PROMPT
Defaults env_keep = "EDITOR PROMPT"
Defaults env_keep += "JRE_HOME" # Add JRE_HOME
Defaults env_keep -= "JRE_HOME" # Remove JRE_HOME
</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>env_delete</literal>
                        </term>
                        <listitem>
                           <para>List of environment variables to remove when the <literal>env_reset</literal> flag is OFF.</para>
                           <screen>
# Set env_delete to contain EDITOR and PROMPT
Defaults env_delete = "EDITOR PROMPT"
Defaults env_delete += "JRE_HOME" # Add JRE_HOME
Defaults env_delete -= "JRE_HOME" # Remove JRE_HOME
</screen>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>The <literal>Defaults</literal> token can also be used to create aliases for a collection of users, hosts, and commands. Furthermore, it is possible to apply an option only to a specific set of users.</para>
                  <para>For detailed information about the sudoers configuration files, consult <command>man 5 sudoers</command>.</para>
               </sect2>
               <sect2 xml:id="sec-sudo-conf-rule">
                  <title>Basic sudoers rules</title>
                  <para>Each rule follows the following scheme (<literal>[]</literal> marks optional parts):</para>
                  <screen>
#Who      Where         As whom      Tag                What
User_List Host_List = [(User_List)] [NOPASSWD:|PASSWD:] Cmnd_List
</screen>
                  <variablelist>
                     <title>sudoers rule syntax</title>
                     <varlistentry>
                        <term>
                           <literal>User_List</literal>
                        </term>
                        <listitem>
                           <para>One or several (separated by comma) identifiers: either a user name, a group in the format <literal>%GROUPNAME</literal>, or a user ID in the format <literal>#UID</literal>. Negation can be specified with the <literal>!</literal> prefix.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>Host_List</literal>
                        </term>
                        <listitem>
                           <para>One or several (separated by comma) identifiers: either a (fully qualified) host name or an IP address. Negation can be specified with the <literal>!</literal> prefix. <literal>ALL</literal> is a common choice for <literal>Host_List</literal>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>NOPASSWD:|PASSWD:</literal>
                        </term>
                        <listitem>
                           <para>The user is not prompted for a password when running commands matching <literal>Cmd_List</literal> after <literal>NOPASSWD:</literal>.</para>
                           <para><literal>PASSWD</literal> is the default. It only needs to be specified when both <literal>PASSWD</literal> and <literal>NOPASSWD</literal> are on the same line:</para>
                           <screen>tux ALL = PASSWD: /usr/bin/foo, NOPASSWD: /usr/bin/bar</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>Cmnd_List</literal>
                        </term>
                        <listitem>
                           <para>One or several (separated by comma) specifiers: a path to an executable, followed by an optional allowed argument.</para>
                           <screen>
/usr/bin/foo     # Anything allowed
/usr/bin/foo bar # Only "/usr/bin/foo bar" allowed
/usr/bin/foo ""  # No arguments allowed
</screen>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para><literal>ALL</literal> can be used as <literal>User_List</literal>, <literal>Host_List</literal>, and <literal>Cmnd_List</literal>.</para>
                  <para>A rule that allows <systemitem class="username">tux</systemitem> to run all commands as root without entering a password:</para>
                  <screen>tux ALL = NOPASSWD: ALL</screen>
                  <para>A rule that allows <systemitem class="username">tux</systemitem> to run <command>systemctl restart apache2</command>:</para>
                  <screen>tux ALL = /usr/bin/systemctl restart apache2</screen>
                  <para>A rule that allows <systemitem class="username">tux</systemitem> to run <command>wall</command> as <systemitem>admin</systemitem> with no arguments:</para>
                  <screen>tux ALL = (admin) /usr/bin/wall ""</screen>
                  <warning>
                     <title>Unsafe rules</title>
                     <para><emphasis>Do not</emphasis> use rules like <literal>ALL ALL = ALL</literal> without <literal>Defaults targetpw</literal>. Otherwise anyone can run commands as <systemitem class="username">root</systemitem>.</para>
                  </warning>
                  <important>
                     <title>Winbind and sudo</title>
                     <para>When specifying the group name in the <filename>sudoers</filename> file, make sure that you use the NetBIOS domain name instead of the realm, for example:</para>
                     <screen><replaceable>%DOMAIN</replaceable>\\<replaceable>GROUP_NAME</replaceable> ALL = (ALL) ALL</screen>
                     <para>Keep in mind that when using winbindd, the format also depends on the <option>winbind separator</option> option in the <filename>smb.conf</filename> file. By default, it is <literal>\</literal>. If it is changed, for example, to <literal>+</literal>, then the account format in the <filename>sudoers</filename> file must be <literal>DOMAIN+GROUP_NAME</literal>.</para>
                  </important>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-sudo-usecases-xorg">
               <title>Using <command>sudo</command> with X.Org applications</title>
               <para>Starting graphical applications with <command>sudo</command> normally results in the following error:</para>
               <screen><prompt>&gt;</prompt><command>sudo</command> xterm
xterm: Xt error: Can't open display: %s
xterm: DISPLAY is not set
</screen>
               <para>A simple workaround is to use xhost to temporarily allow the root user to access the local user's X session. This is done using the following command:</para>
               <screen>xhost si:localuser:root</screen>
               <para>The command below removes the granted access:</para>
               <screen>xhost -si:localuser:root</screen>
               <warning>
                  <title>Potential security issue</title>
                  <para>Running graphical applications with root privileges has security implications. It is recommended to enable root access for a graphical application only as an exception. It is also recommended to revoke the granted root access as soon as the graphical application is closed.</para>
               </warning>
            </sect1>
            <sect1 xml:id="sec-adm-sudo-moreinfo">
               <title>More information</title>
               <para>The <command>sudo --help</command> command offers a brief overview of the available command line options, while the <command>man sudoers</command> command provides detailed information about <filename>sudoers</filename> and its configuration.</para>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-yast-gui"><?file yast2_gui.xml?>
            <title>Using YaST</title>
            <info/>
            <para>YaST is a <phrase role="productname">SUSE Linux Enterprise Server</phrase> tool that provides a graphical interface for all essential installation and system configuration tasks. Whether you need to update packages, configure a printer, modify firewall settings, set up an FTP server, or partition a hard disk—you can do it using YaST. Written in Ruby, YaST features an extensible architecture that makes it possible to add new functionality via modules.</para>
            <para>Additional information about YaST is available on the project's official Web site at <link xlink:href="https://yast.opensuse.org/"/>.</para>
            <sect1 xml:id="sec-yast2-gui">
               <title>YaST interface overview</title>
               <para>YaST has two graphical interfaces: one for use with graphical desktop environments like KDE and GNOME, and an ncurses-based pseudo-graphical interface for use on systems without an X server (see <xref linkend="cha-yast-text"/>).</para>
               <para>In the graphical version of YaST, all modules in YaST are grouped by category, and the navigation sidebar allows you to quickly access modules in the desired category. The search field at the top makes it possible to find modules by their names. To find a specific module, enter its name into the search field, and you should see the modules that match the entered string as you type.</para>
               <important>
                  <title>List of installed YaST modules</title>
                  <para>The list of installed modules for the ncurses-based and GUI version of YaST may differ. Before starting any YaST module, verify that it is installed for the version of YaST that you are using.</para>
               </important>
            </sect1>
            <sect1 xml:id="sec-yast-gui-key-combination">
               <title>Useful key combinations</title>
               <para>The graphical version of YaST supports keyboard shortcuts</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <keycap>Print Screen</keycap>
                     </term>
                     <listitem>
                        <para>Take and save a screenshot. It may not work on certain desktop environments.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="shift"/>
                           <keycap>F4</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Enable and disable the color palette optimized for visually impaired users.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="shift"/>
                           <keycap>F7</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Enable/disable logging of debug messages.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="shift"/>
                           <keycap>F8</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Open a file dialog to save log files to a user-defined location.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap function="shift"/>
                           <keycap function="alt"/>
                           <keycap>D</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Send a DebugEvent. YaST modules can react to this by executing special debugging actions. The result depends on the specific YaST module.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap function="shift"/>
                           <keycap function="alt"/>
                           <keycap>M</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Start and stop macro recorder.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap function="shift"/>
                           <keycap function="alt"/>
                           <keycap>P</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Replay macro.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap function="shift"/>
                           <keycap function="alt"/>
                           <keycap>S</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Show stylesheet editor.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap function="shift"/>
                           <keycap function="alt"/>
                           <keycap>T</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Dump widget tree to the log file.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap function="shift"/>
                           <keycap function="alt"/>
                           <keycap>X</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Open a terminal window (xterm). Useful for installation process via VNC.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap function="shift"/>
                           <keycap function="alt"/>
                           <keycap>Y</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Show widget tree browser.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-yast-text"><?file yast2_ncurses.xml?>
            <title>YaST in text mode</title>
            <info/>
            <para>The ncurses-based pseudo-graphical YaST interface is designed primarily to help system administrators to manage systems without an X server. The interface offers several advantages compared to the conventional GUI. You can navigate the ncurses interface using the keyboard, and there are keyboard shortcuts for practically all interface elements. The ncurses interface is light on resources, and runs fast even on modest hardware. You can run the ncurses-based version of YaST via an SSH connection, so you can administer remote systems. Keep in mind that the minimum supported size of the terminal emulator in which to run YaST is 80x25 characters.</para>
            <figure xml:id="fig-yast2-ncurses">
               <title>Main window of YaST in text mode</title>
               <mediaobject>
                  <imageobject outputformat="print">
                     <imagedata fileref="media/yast2_ncurses_main.png" width="64%"/>
                  </imageobject>
                  <imageobject outputformat="screen">
                     <imagedata fileref="media/yast2_ncurses_main.png" width="69%"/>
                  </imageobject>
               </mediaobject>
            </figure>
            <para>To launch the ncurses-based version of YaST, open the terminal and run the <command>sudo yast2</command> command. Use the <keycap function="tab"/> or arrow keys to navigate between interface elements like menu items, fields and buttons. All menu items and buttons in YaST can be accessed using the appropriate function keys or keyboard shortcuts. For example, you can cancel the current operation by pressing <keycap>F9</keycap>, while the <keycap>F10</keycap> key can be used to accept the changes. Each menu item and button in YaST's ncurses-based interface has a highlighted letter in its label. This letter is part of the keyboard shortcut assigned to the interface element. For example, the letter <literal>Q</literal> is highlighted in the <guimenu>Quit</guimenu> button. This means that you can activate the button by pressing <keycombo><keycap function="alt"/><keycap>Alt+Q</keycap></keycombo>.</para>
            <tip>
               <title>Refreshing YaST dialogs</title>
               <para>If a YaST dialog gets corrupted or distorted, for example, while resizing the window, press <keycombo><keycap function="control"/><keycap>L</keycap></keycombo> to refresh and restore its contents.</para>
            </tip>
            <sect1 xml:id="sec-yast-cli-navigate">
               <title>Navigation in modules</title>
               <para>The following description of the control elements in the YaST modules assumes that all function keys and <keycap function="alt"/> key combinations work and are not assigned to different global functions. Read <xref linkend="sec-yast-cli-restricted-keys"/> for information about possible exceptions.</para>
               <variablelist>
                  <varlistentry>
                     <term>Moving between buttons and selection lists</term>
                     <listitem>
                        <para>Use <keycap function="tab"/> to move between the buttons and frames containing selection lists. To navigate in the opposite direction, use <keycombo><keycap function="alt"/><keycap function="tab"/></keycombo> or <keycombo><keycap function="shift"/><keycap function="tab"/></keycombo> combinations.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Navigating in selection lists</term>
                     <listitem>
                        <para>Use the arrow keys (<keycap function="up"/> and <keycap function="down"/>) to move through the individual elements in an active frame containing a selection list. If individual entries are longer than the frame's width, use <keycombo><keycap function="shift"/><keycap function="right"/></keycombo> or <keycombo><keycap function="shift"/><keycap function="left"/></keycombo> to scroll horizontally. If the arrow key causes the selection to move to another frame, use <keycombo><keycap function="control"/><keycap>E</keycap></keycombo> or <keycombo><keycap function="control"/><keycap>A</keycap></keycombo> instead.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Working with buttons, radio buttons, and check boxes</term>
                     <listitem>
                        <para>To select items with empty square brackets (check boxes) or empty parentheses (radio buttons), press <keycap function="space"/> or <keycap function="enter"/>. Alternatively, radio buttons and check boxes can be selected directly with <keycombo><keycap function="alt"/><keycap>highlighted_letter</keycap></keycombo>. In this case, you do not need to confirm with <keycap function="enter"/>. If you navigate to an item with <keycap function="tab"/>, press <keycap function="enter"/> to execute the selected action or activate the respective menu item.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Function keys</term>
                     <listitem>
                        <para>The function keys (from <keycap>F1</keycap> to <keycap>F12</keycap>) enable quick access to the specific buttons. Available function key combinations (<literal>F<replaceable>X</replaceable></literal>) are shown in the bottom line of the YaST screen. Which function keys are really mapped to which buttons depend on the active YaST module, because the different modules offer different buttons (<guimenu>Details</guimenu>, <guimenu>Info</guimenu>, <guimenu>Add</guimenu>, <guimenu>Delete</guimenu>, etc.). Use <keycap>F10</keycap> for <guimenu>Accept</guimenu>, <guimenu>OK</guimenu>, <guimenu>Next</guimenu>, and <guimenu>Finish</guimenu>. Press <keycap>F1</keycap> to access the YaST help.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Using the navigation tree</term>
                     <listitem>
                        <para>Certain YaST modules use a navigation tree in the left part of the window to select configuration dialogs. Use the arrow keys (<keycap function="up"/> and <keycap function="down"/>) to navigate in the tree. Use <keycap function="space"/> to open or close tree items. In the ncurses mode, <keycap function="enter"/> must be pressed after a selection in the navigation tree to show the selected dialog. This is an intentional behavior to save time-consuming redraws when browsing through the navigation tree.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Selecting software in the software installation module</term>
                     <listitem>
                        <para>Use the filters on the left side to list packages matching the specified string. Installed packages are marked with the letter <literal>i</literal>. To change the status of a package, press <keycap function="space"/> or <keycap function="enter"/>. Alternatively, use the <guimenu>Actions</guimenu> menu to select the needed status change (install, delete, update, taboo or lock).</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <figure xml:id="fig-yast2-ncurses-inst">
                  <title>The software installation module</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/yast2_ncurses_inst.png" width="64%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/yast2_ncurses_inst.png" width="69%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
            </sect1>
            <sect1 xml:id="sec-yast-cli-key-combination">
               <title>Advanced key combinations</title>
               <para>The ncurses-based version of YaST offers several advanced key combinations.</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="shift"/>
                           <keycap>F1</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>List advanced hotkeys.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="shift"/>
                           <keycap>F4</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Change color schema.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap>Q</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Quit the application.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap>L</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Refresh screen.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap>D</keycap>
                        </keycombo>
                        <keycap>F1</keycap>
                     </term>
                     <listitem>
                        <para>List advanced hotkeys.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap>D</keycap>
                        </keycombo>
                        <keycombo>
                           <keycap function="shift"/>
                           <keycap>D</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Dump dialog to the log file as a screenshot.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <keycombo>
                           <keycap function="control"/>
                           <keycap>D</keycap>
                        </keycombo>
                        <keycombo>
                           <keycap function="shift"/>
                           <keycap>Y</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>Open YDialogSpy to see the widget hierarchy.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="sec-yast-cli-restricted-keys">
               <title>Restriction of key combinations</title>
               <para>If your window manager uses global <keycap function="alt"/> combinations, the <keycap function="alt"/> combinations in YaST may not work. Keys like <keycap function="alt"/> or <keycap function="shift"/> can also be occupied by the settings of the terminal.</para>
               <variablelist>
                  <varlistentry>
                     <term>Using <keycap function="alt"/> instead of <keycap function="escape"/>
                     </term>
                     <listitem>
                        <para><keycap function="alt"/> shortcuts can be executed with <keycap function="escape"/> instead of <keycap function="alt"/>. For example, <keycombo><keycap function="escape"/><keycap>H</keycap></keycombo> replaces <keycombo><keycap function="alt"/><keycap>H</keycap></keycombo>. (Press <keycap function="escape"/>, <emphasis>then</emphasis> press <keycap>H</keycap>.)</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Backward and forward navigation with <keycombo>
                           <keycap function="control"/>
                           <keycap>F</keycap>
                        </keycombo> and <keycombo>
                           <keycap function="control"/>
                           <keycap>B</keycap>
                        </keycombo>
                     </term>
                     <listitem>
                        <para>If the <keycap function="alt"/> and <keycap function="shift"/> combinations are taken over by the window manager or the terminal, use the combinations <keycombo><keycap function="control"/><keycap>F</keycap></keycombo> (forward) and <keycombo><keycap function="control"/><keycap>B</keycap></keycombo> (backward) instead.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Restriction of function keys</term>
                     <listitem>
                        <para>The function keys (<keycap>F1</keycap> ... <keycap>F12</keycap>) are also used for functions. Certain function keys may be taken over by the terminal and may not be available for YaST. However, the <keycap function="alt"/> key combinations and function keys should always be fully available on a text-only console.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="sec-yast-cli-options">
               <title>YaST command line options</title>
               <para>Besides the text mode interface, YaST provides a command line interface. To get a list of YaST command line options, use the following command:</para>
               <screen><prompt>&gt;</prompt><command>sudo</command> yast -h</screen>
               <sect2 xml:id="sec-yast-cli-options-install">
                  <title>Installing packages from the command line</title>
                  <para>If you know the package name, and the package is provided by an active installation repository, you can use the command line option <option>-i</option> to install the package:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> yast <replaceable>-i package_name</replaceable></screen>
                  <para>or</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> yast --install <replaceable>-i package_name</replaceable></screen>
                  <para><replaceable>package_name</replaceable> can be a single short package name, for example, <package>gvim</package>, installed with dependency checking, or the full path to an RPM package, which is installed without dependency checking.</para>
                  <para>While YaST offers basic functionality for managing software from the command line, consider using Zypper for more advanced package management tasks. Find more information on using Zypper in <xref linkend="sec-zypper"/>.</para>
               </sect2>
               <sect2 xml:id="sec-yast-cli-options-modules">
                  <title>Working with individual modules</title>
                  <para>To save time, you can start individual YaST modules using the following command:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> yast <replaceable>module_name</replaceable></screen>
                  <para>View a list of all modules available on your system with <command>yast -l</command> or <command>yast --list</command>.</para>
               </sect2>
               <sect2 xml:id="sec-yast-cli-options-module-params">
                  <title>Command line parameters of YaST modules</title>
                  <para>To use YaST functionality in scripts, YaST provides command line support for individual modules. However, not all modules have command line support. To display the available options of a module, use the following command:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> yast <replaceable>module_name</replaceable> help</screen>
                  <para>If a module does not provide command line support, it is started in a text mode with the following message:</para>
                  <screen>This YaST module does not support the command line interface.</screen>
                  <para>The following sections describe all YaST modules with command line support, along with a brief explanation of all their commands and available options.</para>
                  <sect3>
                     <title>Common YaST module commands</title>
                     <para>All YaST modules support the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>help</term>
                           <listitem>
                              <para>Lists all the module's supported commands with their description:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast lan help
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>longhelp</term>
                           <listitem>
                              <para>Same as <command>help</command>, but adds a detailed list of all command's options and their descriptions:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast lan longhelp
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>xmlhelp</term>
                           <listitem>
                              <para>Same as <command>longhelp</command>, but the output is structured as an XML document and redirected to a file:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast lan xmlhelp xmlfile=/tmp/yast_lan.xml
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>interactive</term>
                           <listitem>
                              <para>Enters the <emphasis>interactive</emphasis> mode. This lets you run the module's commands without prefixing them with <command>sudo yast</command>. Use <literal>exit</literal> to leave the interactive mode.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast add-on</title>
                     <para>Adds a new add-on product from the specified path:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> yast add-on http://server.name/directory/Lang-AddOn-CD1/
</screen>
                     <para>You can use the following protocols to specify the source path: http:// ftp:// nfs:// disk:// cd:// or dvd://.</para>
                  </sect3>
                  <sect3>
                     <title>yast audit-laf</title>
                     <para>Displays and configures the Linux Audit Framework. Refer to the <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="part-audit" xrefstyle="%label &#34;%c&#34;"/> for more details. <command>yast audit-laf</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Sets an option:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast audit-laf set log_file=/tmp/audit.log
</screen>
                              <para>For a complete list of options, run <command>yast audit-laf set help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>show</term>
                           <listitem>
                              <para>Displays settings of an option:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast audit-laf show diskspace
space_left: 75
space_left_action: SYSLOG
admin_space_left: 50
admin_space_left_action: SUSPEND
action_mail_acct: root
disk_full_action: SUSPEND
disk_error_action: SUSPEND
</screen>
                              <para>For a complete list of options, run <command>yast audit-laf show help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast dhcp-server</title>
                     <para>Manages the DHCP server and configures its settings. <command>yast dhcp-server</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>disable</term>
                           <listitem>
                              <para>Disables the DHCP server service.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>enable</term>
                           <listitem>
                              <para>Enables the DHCP server service.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>host</term>
                           <listitem>
                              <para>Configures settings for individual hosts.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>interface</term>
                           <listitem>
                              <para>Specifies to which network interface to listen to:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dhcp-server interface current
Selected Interfaces: eth0
Other Interfaces: bond0, pbu, eth1
</screen>
                              <para>For a complete list of options, run <command>yast dhcp-server interface help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>options</term>
                           <listitem>
                              <para>Manages global DHCP options. For a complete list of options, run <command>yast dhcp-server options help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>status</term>
                           <listitem>
                              <para>Prints the status of the DHCP service.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>subnet</term>
                           <listitem>
                              <para>Manages the DHCP subnet options. For a complete list of options, run <command>yast dhcp-server subnet help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast dns-server</title>
                     <para>Manages the DNS server configuration. <command>yast dns-server</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>acls</term>
                           <listitem>
                              <para>Displays access control list settings:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server acls show
 ACLs:
 -----
  Name       Type        Value
  ----------------------------
  any        Predefined
  localips   Predefined
  localnets  Predefined
  none       Predefined
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>dnsrecord</term>
                           <listitem>
                              <para>Configures zone resource records:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dnsrecord add zone=example.org query=office.example.org type=NS value=ns3
</screen>
                              <para>For a complete list of options, run <command>yast dns-server dnsrecord help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>forwarders</term>
                           <listitem>
                              <para>Configures DNS forwarders:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server forwarders add ip=10.0.0.100
<prompt>&gt;</prompt><command>sudo</command> yast dns-server forwarders show
[...]
Forwarder IP
------------
10.0.0.100
</screen>
                              <para>For a complete list of options, run <command>yast dns-server forwarders help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>host</term>
                           <listitem>
                              <para>Handles <quote>A</quote> and its related <quote>PTR</quote> record at once:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server host show zone=example.org
</screen>
                              <para>For a complete list of options, run <command>yast dns-server host help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>logging</term>
                           <listitem>
                              <para>Configures logging settings:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server logging set updates=no transfers=yes
</screen>
                              <para>For a complete list of options, run <command>yast dns-server logging help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>mailserver</term>
                           <listitem>
                              <para>Configures zone mail servers:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server mailserver add zone=example.org mx=mx1 priority=100
</screen>
                              <para>For a complete list of options, run <command>yast dns-server mailserver help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>nameserver</term>
                           <listitem>
                              <para>Configures zone name servers:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server nameserver add zone=example.com ns=ns1
</screen>
                              <para>For a complete list of options, run <command>yast dns-server nameserver help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>soa</term>
                           <listitem>
                              <para>Configures the start of authority (SOA) record:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server soa set zone=example.org serial=2006081623 ttl=2D3H20S
</screen>
                              <para>For a complete list of options, run <command>yast dns-server soa help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>startup</term>
                           <listitem>
                              <para>Manages the DNS server service:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server startup atboot
</screen>
                              <para>For a complete list of options, run <command>yast dns-server startup help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>transport</term>
                           <listitem>
                              <para>Configures zone transport rules. For a complete list of options, run <command>yast dns-server transport help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>zones</term>
                           <listitem>
                              <para>Manages DNS zones:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast dns-server zones add name=example.org zonetype=master
</screen>
                              <para>For a complete list of options, run <command>yast dns-server zones help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast disk</title>
                     <para>Prints information about all disks or partitions. The only supported command is <command>list</command> followed by either of the following options:</para>
                     <variablelist>
                        <varlistentry>
                           <term>disks</term>
                           <listitem>
                              <para>Lists all configured disks in the system:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast disk list disks
Device   | Size       | FS Type | Mount Point | Label | Model
---------+------------+---------+-------------+-------+-------------
/dev/sda | 119.24 GiB |         |             |       | SSD 840
/dev/sdb |  60.84 GiB |         |             |       | WD1003FBYX-0
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>partitions</term>
                           <listitem>
                              <para>Lists all partitions in the system:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast disk list partitions
Device         | Size       | FS Type | Mount Point | Label | Model
---------------+------------+---------+-------------+-------+------
/dev/sda1      |   1.00 GiB | Ext2    | /boot       |       |
/dev/sdb1      |   1.00 GiB | Swap    | swap        |       |
/dev/sdc1      | 698.64 GiB | XFS     | /mnt/extra  |       |
/dev/vg00/home | 580.50 GiB | Ext3    | /home       |       |
/dev/vg00/root | 100.00 GiB | Ext3    | /           |       |
[...]
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3 xml:id="sec-yast-ftp-server">
                     <title>yast ftp-server</title>
                     <para>Configures FTP server settings. <command>yast ftp-server</command> accepts the following options:</para>
                     <variablelist>
                        <varlistentry>
                           <term>SSL, TLS</term>
                           <listitem>
                              <para>Controls secure connections via SSL and TLS. SSL options are valid for the <systemitem>vsftpd</systemitem> only.</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server SSL enable
<prompt>&gt;</prompt><command>sudo</command> yast ftp-server TLS disable
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>access</term>
                           <listitem>
                              <para>Configures access permissions:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server access authen_only
</screen>
                              <para>For a complete list of options, run <command>yast ftp-server access help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>anon_access</term>
                           <listitem>
                              <para>Configures access permissions for anonymous users:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server anon_access can_upload
</screen>
                              <para>For a complete list of options, run <command>yast ftp-server anon_access help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>anon_dir</term>
                           <listitem>
                              <para>Specifies the directory for anonymous users. The directory must already exist on the server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server anon_dir set_anon_dir=/srv/ftp
</screen>
                              <para>For a complete list of options, run <command>yast ftp-server anon_dir help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>chroot</term>
                           <listitem>
                              <para>Controls <emphasis>change root</emphasis> environment (chroot):</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server chroot enable
<prompt>&gt;</prompt><command>sudo</command> yast ftp-server chroot disable
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>idle-time</term>
                           <listitem>
                              <para>Sets the maximum idle time in minutes before FTP server terminates the current connection:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server idle-time set_idle_time=15
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>logging</term>
                           <listitem>
                              <para>Determines whether to save the log messages into a log file:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server logging enable
<prompt>&gt;</prompt><command>sudo</command> yast ftp-server logging disable
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>max_clients</term>
                           <listitem>
                              <para>Specifies the maximum number of concurrently connected clients:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server max_clients set_max_clients=1500
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>max_clients_ip</term>
                           <listitem>
                              <para>Specifies the maximum number of concurrently connected clients via IP:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server max_clients_ip set_max_clients=20
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>max_rate_anon</term>
                           <listitem>
                              <para>Specifies the maximum data transfer rate permitted for anonymous clients (KB/s):</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server max_rate_anon set_max_rate=10000
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>max_rate_authen</term>
                           <listitem>
                              <para>Specifies the maximum data transfer rate permitted for locally authenticated users (KB/s):</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server max_rate_authen set_max_rate=10000
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>port_range</term>
                           <listitem>
                              <para>Specifies the port range for passive connection replies:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server port_range set_min_port=20000 set_max_port=30000
</screen>
                              <para>For a complete list of options, run <command>yast ftp-server port_range help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>show</term>
                           <listitem>
                              <para>Displays FTP server settings.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>startup</term>
                           <listitem>
                              <para>Controls the FTP start-up method:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server startup atboot
</screen>
                              <para>For a complete list of options, run <command>yast ftp-server startup help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>umask</term>
                           <listitem>
                              <para>Specifies the file umask for <literal>authenticated:anonymous</literal> users:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server umask set_umask=177:077
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>welcome_message</term>
                           <listitem>
                              <para>Specifies the text to display when someone connects to the FTP server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast ftp-server welcome_message set_message="hello everybody"
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast http-server</title>
                     <para>Configures the HTTP server (Apache2). <command>yast http-server</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>configure</term>
                           <listitem>
                              <para>Configures the HTTP server host settings:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast http-server configure host=main servername=www.example.com \
 serveradmin=admin@example.com
</screen>
                              <para>For a complete list of options, run <command>yast http-server configure help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <variablelist>
                        <varlistentry>
                           <term>hosts</term>
                           <listitem>
                              <para>Configures virtual hosts:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast http-server hosts create servername=www.example.com \
 serveradmin=admin@example.com documentroot=/var/www
</screen>
                              <para>For a complete list of options, run <command>yast http-server hosts help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <variablelist>
                        <varlistentry>
                           <term>listen</term>
                           <listitem>
                              <para>Specifies the ports and network addresses where the HTTP server should listen:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast http-server listen add=81
<prompt>&gt;</prompt><command>sudo</command> yast http-server listen list
Listen Statements:
==================
:80
:81
<prompt>&gt;</prompt><command>sudo</command> yast http-server delete=80
</screen>
                              <para>For a complete list of options, run <command>yast http-server listen help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <variablelist>
                        <varlistentry>
                           <term>mode</term>
                           <listitem>
                              <para>Enables or disables the wizard mode:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast http-server mode wizard=on
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <variablelist>
                        <varlistentry>
                           <term>modules</term>
                           <listitem>
                              <para>Controls the Apache2 server modules:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast http-server modules enable=php5,rewrite
<prompt>&gt;</prompt><command>sudo</command> yast http-server modules disable=ssl
<prompt>&gt;</prompt><command>sudo</command> http-server modules list
[...]
Enabled rewrite
Disabled ssl
Enabled php5
[...]
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast kdump</title>
                     <para>Configures <systemitem>kdump</systemitem> settings. For more information on <systemitem>kdump</systemitem>, refer to the <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>System Analysis and Tuning Guide</quote>, </phrase><xref linkend="cha-tuning-kdump-basic" xrefstyle="%label &#34;%c&#34;"/>. <command>yast kdump</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>copykernel</term>
                           <listitem>
                              <para>Copies the kernel into the dump directory.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>customkernel</term>
                           <listitem>
                              <para>Specifies the <replaceable>kernel_string</replaceable> part of the name of the custom kernel. The naming scheme is <filename>/boot/vmlinu[zx]-<replaceable>kernel_string</replaceable>[.gz]</filename>.</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump customkernel kernel=kdump
</screen>
                              <para>For a complete list of options, run <command>yast kdump customkernel help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>dumpformat</term>
                           <listitem>
                              <para>Specifies the (compression) format of the dump kernel image. Available formats are <quote>none</quote>, <quote>ELF</quote>, <quote>compressed</quote> or <quote>lzo</quote>:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump dumpformat dump_format=ELF
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>dumplevel</term>
                           <listitem>
                              <para>Specifies the dump level number in the range from 0 to 31:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump dumplevel dump_level=24
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>dumptarget</term>
                           <listitem>
                              <para>Specifies the destination for saving dump images:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> kdump dumptarget target=ssh server=name_server port=22 \
 dir=/var/log/dump user=user_name
</screen>
                              <para>For a complete list of options, run <command>yast kdump dumptarget help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>immediatereboot</term>
                           <listitem>
                              <para>Controls whether the system should reboot immediately after saving the core in the Kdump kernel:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump immediatereboot enable
<prompt>&gt;</prompt><command>sudo</command> yast kdump immediatereboot disable
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>keepolddumps</term>
                           <listitem>
                              <para>Specifies how many old dump images are kept. Specify zero to keep them all:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump keepolddumps no=5
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>kernelcommandline</term>
                           <listitem>
                              <para>Specifies the command line that needs to be passed off to the Kdump kernel:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump kernelcommandline command="ro root=LABEL=/"
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>kernelcommandlineappend</term>
                           <listitem>
                              <para>Specifies the command line that you need to <emphasis>append</emphasis> to the default command line string:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump kernelcommandlineappend command="ro root=LABEL=/"
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>notificationcc</term>
                           <listitem>
                              <para>Specifies an e-mail address for sending copies of notification messages:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump notificationcc email="user1@example.com user2@example.com"
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>notificationto</term>
                           <listitem>
                              <para>Specifies an e-mail address for sending notification messages:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump notificationto email="user1@example.com user2@example.com"
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>show</term>
                           <listitem>
                              <para>Displays <systemitem>kdump</systemitem> settings:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump show
Kdump is disabled
Dump Level: 31
Dump Format: compressed
Dump Target Settings
target: file
file directory: /var/crash
Kdump immediate reboots: Enabled
Numbers of old dumps: 5
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>smtppass</term>
                           <listitem>
                              <para>Specifies the file with the plain text SMTP password used for sending notification messages:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump smtppass pass=/path/to/file
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>smtpserver</term>
                           <listitem>
                              <para>Specifies the SMTP server host name used for sending notification messages:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump smtpserver server=smtp.server.com
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>smtpuser</term>
                           <listitem>
                              <para>Specifies the SMTP user name used for sending notification messages:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump smtpuser user=smtp_user
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>startup</term>
                           <listitem>
                              <para>Enables or disables start-up options:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast kdump startup enable alloc_mem=128,256
<prompt>&gt;</prompt><command>sudo</command> yast kdump startup disable
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast keyboard</title>
                     <para>Configures the system keyboard for virtual consoles. It does not affect the keyboard settings in graphical desktop environments, such as GNOME or KDE. <command>yast keyboard</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Lists all available keyboard layouts.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Activates new keyboard layout setting:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast keyboard set layout=czech
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Displays the current keyboard configuration.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast lan</title>
                     <para>Configures network cards. <command>yast lan</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>add</term>
                           <listitem>
                              <para>Configures a new network card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast lan add name=vlan50 ethdevice=eth0 bootproto=dhcp
</screen>
                              <para>For a complete list of options, run <command>yast lan add help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>delete</term>
                           <listitem>
                              <para>Deletes an existing network card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast lan delete id=0
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>edit</term>
                           <listitem>
                              <para>Changes the configuration of an existing network card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast lan edit id=0 bootproto=dhcp
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Displays a summary of network card configuration:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast lan list
id name,           bootproto
0 Ethernet Card 0, NONE
1 Network Bridge,  DHCP
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast language</title>
                     <para>Configures system languages. <command>yast language</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Lists all available languages.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Specifies the main system languages and secondary languages:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast language set lang=cs_CZ languages=en_US,es_ES no_packages
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast mail</title>
                     <para>Displays the configuration of the mail system:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> yast mail summary
</screen>
                  </sect3>
                  <sect3>
                     <title>yast nfs</title>
                     <para>Controls the NFS client. <command>yast nfs</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>add</term>
                           <listitem>
                              <para>Adds a new NFS mount:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs add spec=remote_host:/path/to/nfs/share file=/local/mount/point
</screen>
                              <para>For a complete list of options, run <command>yast nfs add help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>delete</term>
                           <listitem>
                              <para>Deletes an existing NFS mount:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs delete spec=remote_host:/path/to/nfs/share file=/local/mount/point
</screen>
                              <para>For a complete list of options, run <command>yast nfs delete help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>edit</term>
                           <listitem>
                              <para>Changes an existing NFS mount:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs edit spec=remote_host:/path/to/nfs/share \
 file=/local/mount/point type=nfs4
</screen>
                              <para>For a complete list of options, run <command>yast nfs edit help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Lists existing NFS mounts:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs list
Server            Remote File System    Mount Point    Options
----------------------------------------------------------------
nfs.example.com   /mnt                  /nfs/mnt       nfs
nfs.example.com   /home/tux/nfs_share   /nfs/tux       nfs
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast nfs-server</title>
                     <para>Configures the NFS server. <command>yast nfs-server</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>add</term>
                           <listitem>
                              <para>Adds a directory to export:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs-server add mountpoint=/nfs/export hosts=*.allowed_hosts.com
</screen>
                              <para>For a complete list of options, run <command>yast nfs-server add help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>delete</term>
                           <listitem>
                              <para>Deletes a directory from the NFS export:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs-server delete mountpoint=/nfs/export
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Specifies additional parameters for the NFS server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs-server set enablev4=yes security=yes
</screen>
                              <para>For a complete list of options, run <command>yast nfs-server set help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>start</term>
                           <listitem>
                              <para>Starts the NFS server service:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs-server start
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>stop</term>
                           <listitem>
                              <para>Stops the NFS server service:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs-server stop
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Displays a summary of the NFS server configuration:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nfs-server summary
NFS server is enabled
NFS Exports
* /mnt
* /home

NFSv4 support is enabled.
The NFSv4 domain for idmapping is localdomain.
NFS Security using GSS is enabled.
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast nis</title>
                     <para>Configures the NIS client. <command>yast nis</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>configure</term>
                           <listitem>
                              <para>Changes global settings of a NIS client:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis configure server=nis.example.com broadcast=yes
</screen>
                              <para>For a complete list of options, run <command>yast nis configure help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>disable</term>
                           <listitem>
                              <para>Disables the NIS client:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis disable
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>enable</term>
                           <listitem>
                              <para>Enables your machine as NIS client:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis enable server=nis.example.com broadcast=yes automounter=yes
</screen>
                              <para>For a complete list of options, run <command>yast nis enable help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>find</term>
                           <listitem>
                              <para>Shows available NIS servers for a given domain:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis find domain=nisdomain.com
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Displays a configuration summary of a NIS client.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast nis-server</title>
                     <para>Configures a NIS server. <command>yast nis-server</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>master</term>
                           <listitem>
                              <para>Configures a NIS master server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis-server master domain=nisdomain.com yppasswd=yes
</screen>
                              <para>For a complete list of options, run <command>yast nis-server master help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>slave</term>
                           <listitem>
                              <para>Configures a NIS worker server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis-server slave domain=nisdomain.com master_ip=10.100.51.65
</screen>
                              <para>For a complete list of options, run <command>yast nis-server slave help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>stop</term>
                           <listitem>
                              <para>Stops a NIS server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis-server stop
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Displays a configuration summary of a NIS server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast nis-server summary
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast proxy</title>
                     <para>Configures proxy settings. <command>yast proxy</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>authentication</term>
                           <listitem>
                              <para>Specifies the authentication options for proxy:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast proxy authentication username=tux password=secret
</screen>
                              <para>For a complete list of options, run <command>yast proxy authentication help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>enable, disable</term>
                           <listitem>
                              <para>Enables or disables proxy settings.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Changes the current proxy settings:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast proxy set https=proxy.example.com
</screen>
                              <para>For a complete list of options, run <command>yast proxy set help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Displays proxy settings.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast rdp</title>
                     <para>Controls remote desktop settings. <command>yast rdp</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>allow</term>
                           <listitem>
                              <para>Allows remote access to the server's desktop:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast rdp allow set=yes
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Displays the remote desktop configuration summary.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <!-- 2018-03-08 tbazant: not sure what this does
   <sect3>
    <title>yast rear</title>
    <para></para>
   </sect3>
   -->
                  <sect3>
                     <title>yast samba-client</title>
                     <para>Configures the Samba client settings. <command>yast samba-client</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>configure</term>
                           <listitem>
                              <para>Changes global settings of Samba:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-client configure workgroup=FAMILY
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>isdomainmember</term>
                           <listitem>
                              <para>Checks whether the machine is a member of a domain:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-client isdomainmember domain=SMB_DOMAIN
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>joindomain</term>
                           <listitem>
                              <para>Makes the machine a member of a domain:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-client joindomain domain=SMB_DOMAIN user=username password=pwd
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>winbind</term>
                           <listitem>
                              <para>Enables or disables Winbind services (the <systemitem>winbindd</systemitem> daemon):</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-client winbind enable
<prompt>&gt;</prompt><command>sudo</command> yast samba-client winbind disable
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast samba-server</title>
                     <para>Configures Samba server settings. <command>yast samba-server</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>backend</term>
                           <listitem>
                              <para>Specifies the back-end for storing user information:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-server backend smbpasswd
</screen>
                              <para>For a complete list of options, run <command>yast samba-server backend help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>configure</term>
                           <listitem>
                              <para>Configures global settings of the Samba server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-server configure workgroup=FAMILY description='Home server'
</screen>
                              <para>For a complete list of options, run <command>yast samba-server configure help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Displays a list of available shares:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-server list
Status     Type Name
==============================
Disabled   Disk profiles
Enabled    Disk print$
Enabled    Disk homes
Disabled   Disk groups
Enabled    Disk movies
Enabled    Printer printers
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>role</term>
                           <listitem>
                              <para>Specifies the role of the Samba server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-server role standalone
</screen>
                              <para>For a complete list of options, run <command>yast samba-server role help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>service</term>
                           <listitem>
                              <para>Enables or disables the Samba services (<systemitem>smb</systemitem> and <systemitem>nmb</systemitem>):</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-server service enable
<prompt>&gt;</prompt><command>sudo</command> yast samba-server service disable
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>share</term>
                           <listitem>
                              <para>Manipulates a single Samba share:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast samba-server share name=movies browseable=yes guest_ok=yes
</screen>
                              <para>For a complete list of options, run <command>yast samba-server share help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast security</title>
                     <para>Controls the security level of the host. <command>yast security</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>level</term>
                           <listitem>
                              <para>Specifies the security level of the host:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast security level server
</screen>
                              <para>For a complete list of options, run <command>yast security level help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Sets the value of a specific option:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast security set passwd=sha512 crack=yes
</screen>
                              <para>For a complete list of options, run <command>yast security set help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Displays a summary of the current security configuration:</para>
                              <screen><command>sudo</command>yast security summary
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast sound</title>
                     <para>Configures sound card settings. <command>yast sound</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>add</term>
                           <listitem>
                              <para>Configures a new sound card. Without any parameters, the command adds the first detected card.</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound add card=0 volume=75
</screen>
                              <para>For a complete list of options, run <command>yast sound add help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>channels</term>
                           <listitem>
                              <para>Lists available volume channels of a sound card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound channels card=0
Master 75
PCM 100
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>modules</term>
                           <listitem>
                              <para>Lists all available sound kernel modules:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound modules
snd-atiixp ATI IXP AC97 controller (snd-atiixp)
snd-atiixp-modem ATI IXP MC97 controller (snd-atiixp-modem)
snd-virtuoso Asus Virtuoso driver (snd-virtuoso)
[...]
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>playtest</term>
                           <listitem>
                              <para>Plays a test sound on a sound card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound playtest card=0
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>remove</term>
                           <listitem>
                              <para>Removes a configured sound card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound remove card=0
<prompt>&gt;</prompt><command>sudo</command> yast sound remove all
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Specifies new values for a sound card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound set card=0 volume=80
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>show</term>
                           <listitem>
                              <para>Displays detailed information about a sound card:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound show card=0
Parameters of card 'ThinkPad X240' (using module snd-hda-intel):

align_buffer_size
 Force buffer and period sizes to be multiple of 128 bytes.
bdl_pos_adj
 BDL position adjustment offset.
beep_mode
 Select HDA Beep registration mode (0=off, 1=on) (default=1).
 Default Value: 0
enable_msi
 Enable Message Signaled Interrupt (MSI)
[...]
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Prints a configuration summary for all sound cards on the system:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sound summary
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>volume</term>
                           <listitem>
                              <para>Specifies the volume level of a sound card:</para>
                              <screen><command>sudo</command>yast sound volume card=0 play
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast sysconfig</title>
                     <para>Controls the variables in files under <filename>/etc/sysconfig</filename>. <command>yast sysconfig</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>clear</term>
                           <listitem>
                              <para>Sets empty value to a variable:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sysconfig clear=POSTFIX_LISTEN
</screen>
                              <tip>
                                 <title>Variable in multiple files</title>
                                 <para>If the variable is available in several files, use the <replaceable>VARIABLE_NAME</replaceable>$<replaceable>FILE_NAME</replaceable> syntax:</para>
                                 <screen><prompt>&gt;</prompt><command>sudo</command> yast sysconfig clear=CONFIG_TYPE$/etc/sysconfig/mail
</screen>
                              </tip>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>details</term>
                           <listitem>
                              <para>Displays detailed information about a variable:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sysconfig details variable=POSTFIX_LISTEN
Description:
Value:
File: /etc/sysconfig/postfix
Possible Values: Any value
Default Value:
Configuration Script: postfix
Description:
 Comma separated list of IP's
 NOTE: If not set, LISTEN on all interfaces
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Displays summary of modified variables. Use <command>all</command> to list all variables and their values:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sysconfig list all
AOU_AUTO_AGREE_WITH_LICENSES="false"
AOU_ENABLE_CRONJOB="true"
AOU_INCLUDE_RECOMMENDS="false"
[...]
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Sets a value for a variable:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast sysconfig set DISPLAYMANAGER=gdm
</screen>
                              <tip>
                                 <title>Variable in multiple files</title>
                                 <para>If the variable is available in several files, use the <replaceable>VARIABLE_NAME</replaceable>$<replaceable>FILE_NAME</replaceable> syntax:</para>
                                 <screen><prompt>&gt;</prompt><command>sudo</command> yast sysconfig set CONFIG_TYPE$/etc/sysconfig/mail=advanced
</screen>
                              </tip>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast tftp-server</title>
                     <para>Configures a TFTP server. <command>yast tftp-server</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>directory</term>
                           <listitem>
                              <para>Specifies the directory of the TFTP server:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast tftp-server directory path=/srv/tftp
<prompt>&gt;</prompt><command>sudo</command> yast tftp-server directory list
Directory Path: /srv/tftp
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>status</term>
                           <listitem>
                              <para>Controls the status of the TFTP server service:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast tftp-server status disable
<prompt>&gt;</prompt><command>sudo</command> yast tftp-server status show
Service Status: false
<prompt>&gt;</prompt><command>sudo</command> yast tftp-server status enable
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast timezone</title>
                     <para>Configures the time zone. <command>yast timezone</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Lists all available time zones grouped by region:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast timezone list
Region: Africa
Africa/Abidjan (Abidjan)
Africa/Accra (Accra)
Africa/Addis_Ababa (Addis Ababa)
[...]
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>set</term>
                           <listitem>
                              <para>Specifies new values for the time zone configuration:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast timezone set timezone=Europe/Prague hwclock=local
</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>summary</term>
                           <listitem>
                              <para>Displays the time zone configuration summary:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast timezone summary
Current Time Zone: Europe/Prague
Hardware Clock Set To: Local time
Current Time and Date: Mon 12. March 2018, 11:36:21 CET
</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3>
                     <title>yast users</title>
                     <para>Manages user accounts. <command>yast users</command> accepts the following commands:</para>
                     <variablelist>
                        <varlistentry>
                           <term>add</term>
                           <listitem>
                              <para>Adds a new user:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast users add username=user1 password=secret home=/home/user1
</screen>
                              <para>For a complete list of options, run <command>yast users add help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>delete</term>
                           <listitem>
                              <para>Deletes an existing user account:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast users delete username=user1 delete_home
</screen>
                              <para>For a complete list of options, run <command>yast users delete help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>edit</term>
                           <listitem>
                              <para>Changes an existing user account:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast users edit username=user1 password=new_secret
</screen>
                              <para>For a complete list of options, run <command>yast users edit help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>list</term>
                           <listitem>
                              <para>Lists existing users filtered by user type:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast users list system
</screen>
                              <para>For a complete list of options, run <command>yast users list help</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>show</term>
                           <listitem>
                              <para>Displays details about a user:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> yast users show username=wwwrun
Full Name: WWW daemon apache
List of Groups: www
Default Group: wwwrun
Home Directory: /var/lib/wwwrun
Login Shell: /sbin/nologin
Login Name: wwwrun
UID: 456
</screen>
                              <para>For a complete list of options, run <command>yast users show help</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
               </sect2>
            </sect1>
         </chapter>
         <!--taroth 2010-01-08: yast2 module maintainer: jsuchome@suse.cz-->
         <chapter version="5.2" xml:id="cha-yast-lang"><?file yast2_lang.xml?>
            <title>Changing language and country settings with YaST</title>
            <info>
               <abstract>
                  <para>This chapter explains how to configure language and country settings. You can change the language globally for the whole system, individually for certain users or desktops, or temporarily for single applications. Additionally, you can configure secondary languages and adjust the date and country settings.</para>
               </abstract>
            </info>
            <para>If you work in different countries or in a multilingual environment, you should configure your system accordingly. <phrase role="productname">SUSE® Linux Enterprise Server</phrase> can handle different <literal>locales</literal> in parallel. A locale is a set of parameters that defines the language and country settings reflected in the user interface.</para>
            <para>The main system language is selected during installation, and keyboard and time zone settings are adjusted accordingly. However, you can install additional languages and determine which of the installed languages should be the default.</para>
            <para>For those tasks, use the YaST language module as described in <xref linkend="sec-yast-langmod"/>. Install secondary languages to get optional localization if you need to start applications or desktops in languages other than the primary one.</para>
            <para>The YaST time zone module allows you to adjust your country and time zone settings accordingly. It also lets you synchronize your system clock against a time server. For details, refer to <xref linkend="sec-yast-country"/>.</para>
            <sect1 xml:id="sec-yast-langmod">
               <title>Changing the system language</title>
               <para>Depending on how you use your desktop and whether you want to switch the entire system to another language or only the desktop environment, you have several options:</para>
               <variablelist>
                  <varlistentry xml:id="vle-lang-system">
                     <term>Changing the system language globally</term>
                     <listitem>
                        <para>Proceed as described in <xref linkend="sec-yast-lang-primsec"/> and <xref linkend="sec-yast-lang-switch"/> to install additional localized packages with YaST and to set the default language. Changes are effective after the next login. To ensure that the entire system reflects the change, reboot the system or close and restart all running services, applications and programs.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry xml:id="vle-lang-desktop">
                     <term>Changing the language for the desktop only</term>
                     <listitem>
                        <para>Provided you have previously installed the desired language packages for your desktop environment with YaST as described below, you can switch the language of your desktop using the desktop's control center. After the X server has been restarted, your entire desktop reflects your new choice of language. Applications not belonging to your desktop framework are not affected by this change and may still appear in the language that was set in YaST.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry xml:id="vle-lang-application">
                     <term>Temporarily switching languages for one application only</term>
                     <listitem>
                        <para>You can also run a single application in another language (that has already been installed with YaST). To do so, start it from the command line by specifying the language code as described in <xref linkend="sec-yast-lang-applications"/>.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <sect2 xml:id="sec-yast-lang-primsec">
                  <title>Modifying system languages with YaST</title>
                  <para>YaST supports two different language categories:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <guimenu>Primary Language</guimenu>
                        </term>
                        <listitem>
                           <para>The primary language set in YaST applies to the entire system, including YaST and the desktop environment. This language is used whenever available unless you manually specify another language.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Secondary Languages</guimenu>
                        </term>
                        <listitem>
                           <para>Install secondary languages to make your system multilingual. Languages installed as secondary can be selected manually, when needed. For example, use a secondary language to start an application in a certain language to do word processing in this language.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>Before installing additional languages, determine which of them should be the default system language (primary language).</para>
                  <para>To access the YaST language module, start YaST and click <menuchoice><guimenu>System</guimenu><guimenu>Language</guimenu></menuchoice>. Alternatively, start the <guimenu>Languages</guimenu> dialog directly by running <command>sudo yast2 language &amp;</command> from a command line.</para>
                  <informalfigure>
                     <mediaobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/yast2_language.png" width="69%"/>
                        </imageobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/yast2_language.png" width="69%"/>
                        </imageobject>
                     </mediaobject>
                  </informalfigure>
                  <procedure xml:id="pro-yast-lang-additional">
                     <title>Installing additional languages</title>
                     <para>When installing additional languages, YaST allows you to set different locale settings for the user <systemitem class="username">root</systemitem>, see <xref linkend="st-yast-lang-additional-root"/>. The option <guimenu>Locale Settings for User root</guimenu> determines how the locale variables (<envar>LC_*</envar>) in the file <filename>/etc/sysconfig/language</filename> are set for <systemitem class="username">root</systemitem>. You can set them to the same locale as for regular users. Alternatively, you can keep them unaffected by any language changes, or only set the variable <envar>RC_LC_CTYPE</envar> to the same values as for the regular users. The <envar>RC_LC_CTYPE</envar> variable sets the localization for language-specific function calls.</para>
                     <step>
                        <para>To add languages in the YaST language module, select the <guimenu>Secondary Languages</guimenu> you want to install.</para>
                     </step>
                     <step>
                        <para>To make a language the default language, set it as <guimenu>Primary Language</guimenu>.</para>
                     </step>
                     <step>
                        <para>Additionally, adapt the keyboard to the new primary language and adjust the time zone, if appropriate.</para>
                        <!-- bnc#359220 -->
                        <tip>
                           <title>Advanced settings</title>
                           <para>For advanced keyboard or time zone settings, select <menuchoice><guimenu>Hardware</guimenu><guimenu>System Keyboard Layout</guimenu></menuchoice> or <menuchoice><guimenu>System</guimenu><guimenu>Date and Time</guimenu></menuchoice> in YaST. For more information, refer to <xref linkend="sec-yast-hw-keym"/> and <xref linkend="sec-yast-country"/>.</para>
                        </tip>
                     </step>
                     <step xml:id="st-yast-lang-additional-root">
                        <para>To change language settings specific to the user <systemitem class="username">root</systemitem>, click <guimenu>Details</guimenu>.</para>
                        <substeps performance="required">
                           <step>
                              <para>Set <guimenu>Locale Settings for User root</guimenu> to the desired value. For more information, click <guimenu>Help</guimenu>.</para>
                           </step>
                           <step>
                              <para>Decide whether to use <guimenu>Use UTF-8 Encoding</guimenu> for <systemitem class="username">root</systemitem> or not.</para>
                           </step>
                        </substeps>
                     </step>
                     <step>
                        <para>If your locale was not included in the list of primary languages available, try specifying it with <guimenu>Detailed Locale Setting</guimenu>. However, this may result in certain locales being incomplete.</para>
                     </step>
                     <step>
                        <para>Confirm the changes in the dialogs with <guimenu>OK</guimenu>. If you have selected secondary languages, YaST installs the localized software packages for the additional languages.</para>
                     </step>
                  </procedure>
                  <para>The system is now multilingual. However, to start an application in a language other than the primary one, you need to set the desired language explicitly as explained in <xref linkend="sec-yast-lang-applications"/>.</para>
               </sect2>
               <sect2 xml:id="sec-yast-lang-switch">
                  <title>Switching the default system language</title>
                  <para>To globally change the default language of a system, use the following procedure:</para>
                  <procedure>
                     <step>
                        <para>Start the YaST language module.</para>
                     </step>
                     <step>
                        <para>Select the desired new system language as <guimenu>Primary Language</guimenu>.</para>
                        <important>
                           <title>Deleting former system languages</title>
                           <para>If you switch to a different primary language, the localized software packages for the former primary language gets removed from the system. To switch the default system language but keep the former primary language as an additional language, add it as <guimenu>Secondary Language</guimenu> by selecting the respective check box.</para>
                        </important>
                     </step>
                     <step>
                        <para>Adjust the keyboard and time zone options as desired.</para>
                     </step>
                     <step>
                        <para>Confirm your changes with <guimenu>OK</guimenu>.</para>
                     </step>
                     <step>
                        <para>After YaST has applied the changes, restart current X sessions (for example, by logging out and logging in again) to make YaST and the desktop applications reflect your new language settings.</para>
                     </step>
                  </procedure>
               </sect2>
               <sect2 xml:id="sec-yast-lang-applications">
                  <title>Switching languages for standard X and GNOME applications</title>
                  <para>After you have installed the respective language with YaST, you can run a single application in another language.</para>
                  <para>Start the application from the command line by using the following command:</para>
                  <screen>LANG=<replaceable>LANGUAGE</replaceable> <replaceable>application</replaceable></screen>
                  <para>For example, to start f-spot in German, run <command>LANG=de_DE f-spot</command>. For other languages, use the appropriate language code. Get a list of all language codes available with the <command>locale </command><option>-av</option> command.</para>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-yast-country">
               <title>Changing the country and time settings</title>
               <para>Using the YaST date and time module, adjust your system date, clock and time zone information to the area you are working in. To access the YaST module, start YaST and click <menuchoice><guimenu>System</guimenu><guimenu>Date and Time</guimenu></menuchoice>. Alternatively, start the <guimenu>Clock and Time Zone</guimenu> dialog directly by running <command>sudo yast2 timezone &amp;</command> from a command line.</para>
               <informalfigure>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/yast2_timezone.png" width="69%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/yast2_timezone.png" width="69%"/>
                     </imageobject>
                  </mediaobject>
               </informalfigure>
               <para>First, select a general region, such as <guimenu>Europe</guimenu>. Choose an appropriate country that matches the one you are working in, for example, <guimenu>Germany</guimenu>.</para>
               <para>Depending on which operating systems run on your workstation, adjust the hardware clock settings accordingly:</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <para>If you run another operating system on your machine, such as Microsoft Windows*, your system may not use UTC, but local time. In this case, deactivate <guimenu>Hardware Clock Set To UTC</guimenu>.</para>
                  </listitem>
                  <listitem>
                     <para>If you only run Linux on your machine, set the hardware clock to UTC and have the switch from standard time to daylight saving time performed automatically.</para>
                  </listitem>
               </itemizedlist>
               <important>
                  <title>Set the hardware clock to UTC</title>
                  <para>The switch from standard time to daylight saving time (and vice versa) can only be performed automatically when the hardware clock (CMOS clock) is set to UTC. This also applies if you use automatic time synchronization with NTP, because automatic synchronization is only performed if the time difference between the hardware and system clock is less than 15 minutes.</para>
                  <para>Since a wrong system time can cause serious problems (missed backups, dropped mail messages, mount failures on remote file systems, etc.) it is strongly recommended to <emphasis>always</emphasis> set the hardware clock to UTC.</para>
               </important>
               <para>You can change the date and time manually or opt for synchronizing your machine against an NTP server, either permanently or only for adjusting your hardware clock.</para>
               <procedure>
                  <title>Manually adjusting time and date</title>
                  <step>
                     <para>In the YaST timezone module, click <guimenu>Other Settings</guimenu> to set date and time.</para>
                  </step>
                  <step>
                     <para>Select <guimenu>Manually</guimenu> and enter date and time values.</para>
                  </step>
                  <step>
                     <para>Confirm your changes.</para>
                  </step>
               </procedure>
               <procedure>
                  <title>Setting date and time with NTP server</title>
                  <step>
                     <para>Click <guimenu>Other Settings</guimenu> to set date and time.</para>
                  </step>
                  <step>
                     <para>Select <guimenu>Synchronize with NTP Server</guimenu>.</para>
                  </step>
                  <step>
                     <para>Enter the address of an NTP server, if not already populated.</para>
                     <informalfigure>
                        <mediaobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/yast2_timezone_ntp.png" width="69%"/>
                           </imageobject>
                           <imageobject role="pdf">
                              <imagedata fileref="media/yast2_timezone_ntp.png" width="69%"/>
                           </imageobject>
                        </mediaobject>
                     </informalfigure>
                  </step>
                  <step>
                     <para>With the <guimenu>Configure</guimenu> button, you can open the advanced NTP configuration. For details, see <xref linkend="sec-ntp-yast"/>.</para>
                  </step>
                  <step>
                     <para>Confirm your changes.</para>
                  </step>
               </procedure>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-yast-userman"><?file yast2_userman.xml?>
            <title>Managing users with YaST</title>
            <info/>
            <para>During installation, you may have created a local user for your system. With the YaST module <guimenu>User and Group Management</guimenu> you can add users or edit existing ones. It also lets you configure your system to authenticate users with a network server.</para>
            <sect1 xml:id="sec-yast-userman-main">
               <title>User and group administration dialog</title>
               <para>To administer users or groups, start YaST and click <menuchoice><guimenu>Security and Users</guimenu><guimenu>User and Group Management</guimenu></menuchoice>. Alternatively, start the <guimenu>User and Group Administration</guimenu> dialog directly by running <command>sudo yast2 users &amp;</command> from a command line.</para>
               <figure xml:id="fig-y2-userman-main">
                  <title>YaST user and group administration</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/yast2_users_main_qt.png" width="82%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/yast2_users_main_qt.png" width="64%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
               <para>Every user is assigned a system-wide user ID (UID). Apart from the users that can log in to your machine, there are also several <emphasis>system users</emphasis> for internal use only. Each user is assigned to one or more groups. Similar to <emphasis>system users</emphasis>, there are also <emphasis>system groups</emphasis> for internal use.</para>
               <para>The main window shows several tabs, depending on the set of users (local users, network users, system users) you choose to view and modify. The tabs allow you to perform the following tasks:</para>
               <variablelist>
                  <varlistentry>
                     <term>Managing user accounts</term>
                     <listitem>
                        <para>From the <guimenu>Users</guimenu> tab create, modify, delete or temporarily disable user accounts as described in <xref linkend="sec-yast-userman-users"/>. Learn about advanced options like enforcing password policies, using encrypted home directories, or managing disk quotas in <xref linkend="sec-yast-userman-adv"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Changing default settings</term>
                     <listitem>
                        <para>Local user accounts are created according to the settings defined on the <guimenu>Defaults for New Users</guimenu> tab. Learn how to change the default group assignment, or the default path and access permissions for home directories in <xref linkend="sec-yast-userman-defaults"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Assigning users to groups</term>
                     <listitem>
                        <para>Learn how to change the group assignment for individual users in <xref linkend="sec-yast-userman-assign"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Managing groups</term>
                     <listitem>
                        <para>From the <guimenu>Groups</guimenu> tab, you can add, modify or delete existing groups. Refer to <xref linkend="sec-yast-userman-groups"/> for information on how to do this.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Changing user authentication method</term>
                     <listitem>
                        <para>When your machine is connected to a network that provides user authentication methods like NIS or LDAP, you can choose between several authentication methods on the <guimenu>Authentication Settings</guimenu> tab. For more information, refer to <xref linkend="sec-yast-userman-authent"/>.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>For user and group management, the dialog provides similar functionality. You can easily switch between the user and group administration view by choosing the appropriate tab at the top of the dialog.</para>
               <para>Filter options allow you to define the set of users or groups you want to modify: on the <guimenu>Users</guimenu> or <guimenu>Group</guimenu> tab, click <guimenu>Set Filter</guimenu> to view and edit users or groups. They are listed according to certain categories, such as <guimenu>Local Users</guimenu> or <guimenu>LDAP Users</guimenu>, if applicable. With <menuchoice><guimenu>Set Filter</guimenu><guimenu>Customize Filter</guimenu></menuchoice> you can also set up and use a custom filter.</para>
               <para>Depending on the filter you choose, not all the following options and functions may be available from the dialog.</para>
            </sect1>
            <sect1 xml:id="sec-yast-userman-users">
               <title>Managing user accounts</title>
               <para>YaST allows you to create, modify, delete or temporarily disable user accounts. Do not modify user accounts unless you are an experienced user or administrator.</para>
               <note>
                  <title>Changing user IDs of existing users</title>
                  <para>File ownership is bound to the user ID, not to the user name. After a user ID change, the files in the user's home directory are automatically adjusted to reflect this change. However, after an ID change, the user no longer owns the files they created elsewhere in the file system unless the file ownership for those files is manually modified.</para>
               </note>
               <para>The following instructions demonstrate how to set up default user accounts. For further options, refer to <xref linkend="sec-yast-userman-adv"/>.</para>
               <procedure>
                  <title>Adding or modifying user accounts</title>
                  <step>
                     <para>Open the YaST <guimenu>User and Group Administration</guimenu> dialog and click the <guimenu>Users</guimenu> tab.</para>
                  </step>
                  <step>
                     <para>With <guimenu>Set Filter</guimenu> define the set of users you want to manage. The dialog lists users in the system and the groups the users belong to.</para>
                  </step>
                  <step>
                     <para>To modify options for an existing user, select an entry and click <guimenu>Edit</guimenu>.</para>
                     <para>To create a new user account, click <guimenu>Add</guimenu>.</para>
                  </step>
                  <step>
                     <para>Enter the appropriate user data on the first tab, such as <guimenu>Username</guimenu> (which is used for login) and <guimenu>Password</guimenu>. This data is sufficient to create a new user. If you click <guimenu>OK</guimenu> now, the system automatically assigns a user ID and sets all other values as default.</para>
                  </step>
                  <!--Fate #302264-->
                  <step>
                     <para>Activate <guimenu>Receive System Mail</guimenu> if you want system notifications to be delivered to this user's mailbox. This creates a mail alias for <systemitem class="username">root</systemitem> and the user can read the system mail without having to first log in as <systemitem class="username">root</systemitem>.</para>
                     <para>The mails sent by system services are stored in the local mailbox <filename>/var/spool/mail/</filename><replaceable>USERNAME</replaceable>, where <replaceable>USERNAME</replaceable> is the login name of the selected user. To read e-mails, you can use the <command>mail</command> command.</para>
                  </step>
                  <step>
                     <para>To adjust further details such as the user ID or the path to the user's home directory, do so on the <guimenu>Details</guimenu> tab.</para>
                     <para>If you need to relocate the home directory of an existing user, enter the path to the new home directory there and move the contents of the current home directory with <guimenu>Move to New Location</guimenu>. Otherwise, a new home directory is created without any of the existing data.</para>
                  </step>
                  <step>
                     <para>To force users to regularly change their password or set other password options, switch to <guimenu>Password Settings</guimenu> and adjust the options. For more details, refer to <xref linkend="sec-yast-userman-adv-passw"/>.</para>
                  </step>
                  <step>
                     <para>If all options are set according to your wishes, click <guimenu>OK</guimenu>.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>OK</guimenu> to close the administration dialog and to save the changes. A newly added user can now log in to the system using the login name and password you created.</para>
                     <para>Alternatively, to save all changes without exiting the <guimenu>User and Group Administration</guimenu> dialog, click <menuchoice><guimenu>Expert Options</guimenu><guimenu>Write Changes Now</guimenu></menuchoice>.</para>
                  </step>
               </procedure>
               <!-- cwickert 2023-07-04: This is based on https://www.suse.com/support/kb/doc/?id=000020537
     If you change something here, please also update sec-yast-install-user-root and
     Configuration-Security-users.
   -->
               <warning>
                  <title>Do not rename the <systemitem class="username">root</systemitem> account</title>
                  <para>While it is technically possible to rename the <systemitem class="username">root</systemitem> account, certain applications, scripts or third-party products may rely on the existence of a user called <systemitem class="username">root</systemitem>. While such a configuration always targets individual environments, necessary adjustments could be overwritten by vendor updates, so this becomes an ongoing task rather than a one-time setting. This is especially true in complex setups involving third-party applications, where it needs to be verified with every vendor involved whether a rename of the <systemitem class="username">root</systemitem> account is supported.</para>
                  <para>As the implications for renaming the <systemitem class="username">root</systemitem> account cannot be foreseen, SUSE does not support renaming the <systemitem class="username">root</systemitem> account.</para>
                  <para>Usually, the idea behind renaming the <systemitem class="username">root</systemitem> account is to hide it or make it unpredictable. However, <filename>/etc/passwd</filename> requires <literal>644</literal> permissions for regular users, so any user of the system can retrieve the login name for the user ID 0. For better ways to secure the <systemitem class="username">root</systemitem> account, refer to <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="sec-sec-prot-restrict-root" xrefstyle="%label &#34;%c&#34;"/> and <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="sec-sec-prot-restrict-root-ssh" xrefstyle="%label &#34;%c&#34;"/>.</para>
               </warning>
               <tip>
                  <title>Matching user IDs</title>
                  <para>It is useful to match the (local) user ID to the ID in the network. For example, a new (local) user on a laptop should be integrated into a network environment with the same user ID. This ensures that the file ownership of the files the user creates <quote>offline</quote> is the same as if they had created them directly on the network.</para>
               </tip>
               <procedure>
                  <title>Disabling or deleting user accounts</title>
                  <step>
                     <para>Open the YaST <guimenu>User and Group Administration</guimenu> dialog and click the <guimenu>Users</guimenu> tab.</para>
                  </step>
                  <step>
                     <para>To temporarily disable a user account without deleting it, select the user from the list and click <guimenu>Edit</guimenu>. Activate <guimenu>Disable User Login</guimenu>. The user cannot log in to your machine until you enable the account again.</para>
                  </step>
                  <step>
                     <para>To delete a user account, select the user from the list and click <guimenu>Delete</guimenu>. Choose if you also want to delete the user's home directory or to retain the data.</para>
                  </step>
               </procedure>
            </sect1>
            <sect1 xml:id="sec-yast-userman-adv">
               <title>Additional options for user accounts</title>
               <para>Besides the settings for a default user account, <phrase role="productname">SUSE® Linux Enterprise Server</phrase> offers further options. For example, options to enforce password policies, use encrypted home directories or define disk quotas for users and groups.</para>
               <sect2 xml:id="sec-yast-userman-adv-login">
                  <title>Automatic login and passwordless login</title>
                  <para>If you use the GNOME desktop environment you can configure <emphasis>Auto Login</emphasis> for a certain user and <emphasis>Passwordless Login</emphasis> for all users. Auto login causes a user to become automatically logged in to the desktop environment on boot. This functionality can only be activated for one user at a time. Login without password allows all users to log in to the system after they have entered their user name in the login manager.</para>
                  <warning>
                     <title>Security risk</title>
                     <para>Enabling <emphasis>Auto Login</emphasis> or <emphasis>Passwordless Login</emphasis> on a machine that can be accessed by more than one person is a security risk. Without the need to authenticate, any user can gain access to your system and your data. If your system contains confidential data, do not use this functionality.</para>
                  </warning>
                  <para>To activate auto login or login without password, access these functions in the YaST <guimenu>User and Group Administration</guimenu> with <menuchoice><guimenu>Expert Options</guimenu><guimenu>Login Settings</guimenu></menuchoice>.</para>
               </sect2>
               <sect2 xml:id="sec-yast-userman-adv-passw">
                  <title>Enforcing password policies</title>
                  <para>On any system with multiple users, it is a good idea to enforce at least basic password security policies. Users should change their passwords regularly and use strong passwords that cannot easily be exploited. For local users, proceed as follows: <!--taroth
     080930: enable link when we have added comparable
     contents: For information about how to enforce stricter password rules, refer to <xref
     linkend="sec-yast-security-settings"/>.--></para>
                  <procedure>
                     <title>Configuring password settings</title>
                     <step>
                        <para>Open the YaST <guimenu>User and Group Administration</guimenu> dialog and select the <guimenu>Users</guimenu> tab.</para>
                     </step>
                     <step>
                        <para>Select user and click <guimenu>Edit</guimenu>.</para>
                     </step>
                     <step>
                        <para>Switch to the <guimenu>Password Settings</guimenu> tab. The user's last password change is displayed on the tab.</para>
                     </step>
                     <step>
                        <para>To make the user change their password at next login, activate <guimenu>Force Password Change</guimenu>.</para>
                     </step>
                     <step>
                        <para>To enforce password rotation, set a <guimenu>Maximum Number of Days for the Same Password</guimenu> and a <guimenu>Minimum Number of Days for the Same Password</guimenu>.</para>
                     </step>
                     <step>
                        <para>To remind the user to change their password before it expires, set the number of <guimenu>Days before Password Expiration to Issue Warning</guimenu>.</para>
                     </step>
                     <step>
                        <para>To restrict the period of time the user can log in after their password has expired, change the value in <guimenu>Days after Password Expires with Usable Login</guimenu>.</para>
                     </step>
                     <step>
                        <para>You can also specify a certain expiration date for the complete account. Enter the <guimenu>Expiration Date</guimenu> in <replaceable>YYYY-MM-DD</replaceable> format. This setting is not password-related but rather applies to the account itself.</para>
                     </step>
                     <step>
                        <para>For more information about options and default values, click <guimenu>Help</guimenu>.</para>
                     </step>
                     <step>
                        <para>Apply your changes with <guimenu>OK</guimenu>.</para>
                     </step>
                  </procedure>
               </sect2>
               <sect2 xml:id="sec-yast-userman-adv-quota">
                  <title>Managing quotas</title>
                  <para>To prevent system capacities from being exhausted without notification, system administrators can set up quotas for users or groups. Quotas can be defined for one or more file systems and restrict the amount of disk space that can be used and the number of inodes (index nodes) that can be created there. Inodes are data structures on a file system that store basic information about a regular file, directory or other file system object. They store all attributes of a file system object (like user and group ownership, read, write or execute permissions), except file name and contents.</para>
                  <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> allows usage of <literal>soft</literal> and <literal>hard</literal> quotas. Additionally, grace intervals can be defined that allow users or groups to temporarily exceed their quotas by certain amounts.</para>
                  <variablelist>
                     <varlistentry>
                        <term>Soft quota</term>
                        <listitem>
                           <para>Defines a warning level at which users are informed that they are nearing their limit. Administrators may urge the users to clean up and reduce their data on the partition. The soft quota limit is normally lower than the hard quota limit.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Hard quota</term>
                        <listitem>
                           <para>Defines the limit at which write requests are denied. When the hard quota is reached, no more data can be stored and applications may crash.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Grace period</term>
                        <listitem>
                           <para>Defines the time between the overflow of the soft quota and a warning being issued. Normally set to a rather low value of one or several hours.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <procedure>
                     <title>Enabling quota support for a partition</title>
                     <para>To configure quotas for certain users and groups, you need to enable quota support for the respective partition in the YaST Expert Partitioner first.</para>
                     <note>
                        <title>Quotas for Btrfs partitions</title>
                        <para><!-- <remark condition="clarity">
       2014-07-17 - fs: According to aschnell, Btrfs quotas are kaputt; this
       will eventually be fixed, so check for each SP if the following
       statement is still true
      </remark>--> Quotas for Btrfs partitions are handled differently. For more information, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Storage Administration Guide</quote>, </phrase><xref linkend="sec-filesystems-major-btrfs-quota" xrefstyle="%label &#34;%c&#34;"/>. <!--Quotas for Btrfs partitions are handled differently and cannot be
      enabled in the &yast; Expert Partitioner.--><remark>taroth 2014-06-04: todo - after btrfs quotas have been covered in the manuals (Storage Guide?), add link - taroth 2014-12-29: done</remark></para>
                     </note>
                     <step>
                        <para>In YaST, select <menuchoice><guimenu>System</guimenu><guimenu>Partitioner</guimenu></menuchoice> and click <guimenu>Yes</guimenu> to proceed.</para>
                     </step>
                     <step>
                        <para>In the <guimenu>Expert Partitioner</guimenu>, select the partition for which to enable quotas and click <guimenu>Edit</guimenu>.</para>
                     </step>
                     <step>
                        <para><!--<remark>taroth 2014-05-28: could not find the "Enable Quota Support"
      option for a btrfs file system - according to dsterba, this will work
      differently and there is not yast-part to it (yet), if any yast part will
      be done,  aschnell would be the right contact person to ask - according to
      jsuchome, the rest of the quota stuff is unchanged and should still work
      as described (could not test it because the default installation only comes with a
      btrfs partition)</remark>--> Click <guimenu>Fstab Options</guimenu> and activate <guimenu>Enable Quota Support</guimenu>. If the <systemitem>quota</systemitem> package is not already installed, it will be installed when you confirm the respective message with <guimenu>Yes</guimenu>.</para>
                     </step>
                     <step>
                        <para>Confirm your changes and leave the <guimenu>Expert Partitioner</guimenu>.</para>
                     </step>
                     <step>
                        <para>Make sure the service <systemitem class="service">quotaon</systemitem> is running by entering the following command:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> systemctl status quotaon.service</screen>
                        <para>It should be marked as being <literal>active</literal>. If this is not the case, start it with the command <command>systemctl start quotaon.service</command>.</para>
                     </step>
                  </procedure>
                  <procedure>
                     <title>Setting up quotas for users or groups</title>
                     <para>Now you can define soft or hard quotas for specific users or groups and set time periods as grace intervals.</para>
                     <step>
                        <para>In the YaST <guimenu>User and Group Administration</guimenu>, select the user or the group you want to set the quotas for and click <guimenu>Edit</guimenu>.</para>
                     </step>
                     <step>
                        <para>On the <guimenu>Plug-Ins</guimenu> tab, select the <guimenu>Manage User Quota</guimenu> entry and click <guimenu>Launch</guimenu> to open the <guimenu>Quota Configuration</guimenu> dialog.</para>
                     </step>
                     <step>
                        <para>From <guimenu>File System</guimenu>, select the partition to which the quota should apply.</para>
                        <informalfigure>
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/yast2_users_quota_qt.png" width="73%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/yast2_users_quota_qt.png" width="64%"/>
                              </imageobject>
                           </mediaobject>
                        </informalfigure>
                     </step>
                     <step>
                        <para>Below <guimenu>Size Limits</guimenu>, restrict the amount of disk space. Enter the number of 1 KB blocks the user or group may have on this partition. Specify a <guimenu>Soft Limit</guimenu> and a <guimenu>Hard Limit</guimenu> value.</para>
                     </step>
                     <step>
                        <para>Additionally, you can restrict the number of inodes the user or group may have on the partition. Below <guimenu>Inodes Limits</guimenu>, enter a <guimenu>Soft Limit</guimenu> and <guimenu>Hard Limit</guimenu>.</para>
                     </step>
                     <step>
                        <para>You can only define grace intervals if the user or group has already exceeded the soft limit specified for size or inodes. Otherwise, the time-related text boxes are not activated. Specify the time period for which the user or group is allowed to exceed the limits set above.</para>
                     </step>
                     <step>
                        <para>Confirm your settings with <guimenu>OK</guimenu>.</para>
                     </step>
                     <step>
                        <para>Click <guimenu>OK</guimenu> to close the administration dialog and save the changes.</para>
                        <para>Alternatively, to save all changes without exiting the <guimenu>User and Group Administration</guimenu> dialog, click <menuchoice><guimenu>Expert Options</guimenu><guimenu>Write Changes Now</guimenu></menuchoice>.</para>
                     </step>
                  </procedure>
                  <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> also ships command line tools like <literal>repquota</literal> or <literal>warnquota</literal>. System administrators can use these tools to control the disk usage or send e-mail notifications to users exceeding their quota. Using <command>quota_nld</command>, administrators can also forward kernel messages about exceeded quotas to D-BUS. For more information, refer to the <systemitem>repquota</systemitem>, the <systemitem>warnquota</systemitem> and the <command>quota_nld</command> man page. <!--taroth 2011-07-21: all of the above are included in quota.rpm--></para>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-yast-userman-defaults">
               <title>Changing default settings for local users</title>
               <para>When creating new local users, several default settings are used by YaST. These include, for example, the group the user belongs to, or the access permissions of the user's home directory. You can change these default settings to meet your requirements:</para>
               <procedure>
                  <step>
                     <para>Open the YaST <guimenu>User and Group Administration</guimenu> dialog and select the <guimenu>Defaults for New Users</guimenu> tab.</para>
                  </step>
                  <step>
                     <para>To change the group the new users should automatically belong to, select another group from <guimenu>Default Group</guimenu>.</para>
                  </step>
                  <step>
                     <para>If you do not want to use <filename>/home/<replaceable>USERNAME</replaceable></filename> as the default path for new users' home directories, modify the <guimenu>Path Prefix for Home Directory</guimenu>.</para>
                  </step>
                  <step>
                     <para>To change the default permission modes for newly created home directories, adjust the umask value in <guimenu>Umask for Home Directory</guimenu>. For more information about umask, refer to <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="cha-security-acls" xrefstyle="%label &#34;%c&#34;"/> and to the <command>umask</command> man page.</para>
                  </step>
                  <step>
                     <para>For information about the individual options, click <guimenu>Help</guimenu>.</para>
                  </step>
                  <step>
                     <para>Apply your changes with <guimenu>OK</guimenu>.</para>
                  </step>
               </procedure>
            </sect1>
            <sect1 xml:id="sec-yast-userman-assign">
               <title>Assigning users to groups</title>
               <para>Local users are assigned to several groups according to the default settings, which you can access from the <guimenu>User and Group Administration</guimenu> dialog on the <guimenu>Defaults for New Users</guimenu> tab. In the following, learn how to modify an individual user's group assignment. If you need to change the default group assignments for new users, refer to <xref linkend="sec-yast-userman-defaults"/>.</para>
               <procedure>
                  <title>Changing a user's group assignment</title>
                  <step>
                     <para>Open the YaST <guimenu>User and Group Administration</guimenu> dialog and click the <guimenu>Users</guimenu> tab. It lists users and the groups the users belong to.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>Edit</guimenu> and switch to the <guimenu>Details</guimenu> tab.</para>
                  </step>
                  <step>
                     <para>To change the group the user belongs to, click <guimenu>Default Group</guimenu> and select the group from the list.</para>
                  </step>
                  <step>
                     <para>To assign the user additional secondary groups, activate the corresponding check boxes in the <guimenu>Additional Groups</guimenu> list.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>OK</guimenu> to apply your changes.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>OK</guimenu> to close the administration dialog and save the changes.</para>
                     <para>Alternatively, to save all changes without exiting the <guimenu>User and Group Administration</guimenu> dialog, click <menuchoice><guimenu>Expert Options</guimenu><guimenu>Write Changes Now</guimenu></menuchoice>.</para>
                  </step>
               </procedure>
            </sect1>
            <sect1 xml:id="sec-yast-userman-groups">
               <title>Managing groups</title>
               <para>With YaST you can also easily add, modify or delete groups.</para>
               <procedure>
                  <title>Creating and modifying groups</title>
                  <step>
                     <para>Open the YaST <guimenu>User and Group Management</guimenu> dialog and click the <guimenu>Groups</guimenu> tab.</para>
                  </step>
                  <step>
                     <para>With <guimenu>Set Filter</guimenu> define the set of groups you want to manage. The dialog lists groups in the system.</para>
                  </step>
                  <step>
                     <para>To create a new group, click <guimenu>Add</guimenu>.</para>
                  </step>
                  <step>
                     <para>To modify an existing group, select the group and click <guimenu>Edit</guimenu>.</para>
                  </step>
                  <step>
                     <para>In the following dialog, enter or change the data. The list on the right shows an overview of all available users and system users which can be members of the group.</para>
                     <informalfigure>
                        <mediaobject>
                           <imageobject outputformat="print">
                              <imagedata fileref="media/yast2_groups_edit_qt.png" width="73%"/>
                           </imageobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/yast2_groups_edit_qt.png" width="69%"/>
                           </imageobject>
                        </mediaobject>
                     </informalfigure>
                  </step>
                  <step>
                     <para>To add existing users to a new group select them from the list of possible <guimenu>Group Members</guimenu> by checking the corresponding box. To remove them from the group deactivate the box.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>OK</guimenu> to apply your changes.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>OK</guimenu> to close the administration dialog and save the changes.</para>
                     <para>Alternatively, to save all changes without exiting the <guimenu>User and Group Administration</guimenu> dialog, click <menuchoice><guimenu>Expert Options</guimenu><guimenu>Write Changes Now</guimenu></menuchoice>.</para>
                  </step>
               </procedure>
               <para>To delete a group, it must not contain any group members. To delete a group, select it from the list and click <guimenu>Delete</guimenu>. Click <guimenu>OK</guimenu> to close the administration dialog and save the changes. Alternatively, to save all changes without exiting the <guimenu>User and Group Administration</guimenu> dialog, click <menuchoice><guimenu>Expert Options</guimenu><guimenu>Write Changes Now</guimenu></menuchoice>.</para>
            </sect1>
            <sect1 xml:id="sec-yast-userman-authent">
               <title>Changing the user authentication method</title>
               <para>When your machine is connected to a network, you can change the authentication method. The following options are available:</para>
               <variablelist>
                  <varlistentry>
                     <term>NIS</term>
                     <listitem>
                        <para>Users are administered centrally on a NIS server for all systems in the network. For details, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="cha-nis" xrefstyle="%label &#34;%c&#34;"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>SSSD</term>
                     <listitem>
                        <para>The <emphasis>System Security Services Daemon</emphasis> (SSSD) can locally cache user data and then allow users to use the data, even if the real directory service is (temporarily) unreachable. For details, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="sec-security-auth-sssd" xrefstyle="%label &#34;%c&#34;"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Samba</term>
                     <listitem>
                        <para>SMB authentication is often used in mixed Linux and Windows networks. For details, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Storage Administration Guide</quote>, </phrase><xref linkend="cha-samba" xrefstyle="%label &#34;%c&#34;"/> .</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>To change the authentication method, proceed as follows:</para>
               <procedure>
                  <step>
                     <para>Open the <guimenu>User and Group Administration</guimenu> dialog in YaST.</para>
                  </step>
                  <step>
                     <para>Click the <guimenu>Authentication Settings</guimenu> tab to show an overview of the available authentication methods and the current settings.</para>
                  </step>
                  <step>
                     <para>To change the authentication method, click <guimenu>Configure</guimenu> and select the authentication method you want to modify. This takes you directly to the client configuration modules in YaST. For information about the configuration of the appropriate client, refer to the following sections:</para>
                     <formalpara>
                        <title>NIS:</title>
                        <para><phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="sec-nis-client" xrefstyle="%label &#34;%c&#34;"/></para>
                     </formalpara>
                     <formalpara>
                        <title>LDAP:</title>
                        <para><phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="sec-security-auth-yast-client" xrefstyle="%label &#34;%c&#34;"/></para>
                     </formalpara>
                     <formalpara>
                        <title>Samba:</title>
                        <para><phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Storage Administration Guide</quote>, </phrase><xref linkend="sec-samba-client-inst-yast" xrefstyle="%label &#34;%c&#34;"/></para>
                     </formalpara>
                     <formalpara>
                        <title>SSSD:</title>
                        <para><phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="sec-security-auth-sssd" xrefstyle="%label &#34;%c&#34;"/></para>
                     </formalpara>
                  </step>
                  <step>
                     <para>After accepting the configuration, return to the <guimenu>User and Group Administration</guimenu> overview.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>OK</guimenu> to close the administration dialog.</para>
                  </step>
               </procedure>
            </sect1>
            <sect1 xml:id="sec-yast-userman-defaultsystemusers">
               <title>Default system users</title>
               <para>By default, <phrase role="productname">SUSE Linux Enterprise Server</phrase> creates user names, which cannot be deleted. These users are typically defined in the Linux Standard Base (see <link xlink:href="https://refspecs.linuxfoundation.org/lsb.shtml"/>). The following list provides the common user names and their purpose:</para>
               <!-- Add new entries in alphabetical order -->
               <variablelist>
                  <title>Common user names installed by default</title>
                  <varlistentry>
                     <term>
                        <systemitem class="username">bin</systemitem>
                     </term>
                     <term>
                        <systemitem class="username">daemon</systemitem>
                     </term>
                     <listitem>
                        <para>Legacy user, included for compatibility with legacy applications. New applications should no longer use this user name.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">gdm</systemitem>
                     </term>
                     <listitem><!-- package: gdm -->
                        <para>Used by GNOME Display Manager (GDM) to provide graphical logins and manage local and remote displays.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">lp</systemitem>
                     </term>
                     <listitem><!-- package: cups -->
                        <para>Used by the Printer daemon for Common Unix Printing System (CUPS).</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">mail</systemitem>
                     </term>
                     <listitem>
                        <para>User reserved for mailer programs like <command>sendmail</command> or <command>postfix</command>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">man</systemitem>
                     </term>
                     <listitem><!-- package:  -->
                        <para>Used by man to access man pages.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">messagebus</systemitem>
                     </term>
                     <listitem><!-- package: dbus-1 -->
                        <para>Used to access D-Bus (desktop bus), a software bus for inter-process communication. Daemon is <systemitem class="daemon">dbus-daemon</systemitem>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">nobody</systemitem>
                     </term>
                     <listitem>
                        <para>User that owns no files and is in no privileged groups. Nowadays, its use is limited as it is recommended by Linux Standard Base to provide a separate user account for each daemon.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">nscd</systemitem>
                     </term>
                     <listitem><!-- package: nscd -->
                        <para>Used by the Name Service Caching Daemon. This daemon is a lookup service to improve performance with NIS and LDAP. Daemon is <systemitem class="daemon">nscd</systemitem>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">polkitd</systemitem>
                     </term>
                     <listitem><!-- package: polkit -->
                        <para>Used by the PolicyKit Authorization Framework, which defines and handles authorization requests for unprivileged processes. Daemon is <systemitem class="daemon">polkitd</systemitem>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">postfix</systemitem>
                     </term>
                     <listitem><!-- package: postfix -->
                        <para>Used by the Postfix mailer.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">pulse</systemitem>
                     </term>
                     <listitem><!-- package: pulseaudio -->
                        <para>Used by the Pulseaudio sound server.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">root</systemitem>
                     </term>
                     <listitem>
                        <para>Used by the system administrator, providing all appropriate privileges.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">rpc</systemitem>
                     </term>
                     <listitem><!-- package: rpcbind -->
                        <para>Used by the <command>rpcbind</command> command, an RPC port mapper.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">rtkit</systemitem>
                     </term>
                     <listitem><!-- package: rtkit -->
                        <para>Used by the <package>rtkit</package> package providing a D-Bus system service for real time scheduling mode.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">salt</systemitem>
                     </term>
                     <listitem><!-- package: salt -->
                        <para>User for parallel remote execution provided by Salt. Daemon is named <systemitem class="daemon">salt-master</systemitem>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">scard</systemitem>
                     </term>
                     <listitem><!-- package: pcsc-lite -->
                        <para>User for communication with smart cards and readers. Daemon is named <systemitem class="daemon">pcscd</systemitem>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">srvGeoClue</systemitem>
                     </term>
                     <listitem><!-- package: system-user-srvGeoClue -->
                        <para>Used by the GeoClue D-Bus service to provide location information.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">sshd</systemitem>
                     </term>
                     <listitem><!-- package: openssh -->
                        <para>Used by the Secure Shell daemon (SSH) to ensure secured and encrypted communication over an insecure network.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">statd</systemitem>
                     </term>
                     <listitem><!-- package: nfs-client -->
                        <para>Used by the Network Status Monitor protocol (NSM), implemented in the <systemitem class="daemon">rpc.statd</systemitem> daemon, to listen for reboot notifications.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">systemd-coredump</systemitem>
                     </term>
                     <listitem><!-- package: systemd -->
                        <para>Used by the <command>/usr/lib/systemd/systemd-coredump</command> command to acquire, save and process core dumps.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="username">systemd-timesync</systemitem>
                     </term>
                     <listitem><!-- package: systemd -->
                        <para>Used by the <command>/usr/lib/systemd/systemd-timesyncd</command> command to synchronize the local system clock with a remote Network Time Protocol (NTP) server.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="default-system-groups">
               <title>Default system groups</title>
               <para>By default, SLE creates multiple user groups that are used by system services. The following list describes examples of required and common optional groups.</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">root</systemitem>
                     </term>
                     <listitem>
                        <para>Administrative group with all privileges.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">bin</systemitem>
                     </term>
                     <listitem>
                        <para>Included for compatibility with legacy applications. New applications should not use this group.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">daemon</systemitem>
                     </term>
                     <listitem>
                        <para>Previously used to limit daemons' access to the system. Daemons should run under their own UID/GID now to separate daemons from one another.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">audio</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for audio devices.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">gdm</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for the GNOME Display Manager.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">chrony</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for the time synchronization service.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">kvm</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for the QEMU machine emulator toolkit.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">libvirt</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for virtualization stack.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">lp</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for printer operation.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">mail</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for mail services.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">man</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges specific to manual pages and the <command>man</command> command.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <systemitem class="groupname">sshd</systemitem>
                     </term>
                     <listitem>
                        <para>Privileges for SSH communication protocol daemon.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-onlineupdate-you"><?file yast2_you.xml?>
            <title>YaST online update</title>
            <info/>
            <para>SUSE offers a continuous stream of software security updates for your product. By default, the update applet is used to keep your system up to date. Refer to <xref linkend="sec-updater"/> for further information on the update applet. This chapter covers the alternative tool for updating software packages: YaST Online Update.</para>
            <para>The current patches for <phrase role="productname">SUSE® Linux Enterprise Server</phrase> are available from an update software repository. If you have registered your product during the installation, an update repository is already configured. If you have not registered <phrase role="productname">SUSE Linux Enterprise Server</phrase>, you can do so by starting the <guimenu>Product Registration</guimenu> in YaST. Alternatively, you can manually add an update repository from a source you trust. To add or remove repositories, start the Repository Manager with <menuchoice><guimenu>Software</guimenu><guimenu>Software Repositories</guimenu></menuchoice> in YaST. Learn more about the Repository Manager in <xref linkend="sec-yast-software-instsource"/>.</para>
            <note>
               <title>Error on accessing the update catalog</title>
               <para>If you are not able to access the update catalog, this may happen because of an expired subscription. Normally, <phrase role="productname">SUSE Linux Enterprise Server</phrase> comes with a one-year or three-year subscription, during which you have access to the update catalog. This access will be denied after the subscription ends.</para>
               <para>If an access to the update catalog is denied, you can see a warning message prompting you to visit the SUSE Customer Center and check your subscription. The SUSE Customer Center is available at <link xlink:href="https://scc.suse.com//"/>.</para>
            </note>
            <note>
               <title>Firewall settings for receiving updates</title>
               <para>If your system is behind a firewall that blocks outgoing traffic, make sure to allow connections to <uri>https://scc.suse.com/</uri> and <uri>https://updates.suse.com</uri> on ports 80 and 443 in order to receive updates. For more information, such as IP addresses and proxy server configuration, refer to <link xlink:href="https://www.suse.com/support/kb/doc/?id=000021034"/>.</para>
            </note>
            <para>SUSE provides updates with different relevance levels:</para>
            <variablelist>
               <varlistentry>
                  <term>Security updates</term>
                  <listitem>
                     <para>Fix severe security hazards and should always be installed.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Recommended updates</term>
                  <listitem>
                     <para>Fix issues that could compromise your computer.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Optional updates</term>
                  <listitem>
                     <para>Fix non-security relevant issues or provide enhancements.</para>
                  </listitem>
               </varlistentry>
            </variablelist>
            <sect1 xml:id="sec-onlineupdate-you-overview">
               <title>The online update dialog</title>
               <para>To open the YaST <guimenu>Online Update</guimenu> dialog, start YaST and select <menuchoice><guimenu>Software</guimenu><guimenu>Online Update</guimenu></menuchoice>. Alternatively, start it from the command line with <command>yast2 online_update</command>.</para>
               <para>The <guimenu>Online Update</guimenu> window consists of four sections.</para>
               <figure>
                  <title>YaST online update</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/yast2_you.png" width="69%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/yast2_you.png" width="69%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
               <para>The <guimenu>Summary</guimenu> section on the left lists the available patches for <phrase role="productname">SUSE Linux Enterprise Server</phrase>. The patches are sorted by security relevance: <literal>security</literal>, <literal>recommended</literal>, and <literal>optional</literal>. You can change the view of the <guimenu>Summary</guimenu> section by selecting one of the following options from <guimenu>Show Patch Category</guimenu>:</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <guimenu>Needed patches</guimenu> (default view)</term>
                     <listitem>
                        <para>Non-installed patches that apply to packages installed on your system.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <guimenu>Unneeded patches</guimenu>
                     </term>
                     <listitem>
                        <para>Patches that either apply to packages not installed on your system, or patches that have requirements which have already have been fulfilled (because the relevant packages have already been updated from another source).</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <guimenu>All patches</guimenu>
                     </term>
                     <listitem>
                        <para>All patches available for <phrase role="productname">SUSE Linux Enterprise Server</phrase>.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>Each list entry in the <guimenu>Summary</guimenu> section consists of a symbol and the patch name. For an overview of the possible symbols and their meaning, press <keycombo><keycap function="shift"/><keycap>F1</keycap></keycombo>. Actions required by <literal>Security</literal> and <literal>Recommended</literal> patches are automatically preset. These actions are <guimenu>Autoinstall</guimenu>, <guimenu>Autoupdate</guimenu> and <guimenu>Autodelete</guimenu>.</para>
               <para>If you install an up-to-date package from a repository other than the update repository, the requirements of a patch for this package may be fulfilled with this installation. In this case, a check mark is displayed in front of the patch summary. The patch is visible in the list until you mark it for installation. This does not install the patch (because the package already is up to date), but mark the patch as having been installed.</para>
               <para>Select an entry in the <guimenu>Summary</guimenu> section to view a short <guimenu>Patch Description</guimenu> at the bottom left corner of the dialog. The upper right section lists the packages included in the selected patch (a patch can consist of several packages). Click an entry in the upper right section to view details about the respective package that is included in the patch.</para>
            </sect1>
            <sect1 xml:id="sec-onlineupdate-you-install">
               <title>Installing patches</title>
               <para>The YaST Online Update dialog allows you to either install all available patches at once or manually select the desired patches. You may also revert patches that have been applied to the system.</para>
               <para>By default, all new patches (except <literal>optional</literal> ones) that are currently available for your system are already marked for installation. They will be applied automatically once you click <guimenu>Accept</guimenu> or <guimenu>Apply</guimenu>. <!--taroth 2014-05-27:  http://fate.suse.com/312509--> If one or multiple patches require a system reboot, you will be notified about this before the patch installation starts. You can then either decide to continue with the installation of the selected patches, skip the installation of all patches that need rebooting and install the rest, or go back to the manual patch selection.</para>
               <procedure>
                  <title>Applying patches with YaST online update</title>
                  <step>
                     <para>Start YaST and select <menuchoice><guimenu>Software</guimenu><guimenu>Online Update</guimenu></menuchoice>.</para>
                  </step>
                  <step>
                     <para>To automatically apply all new patches (except <literal>optional</literal> ones) that are currently available for your system, click <guimenu>Apply</guimenu> or <guimenu>Accept</guimenu>.</para>
                  </step>
                  <step>
                     <para>First modify the selection of patches that you want to apply:</para>
                     <substeps performance="required">
                        <step>
                           <para>Use the respective filters and views that the interface provides. For details, refer to <xref linkend="sec-onlineupdate-you-overview"/>.</para>
                        </step>
                        <step>
                           <para>Select or deselect patches according to your needs and wishes by right-clicking the patch and choosing the respective action from the context menu.</para>
                           <important>
                              <title>Always apply security updates</title>
                              <para>Do not deselect any <literal>security</literal>-related patches without a good reason. These patches fix severe security hazards and prevent your system from being exploited.</para>
                           </important>
                        </step>
                        <step>
                           <para>Most patches include updates for several packages. To change actions for single packages, right-click a package in the package view and choose an action.</para>
                        </step>
                        <step>
                           <para>To confirm your selection and apply the selected patches, proceed with <guimenu>Apply</guimenu> or <guimenu>Accept</guimenu>.</para>
                        </step>
                     </substeps>
                  </step>
                  <step>
                     <para>After the installation is complete, click <guimenu>Finish</guimenu> to leave the YaST <guimenu>Online Update</guimenu>. Your system is now up to date.</para>
                  </step>
               </procedure>
            </sect1>
            <sect1 xml:id="sec-onlineupdate-retracted-patches">
               <title>Viewing retracted patches</title>
               <para>Maintenance updates are carefully tested to minimize the risk of introducing a bug. If a patch proves to contain a bug, it is automatically retracted. A new update (with a higher version number) is issued to revert the buggy patch, and is blocked from being installed again. You can see retracted patches, and their history, on the <guimenu>Package Classification</guimenu> tab.</para>
               <figure>
                  <title>Viewing retracted patches and history</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/yast2_retracted_patches.png" width="69%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/yast2_retracted_patches.png" width="69%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
            </sect1>
            <sect1 xml:id="sec-onlineupdate-you-automatically">
               <title>Automatic online update</title>
               <para>You may configure automatic updates with a daily, weekly or monthly schedule with YaST. Install the <systemitem class="resource">yast2-online-update-configuration</systemitem> package.</para>
               <para>By default, updates are downloaded as delta RPMs. Since rebuilding RPM packages from delta RPMs is a memory- and processor-intensive task, certain setups or hardware configurations may require you to disable the use of delta RPMs for the sake of performance.</para>
               <para>Certain patches, such as kernel updates or packages requiring license agreements, require user interaction, which would cause the automatic update procedure to stop. You can configure skipping patches that require user interaction.</para>
               <para>Use the <guimenu>Patches</guimenu> tab in the YaST <guimenu>Software</guimenu> module to review available and installed patches, including references to bug reports and CVE bulletins.</para>
               <procedure>
                  <title>Configuring the automatic online update</title>
                  <step>
                     <para>After installation, start YaST and select <menuchoice><guimenu>Software</guimenu><guimenu>Online Update</guimenu></menuchoice>. Choose <menuchoice><guimenu>Configuration</guimenu><guimenu>Online Update</guimenu></menuchoice>. If the <package>yast2-online-update-configuration</package> is not installed, you will be prompted to do that.</para>
                     <figure>
                        <title>YaST online update configuration</title>
                        <mediaobject>
                           <imageobject outputformat="print">
                              <imagedata fileref="media/yast2_autoupdate.png" width="69%"/>
                           </imageobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/yast2_autoupdate.png" width="69%"/>
                           </imageobject>
                        </mediaobject>
                     </figure>
                     <para>Alternatively, start the module with <command>yast2 online_update_configuration</command> from the command line.</para>
                  </step>
                  <step>
                     <para>Choose the update interval: <guimenu>Daily</guimenu>, <guimenu>Weekly</guimenu>, or <guimenu>Monthly</guimenu>.</para>
                  </step>
                  <step>
                     <para>Sometimes patches may require the attention of the administrator, for example when restarting critical services. For example, this might be an update for Docker Open Source Engine that requires all containers to be restarted. Before these patches are installed, the user is informed about the consequences and is asked to confirm the installation of the patch. Such patches are called <quote>Interactive Patches</quote>.</para>
                     <para>When installing patches automatically, it is assumed that you have accepted the installation of interactive patches. If you prefer to review these patches before they get installed, check <guimenu>Skip Interactive Patches</guimenu>. In this case, interactive patches will be skipped during automated patching. Make sure to periodically run a manual online update, to check whether interactive patches are waiting to be installed.</para>
                  </step>
                  <step>
                     <para>To automatically accept any license agreements, activate <guimenu>Agree with Licenses</guimenu>.</para>
                  </step>
                  <step>
                     <para>To automatically install all packages recommended by updated packages, activate <guimenu>Include Recommended Packages</guimenu>.</para>
                  </step>
                  <!--taroth 2014-05-27: http://fate.suse.com/314867-->
                  <step>
                     <para>To disable the use of delta RPMs (for performance reasons), un-check <guimenu>Use Delta RPMs</guimenu>.</para>
                  </step>
                  <step>
                     <para>To filter the patches by category (such as security or recommended), check <guimenu>Filter by Category</guimenu> and add the appropriate patch categories from the list. Only patches of the selected categories will be installed. It is a good practice to enable only automatic <guimenu>Security</guimenu> updates, and to manually review all others. Patching is normally reliable, but you may wish to test non-security patches, and roll them back if you encounter any problems.</para>
                     <itemizedlist>
                        <listitem>
                           <para><guimenu>Packagemanager and YaST</guimenu> supply patches for package management and YaST features and modules.</para>
                        </listitem>
                        <listitem>
                           <para><guimenu>Security</guimenu> patches provide crucial updates and bugfixes.</para>
                        </listitem>
                        <listitem>
                           <para><guimenu>Recommended</guimenu> patches are optional bugfixes and enhancements.</para>
                        </listitem>
                        <listitem>
                           <para><guimenu>Optional</guimenu> are new packages.</para>
                        </listitem>
                        <listitem>
                           <para><guimenu>Other</guimenu> is equivalent to miscellaneous.</para>
                        </listitem>
                        <listitem>
                           <para><guimenu>Document</guimenu> is unused.</para>
                        </listitem>
                     </itemizedlist>
                  </step>
                  <step>
                     <para>Confirm your configuration by clicking <guimenu>OK</guimenu>.</para>
                  </step>
               </procedure>
               <para>The automatic online update does not automatically restart the system afterward. If there are package updates that require a system reboot, you need to do this manually.</para>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-yast-software"><?file yast2_sw.xml?>
            <title>Installing or removing software</title>
            <info>
               <abstract>
                  <para>Using YaST's software management module, you can search for software packages as well as install and remove them. When installing packages, YaST automatically resolves all dependencies. To install packages that are not on the installation medium, you can add software repositories and YaST to manage them. You can also keep your system up to date by managing software updates using the update applet.</para>
               </abstract>
            </info>
            <para>The YaST Software Manager makes it possible to manage software sources on your system. There are two versions of this YaST module: a graphical version for X Window and a text-based version to use with the command line. The graphical flavor is described below—for details on the text-based YaST, see <xref linkend="cha-yast-text"/>.</para>
            <note>
               <title>Confirmation and review of changes</title>
               <para>When installing, updating or removing packages, any changes in the Software Manager are only applied after clicking <guimenu>Accept</guimenu> or <guimenu>Apply</guimenu>. YaST maintains a list with all actions, allowing you to review and modify your changes before applying them to the system.</para>
            </note>
            <sect1 xml:id="sec-onlineupdate-terms">
               <title>Definition of terms</title>
               <para>The following terms are important for understanding installing and removing software in <phrase role="productname">SUSE Linux Enterprise Server</phrase>.</para>
               <variablelist>
                  <varlistentry>
                     <term>Repository</term>
                     <listitem>
                        <para>A local or remote directory containing packages, plus additional information about these packages (package metadata).</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>(Repository) alias/repository name</term>
                     <listitem>
                        <para>A short name for a repository (called <literal>Alias</literal> within Zypper and <guimenu>Repository Name</guimenu> within YaST). It can be chosen by the user when adding a repository and must be unique.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Repository description files</term>
                     <listitem>
                        <para>Each repository provides files describing content of the repository (package names, versions, etc.). These repository description files are downloaded to a local cache that is used by YaST.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Product</term>
                     <listitem>
                        <para>Represents a whole product, for example, <phrase role="productname">SUSE® Linux Enterprise Server</phrase>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Pattern</term>
                     <listitem>
                        <para>A pattern is an installable group of packages dedicated to a certain purpose. For example, the <systemitem>Laptop</systemitem> pattern contains all packages that are needed in a mobile computing environment. Patterns define package dependencies (such as required or recommended packages) and come with a preselection of packages marked for installation. This ensures that the most important packages needed for a certain purpose are available on your system after installation of the pattern. If necessary, you can manually select or deselect packages within a pattern.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Package</term>
                     <listitem>
                        <para>A package is a compressed file in <literal>rpm</literal> format that contains the files for a particular program.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry xml:id="vle-patch">
                     <term>Patch</term>
                     <listitem>
                        <para>A fix or compilation of fixes released by SUSE to correct operation defects (program bugs) in SUSE products. A patch can contain one or multiple files to replace or enhance existing executables, programs, applications or documents.</para>
                        <para>A patch consists of one or more packages and may be applied by delta RPMs. It may also introduce dependencies to packages that are not installed yet.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Resolvable</term>
                     <listitem>
                        <para>A generic term for product, pattern, package or patch. The most commonly used type of resolvable is a package or a patch.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Delta RPM</term>
                     <listitem>
                        <para>A delta RPM consists only of the binary diff between two defined versions of a package, and therefore has the smallest download size. Before being installed, the full RPM package is rebuilt on the local machine.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Package dependencies</term>
                     <listitem>
                        <para>Certain packages are dependent on other packages, such as shared libraries. In other terms, a package may <literal>require</literal> other packages—if the required packages are not available, the package cannot be installed. Besides dependencies (package requirements) that must be fulfilled, certain packages <literal>recommend</literal> other packages. These recommended packages are only installed if they are available, otherwise they are ignored and the package recommending them is installed nevertheless.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="sec-yast-software-register">
               <title>Registering an installed system</title>
               <para>If you skip registration during installation, or you want to re-register your system, you can register the system at any time. Use the YaST module <emphasis>Product Registration</emphasis> or the command line tool <command>SUSEConnect</command>.</para>
               <sect2 xml:id="sec-yast-software-register-yast">
                  <title>Registering with YaST</title>
                  <para>To register the system, start YaST and switch to <guimenu>Software</guimenu>, then <guimenu>Product Registration</guimenu>.</para>
                  <para>By default the system is registered with the SUSE Customer Center. If your organization provides local registration servers, you can either choose one from the list of auto-detected servers or provide the URL manually.</para>
               </sect2>
               <sect2 xml:id="sec-yast-software-register-suseconnect">
                  <title>Registering with SUSEConnect</title>
                  <para>To register from the command line, use the command</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command><command>SUSEConnect -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable></command></screen>
                  <para>Replace <replaceable>REGISTRATION_CODE</replaceable> with the registration code you received with your copy of <phrase role="productname">SUSE Linux Enterprise Server</phrase>. Replace <replaceable>EMAIL_ADDRESS</replaceable> with the e-mail address associated with the SUSE account you or your organization uses to manage subscriptions.</para>
                  <para>To register with a local registration server, also provide the URL to the server:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command><command>SUSEConnect -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable> --url "<replaceable>URL</replaceable>"</command></screen>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-yast-software-qt">
               <title>Using the YaST software manager</title>
               <para>Start the software manager from the <guimenu>YaST Control Center</guimenu> by choosing <menuchoice><guimenu>Software</guimenu><guimenu>Software Management</guimenu></menuchoice>.</para>
               <informalfigure>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/yast2_sw_manager.png" width="64%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/yast2_sw_manager.png" width="59%"/>
                     </imageobject>
                  </mediaobject>
               </informalfigure>
               <sect2 xml:id="sec-yast-software-search">
                  <title>Searching software</title>
                  <para>The YaST software manager can install packages or patterns from all currently enabled repositories. It offers different views and filters to make it easier to find the software you are searching for. The <guimenu>Search</guimenu> view is the default view of the window. To change view, click <guimenu>View</guimenu> and select one of the following entries from the drop-down box. The selected view opens in a new tab.</para>
                  <variablelist>
                     <title>Views for searching packages or patterns</title>
                     <varlistentry>
                        <term>
                           <guimenu>Patterns</guimenu>
                        </term>
                        <listitem>
                           <para>Lists all patterns available for installation on your system.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Package Groups</guimenu>
                        </term>
                        <listitem>
                           <para>Lists all packages sorted by groups such as <guimenu>Graphics</guimenu>, <guimenu>Programming</guimenu>, or <guimenu>Security</guimenu>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Languages</guimenu>
                        </term>
                        <listitem>
                           <para>A filter to list all packages needed to add a new system language.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Repositories</guimenu>
                        </term>
                        <listitem>
                           <para>A filter to list packages by repository. To select more than one repository, hold the <keycap function="control"/> key while clicking repository names. The <quote>pseudo repository</quote><guimenu>@System</guimenu> lists all packages currently installed.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Services</guimenu>
                        </term>
                        <listitem>
                           <para>Shows which packages belong to a certain module or extension. Select an entry (for example, <literal>Basesystem</literal> or <literal>High Availability</literal>) to display a list of packages that belong to this module or extension.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Search</guimenu>
                        </term>
                        <listitem>
                           <para>Lets you search for a package according to certain criteria. Enter a search term and press <keycap function="enter"/>. Refine your search by specifying where to <guimenu>Search In</guimenu> and by changing the <guimenu>Search Mode</guimenu>. For example, if you do not know the package name but only the name of the application that you are searching for, try including the package <guimenu>Description</guimenu> in the search process.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Installation Summary</guimenu>
                        </term>
                        <listitem>
                           <para>If you have already selected packages for installation, update or removal, this view shows the changes that will be applied to your system when you click <guimenu>Accept</guimenu>. To filter for packages with a certain status in this view, activate or deactivate the respective check boxes. Press <keycombo><keycap function="shift"/><keycap>F1</keycap></keycombo> for details on the status flags.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <tip>
                     <title>Finding packages not belonging to an active repository</title>
                     <para>To list all packages that do not belong to an active repository, choose <menuchoice><guimenu>View</guimenu><guimenu>Repositories</guimenu><guimenu>@System</guimenu></menuchoice> and then choose <menuchoice><guimenu>Secondary Filter</guimenu><guimenu>Unmaintained Packages</guimenu></menuchoice>. This is useful, for example, if you have deleted a repository and want to make sure no packages from that repository remain installed.</para>
                  </tip>
                  <tip xml:id="tip-yast-software-search-online">
                     <title>Searching software online</title>
                     <para>The online search feature allows searching for packages across all registered and unregistered modules and extensions.</para>
                     <procedure>
                        <title>Searching software online</title>
                        <para>To search for software packages online, perform the following steps:</para>
                        <step>
                           <para>Open the online search window with <menuchoice><guimenu>Extras</guimenu><guimenu>Search Online</guimenu></menuchoice>.</para>
                        </step>
                        <step>
                           <para>Enter a <guimenu>Package Name</guimenu> and press <keycap function="enter"/> or click <guimenu>Search</guimenu>. YaST contacts the SUSE Customer Center and shows the results in a table, including the module or extension of each package. Select a package to see additional details.</para>
                        </step>
                        <step>
                           <para>Select one or more packages for installation by clicking the corresponding table row and <guimenu>Toggle Selection</guimenu>. Alternatively, you can double-click a row. If the package belongs to an unregistered module or extension, YaST asks for confirmation to register it.</para>
                        </step>
                        <step>
                           <para>Click <guimenu>Next</guimenu>, review the changes, and install the packages.</para>
                        </step>
                     </procedure>
                  </tip>
               </sect2>
               <sect2 xml:id="sec-yast-software-install">
                  <title>Installing and removing packages or patterns</title>
                  <para>Certain packages are dependent on other packages, such as shared libraries. Several packages cannot coexist with others on the system. If possible, YaST automatically resolves these dependencies or conflicts. If your choice results in a dependency conflict that cannot be automatically solved, you need to solve it manually as described in <xref linkend="sec-yast-software-dependencies"/>.</para>
                  <note>
                     <title>Removal of packages</title>
                     <para>When removing any packages, by default YaST only removes the selected packages. If you want YaST to also remove any other packages that become unneeded after removal of the specified package, select <menuchoice><guimenu>Options</guimenu><guimenu>Cleanup when deleting packages</guimenu></menuchoice> from the main menu.</para>
                  </note>
                  <procedure>
                     <step>
                        <para>Search for packages as described in <xref linkend="sec-yast-software-search"/>.</para>
                     </step>
                     <step>
                        <para>The packages found are listed in the right pane. To install a package or remove it, right-click it and choose <guimenu>Install</guimenu> or <guimenu>Delete</guimenu>. If the relevant option is not available, check the package status indicated by the symbol in front of the package name—press <keycombo><keycap function="shift"/><keycap>F1</keycap></keycombo> for help.</para>
                        <tip>
                           <title>Applying an action to all packages listed</title>
                           <para>To apply an action to all packages listed in the right pane, go to the main menu and choose an action from <menuchoice><guimenu>Package</guimenu><guimenu>All in This List</guimenu></menuchoice>.</para>
                        </tip>
                     </step>
                     <step>
                        <para>To install a pattern, right-click the pattern name and choose <guimenu>Install</guimenu>.</para>
                     </step>
                     <step>
                        <para>It is not possible to remove a pattern. Instead, select the packages for the pattern you want to remove and mark them for removal.</para>
                     </step>
                     <step>
                        <para>To select more packages, repeat the steps mentioned above.</para>
                     </step>
                     <step>
                        <para>Before applying your changes, you can review or modify them by clicking <menuchoice><guimenu>View</guimenu><guimenu>Installation Summary</guimenu></menuchoice>. By default, all packages that will change status are listed.</para>
                     </step>
                     <step>
                        <para>To revert the status for a package, right-click the package and select one of the following entries: <guimenu>Keep</guimenu> if the package was scheduled to be deleted or updated, or <guimenu>Do Not Install</guimenu> if it was scheduled for installation. To abandon all changes and quit the Software Manager, click <guimenu>Cancel</guimenu> and <guimenu>Abandon</guimenu>.</para>
                     </step>
                     <step>
                        <para>When you are finished, click <guimenu>Accept</guimenu> to apply your changes.</para>
                     </step>
                     <step>
                        <para>If YaST finds additional dependencies, it shows a list of related packages to install, update or remove. Click <guimenu>Continue</guimenu> to accept them.</para>
                        <para>After all selected packages are installed, updated or removed, the YaST Software Manager automatically closes.</para>
                     </step>
                  </procedure>
                  <note>
                     <title>Installing source packages</title>
                     <para>Installing source packages with YaST Software Manager is not possible at the moment. Use the command line tool <command>zypper</command> for this purpose. For more information, see <xref linkend="sec-zypper-softman-sources"/>.</para>
                  </note>
               </sect2>
               <sect2 xml:id="sec-yast-software-update">
                  <title>Updating packages</title>
                  <para>Instead of updating individual packages, you can also update all installed packages or all packages from a certain repository. When mass updating packages, the following aspects are generally considered:</para>
                  <itemizedlist mark="bullet" spacing="normal">
                     <listitem>
                        <para>priorities of the repositories that provide the package,</para>
                     </listitem>
                     <listitem>
                        <para>architecture of the package (for example, AMD64/Intel 64),</para>
                     </listitem>
                     <listitem>
                        <para>version number of the package,</para>
                     </listitem>
                     <listitem>
                        <para>package vendor.</para>
                     </listitem>
                  </itemizedlist>
                  <para>Which of the aspects has the highest importance for choosing the update candidates depends on the respective update option you choose.</para>
                  <procedure>
                     <step>
                        <para>To update all installed packages to the latest version, choose <menuchoice><guimenu>Package</guimenu><guimenu>All Packages</guimenu><guimenu>Update if Newer Version Available</guimenu></menuchoice> from the main menu.</para>
                        <para>All repositories are checked for possible update candidates, using the following policy: YaST first tries to restrict the search to packages with the same architecture and vendor as the installed one. If the search is positive, the <quote>best</quote> update candidate from those is selected according to the process below. However, if no comparable package of the same vendor can be found, the search is expanded to all packages with the same architecture. If still no comparable package can be found, all packages are considered and the <quote>best</quote> update candidate is selected according to the following criteria:</para>
                        <orderedlist spacing="normal">
                           <listitem>
                              <para>Repository priority: prefer the package from the repository with the highest priority.</para>
                           </listitem>
                           <listitem>
                              <para>If more than one package results from this selection, choose the one with the <quote>best</quote> architecture (best choice: matching the architecture of the installed one).</para>
                           </listitem>
                        </orderedlist>
                        <para>If the resulting package has a higher version number than the installed one, the installed package is updated and replaced with the selected update candidate.</para>
                        <para>This option tries to avoid changes in architecture and vendor for the installed packages, but under certain circumstances, they are tolerated.</para>
                        <note>
                           <title>Update unconditionally</title>
                           <para>If you choose <menuchoice><guimenu>Package</guimenu><guimenu>All Packages</guimenu><guimenu>Update Unconditionally</guimenu></menuchoice> instead, the same criteria apply but any candidate package found is installed unconditionally. Thus, choosing this option may lead to downgrading certain packages.</para>
                        </note>
                     </step>
                     <step>
                        <para>To make sure that the packages for a mass update derive from a certain repository:</para>
                        <substeps performance="required">
                           <step>
                              <para>Choose the repository from which to update as described in <xref linkend="sec-yast-software-search"/> .</para>
                           </step>
                           <step>
                              <para>On the right hand side of the window, click <guimenu>Switch system packages to the versions in this repository</guimenu>. This explicitly allows YaST to change the package vendor when replacing the packages.</para>
                              <para>When you proceed with <guimenu>Accept</guimenu>, all installed packages are replaced by packages deriving from this repository, if available. This may lead to changes in vendor and architecture and even to downgrading certain packages.</para>
                           </step>
                           <step>
                              <para>To refrain from this, click <guimenu>Cancel switching system packages to the versions in this repository</guimenu>. You can only cancel this until you click the <guimenu>Accept</guimenu> button.</para>
                           </step>
                        </substeps>
                     </step>
                     <step>
                        <para>Before applying your changes, you can review or modify them by clicking <menuchoice><guimenu>View</guimenu><guimenu>Installation Summary</guimenu></menuchoice>. By default, all packages that will change status, are listed.</para>
                     </step>
                     <step>
                        <para>If all options are set according to your wishes, confirm your changes with <guimenu>Accept</guimenu> to start the mass update.</para>
                     </step>
                  </procedure>
               </sect2>
               <sect2 xml:id="sec-yast-software-dependencies">
                  <title>Package dependencies</title>
                  <para>Most packages are dependent on other packages. If a package, for example, uses a shared library, it is dependent on the package providing this library. Certain packages cannot coexist, causing a conflict (for example, you can only install one mail transfer agent: sendmail or postfix). When installing or removing software, the Software Manager makes sure no dependencies or conflicts remain unsolved to ensure system integrity.</para>
                  <para>In case there exists only one solution to resolve a dependency or a conflict, it is resolved automatically. Multiple solutions always cause a conflict which needs to be resolved manually. If solving a conflict involves a vendor or architecture change, it also needs to be solved manually. When clicking <guimenu>Accept</guimenu> to apply any changes in the Software Manager, you get an overview of all actions triggered by the automatic resolver which you need to confirm.</para>
                  <para>By default, dependencies are automatically checked. A check is performed every time you change a package status (for example, by marking a package for installation or removal). This is generally useful, but can become exhausting when manually resolving a dependency conflict. To disable this function, go to the main menu and deactivate <menuchoice><guimenu>Dependencies</guimenu><guimenu>Autocheck</guimenu></menuchoice>. Manually perform a dependency check with <menuchoice><guimenu>Dependencies</guimenu><guimenu>Check Now</guimenu></menuchoice>. A consistency check is always performed when you confirm your selection with <guimenu>Accept</guimenu>.</para>
                  <para>To review a package's dependencies, right-click it and choose <guimenu>Show Solver Information</guimenu>. A map showing the dependencies opens. Packages that are already installed are displayed in a green frame.</para>
                  <note>
                     <title>Manually solving package conflicts</title>
                     <para>Unless you are experienced, follow the suggestions YaST makes when handling package conflicts, otherwise you may not be able to resolve them. Keep in mind that every change you make potentially triggers other conflicts, so you can easily end up with a steadily increasing number of conflicts. In case this happens, <guimenu>Cancel</guimenu> the Software Manager, <guimenu>Abandon</guimenu> all your changes and start again.</para>
                  </note>
                  <figure xml:id="fig-y2-sw-packconfl">
                     <title>Conflict management of the software manager</title>
                     <mediaobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/yast2_package_conflict.png" width="64%"/>
                        </imageobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/yast2_package_conflict.png" width="59%"/>
                        </imageobject>
                     </mediaobject>
                  </figure>
               </sect2>
               <sect2 xml:id="sec-yast-software-recommendations">
                  <title>Handling package recommendations</title>
                  <para>In addition to the hard dependencies required to run a program (for example a certain library), a package can also have weak dependencies, which add for example extra functionality or translations. These weak dependencies are called package recommendations.</para>
                  <para>When installing a new package, recommended packages are still installed by default. When updating an existing package, missing recommendations are not be installed automatically. To change this, set <envar>PKGMGR_RECOMMENDED="yes"</envar> in <filename>/etc/sysconfig/yast2</filename>. To install all missing recommendations for already installed packages, start <menuchoice><guimenu>YaST</guimenu><guimenu>Software Manager</guimenu></menuchoice> and choose <menuchoice><guimenu>Extras</guimenu><guimenu>Install All Matching Recommended Packages</guimenu></menuchoice>.</para>
                  <para>To disable the installation of recommended packages when installing new packages, deactivate <menuchoice><guimenu>Dependencies</guimenu><guimenu>Install Recommended Packages</guimenu></menuchoice> in the YaST Software Manager. When using the command-line tool Zypper to install packages, use the option <option>--no-recommends.</option></para>
               </sect2>
            </sect1>
            <sect1 version="5.2" xml:id="sec-yast-software-instsource"><?file yast2_sw_repo.xml?>
               <title>Managing software repositories and services</title>
               <info/>
               <para>To install third-party software, add software repositories to your system. By default, product repositories such as <phrase role="productname">SUSE Linux Enterprise Server</phrase>-DVD <phrase role="productnumber">15 SP7</phrase> and a matching update repository are automatically configured when you register your system. For more information about registration, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Deployment Guide</quote>, </phrase><xref linkend="sec-yast-install-scc-registration" xrefstyle="%label &#34;%c&#34;"/> or <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Upgrade Guide</quote>, </phrase><xref linkend="sec-update-registersystem" xrefstyle="%label &#34;%c&#34;"/>. Depending on the initially selected product, an additional repository containing translations, dictionaries, etc. might also be configured.</para>
               <para>To manage repositories, start YaST and select <menuchoice><guimenu>Software</guimenu><guimenu>Software Repositories</guimenu></menuchoice>. The <guimenu>Configured Software Repositories</guimenu> dialog opens. Here, you can also manage subscriptions to <guimenu>Services</guimenu> by changing the <guimenu>View</guimenu> at the right corner of the dialog to <guimenu>All Services</guimenu>. A Service in this context is a <guimenu>Repository Index Service</guimenu> (RIS) that can offer one or more software repositories. Such a Service can be changed dynamically by its administrator or vendor.</para>
               <para>Each repository provides files describing repository content (package names, versions, etc.). YaST downloads these repository description files to a local cache. To ensure their integrity, software repositories can be signed with the GPG Key of the repository maintainer. Whenever you add a new repository, YaST offers the ability to import its key.</para>
               <warning>
                  <title>Trusting external software sources</title>
                  <para>Before adding external software repositories to your list of repositories, make sure this repository can be trusted. SUSE is not responsible for any problems arising from software installed from third-party software repositories.</para>
               </warning>
               <sect2 xml:id="sec-yast-software-instsource-add">
                  <title>Adding software repositories</title>
                  <para>You can either add repositories from DVD/CD, a USB flash drive, a local directory, an ISO image, or a network source.</para>
                  <para>To add repositories from the <guimenu>Configured Software Repositories</guimenu> dialog in YaST proceed as follows:</para>
                  <procedure>
                     <step>
                        <para>Click <guimenu>Add</guimenu>.</para>
                     </step>
                     <step>
                        <para>Select one of the options listed in the dialog:</para>
                        <figure xml:id="fig-y2-sw-repo-new">
                           <title>Adding a software repository</title>
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/yast2_addon_new.png" width="64%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/yast2_addon_new.png" width="59%"/>
                              </imageobject>
                           </mediaobject>
                        </figure>
                        <itemizedlist mark="bullet" spacing="normal">
                           <listitem>
                              <para>To scan your network for installation servers announcing their services via SLP, select <guimenu>Scan Using SLP</guimenu> and click <guimenu>Next</guimenu>.</para>
                           </listitem>
                           <listitem>
                              <para>To add a repository from a removable medium, choose the relevant option and insert the medium or connect the USB device to the machine, respectively. Click <guimenu>Next</guimenu> to start the installation.</para>
                           </listitem>
                           <listitem>
                              <para>For the majority of repositories, you will be asked to specify the path (or URL) to the media after selecting the respective option and clicking <guimenu>Next</guimenu>. Specifying a <guimenu>Repository Name</guimenu> is optional. If none is specified, YaST will use the product name or the URL as repository name.</para>
                           </listitem>
                        </itemizedlist>
                        <para>The option <guimenu>Download Repository Description Files</guimenu> is activated by default. If you deactivate the option, YaST will automatically download the files later, if needed.</para>
                     </step>
                     <step>
                        <para>Depending on the repository you add, you may be prompted to import the repository's GPG key or asked to agree to a license.</para>
                        <para>After confirming, YaST will download and parse the metadata. It will add the repository to the list of <guimenu>Configured Repositories</guimenu>.</para>
                     </step>
                     <step>
                        <para>If needed, adjust the repository <guimenu>Properties</guimenu> as described in <xref linkend="sec-yast-software-instsource-manage"/>.</para>
                     </step>
                     <step>
                        <para>Confirm your changes with <guimenu>OK</guimenu> to close the configuration dialog.</para>
                     </step>
                     <step>
                        <para>After having successfully added the repository, the software manager starts and you can install packages from this repository. For details, refer to <xref linkend="cha-yast-software"/>.</para>
                     </step>
                  </procedure>
               </sect2>
               <sect2 xml:id="sec-yast-software-instsource-manage">
                  <title>Managing repository properties</title>
                  <para>The <guimenu>Configured Software Repositories</guimenu> overview of the <guimenu>Software Repositories</guimenu> lets you change the following repository properties:</para>
                  <variablelist>
                     <varlistentry>
                        <term>Status</term>
                        <listitem>
                           <para>The repository status can either be <guimenu>Enabled</guimenu> or <guimenu>Disabled</guimenu>. You can only install packages from repositories that are enabled. To turn a repository off temporarily, select it and deactivate <guimenu>Enable</guimenu>. You can also double-click a repository name to toggle its status. To remove a repository completely, click <guimenu>Delete</guimenu>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Refresh</term>
                        <listitem>
                           <para>When refreshing a repository, its content description (package names, versions, etc.) is downloaded to a local cache that is used by YaST. It is sufficient to do this once for static repositories such as CDs or DVDs, whereas repositories whose content changes often should be refreshed frequently. The easiest way to keep a repository's cache up to date is to choose <guimenu>Automatically Refresh</guimenu>. To do a manual refresh click <guimenu>Refresh</guimenu> and select one of the options.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Keep Downloaded Packages</guimenu>
                        </term>
                        <listitem>
                           <para>Packages from remote repositories are downloaded before being installed. By default, they are deleted upon successful installation. Activating <guimenu>Keep Downloaded Packages</guimenu> prevents the deletion of downloaded packages. The download location is configured in <filename>/etc/zypp/zypp.conf</filename>, by default it is <filename>/var/cache/zypp/packages</filename>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <guimenu>Priority</guimenu>
                        </term>
                        <listitem>
                           <para>The <guimenu>Priority</guimenu> of a repository is a value between <literal>1</literal> and <literal>200</literal>, with <literal>1</literal> being the highest priority and <literal>200</literal> the lowest priority. Any new repositories that are added with YaST get a priority of <literal>99</literal> by default. If you do not care about a priority value for a certain repository, you can also set the value to <literal>0</literal> to apply the default priority to that repository (<literal>99</literal>). If a package is available in more than one repository, then the repository with the highest priority takes precedence. This is useful to avoid downloading packages unnecessarily from the Internet by giving a local repository (for example, a DVD) a higher priority.</para>
                           <important>
                              <title>Priority compared to version</title>
                              <para>The repository with the highest priority takes precedence in any case. Therefore, make sure that the update repository always has the highest priority, otherwise you might install an outdated version that will not be updated until the next online update.</para>
                           </important>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Name and URL</term>
                        <listitem>
                           <para>To change a repository name or its URL, select it from the list with a single-click and then click <guimenu>Edit</guimenu>.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="sec-yast-software-repo-gpg-keys">
                  <title>Managing repository keys</title>
                  <para>To ensure their integrity, software repositories can be signed with the GPG Key of the repository maintainer. Whenever you add a new repository, YaST offers to import its key. Verify it as you would do with any other GPG key and make sure it does not change. If you detect a key change, something might be wrong with the repository. Disable the repository as an installation source until you know the cause of the key change.</para>
                  <para>To manage all imported keys, click <guimenu>GPG Keys</guimenu> in the <guimenu>Configured Software Repositories</guimenu> dialog. Select an entry with the mouse to show the key properties at the bottom of the window. <guimenu>Add</guimenu>, <guimenu>Edit</guimenu>, or <guimenu>Delete</guimenu> keys with a click on the respective buttons.</para>
               </sect2>
            </sect1>
            <sect1 version="5.2" xml:id="sec-updater"><?file updater_gnome.xml?>
               <title>The GNOME package updater</title>
               <info/>
               <para>SUSE offers a continuous stream of software security patches and updates for your product. They can be installed using tools available with your desktop or by running the <xref linkend="cha-onlineupdate-you" xrefstyle="%c"/><!-- YaST Online Update --> module. This section describes how to update the system from the GNOME desktop using the <guimenu>Package Updater</guimenu>.</para>
               <para>Contrary to the YaST Online Update module, the GNOME <guimenu>Package Updater</guimenu> not only offers to install patches from the update repositories, but also new versions of packages that are already installed. (Patches fix security issues or malfunctions; the functionality and version number is usually not changed. New versions of a package increase the version number and add functionality or introduce major changes.)</para>
               <para>Whenever new patches or package updates are available, GNOME shows a notification in the notification area or on the lock screen.</para>
               <figure>
                  <title>Update notification on GNOME desktop</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/gnome_update_notification_desktop.png" width="69%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/gnome_update_notification_desktop.png" width="69%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
               <para>To configure the notification settings for the <guimenu>Package Updater</guimenu>, start GNOME <guimenu>Settings</guimenu> and choose <menuchoice><guimenu>Notifications</guimenu><guimenu>Package Updater</guimenu></menuchoice>.</para>
               <procedure>
                  <title>Installing patches and updates with the GNOME package updater</title>
                  <step>
                     <para>To install the patches and updates, click the notification message. This opens the GNOME <guimenu>Package Updater</guimenu>. Alternatively, open the updater from <guimenu>Activities</guimenu> by typing <literal>package U</literal> and choosing <guimenu>Package Updater</guimenu>.</para>
                     <informalfigure>
                        <mediaobject>
                           <imageobject outputformat="print">
                              <imagedata fileref="media/gupdater_updates.png" width="69%"/>
                           </imageobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/gupdater_updates.png" width="69%"/>
                           </imageobject>
                        </mediaobject>
                     </informalfigure>
                  </step>
                  <step>
                     <para>Updates are sorted into four categories:</para>
                     <variablelist>
                        <varlistentry>
                           <term>Security updates (patches)</term>
                           <listitem>
                              <para>Fix severe security hazards and should always be installed.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Recommended updates (patches)</term>
                           <listitem>
                              <para>Fix issues that could compromise your computer. Installing them is strongly recommended.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Optional updates (patches)</term>
                           <listitem>
                              <para>Fix non-security relevant issues or provide enhancements.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Other updates</term>
                           <listitem>
                              <para>New versions of packages that are installed.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <para>All available updates are preselected for installation. If you do not want to install all updates, deselect unwanted updates first. It is strongly recommended to always install all security and recommended updates.</para>
                     <para>To get detailed information on an update, click its title and then <guimenu>Details</guimenu>. The information is displayed in a box beneath the package list.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>Install Updates</guimenu> to start the installation.</para>
                  </step>
                  <step>
                     <para>Some updates may require to restart the machine or to log out. Check the message displayed after installation for instructions.</para>
                  </step>
               </procedure>
            </sect1>
            <sect1 version="5.2" xml:id="sec-updater-gnomesw"><?file updater_gnome_sw.xml?>
               <title>Updating packages with <guimenu>GNOME Software</guimenu>
               </title>
               <info/>
               <para>In addition to the GNOME <guimenu>Package Updater</guimenu>, GNOME provides <guimenu>GNOME Software</guimenu> which has the following functionality:</para>
               <itemizedlist>
                  <listitem>
                     <para>Install, update, and remove software delivered as an RPM via PackageKit</para>
                  </listitem>
                  <listitem>
                     <para>Install, update, and remove software delivered as a Flatpak</para>
                  </listitem>
                  <listitem>
                     <para>Install, update, and remove GNOME shell extensions (<link xlink:href="https://extensions.gnome.org"/>)</para>
                  </listitem>
                  <listitem>
                     <para>Update firmware for hardware devices using <emphasis>Linux Vendor Firmware Service</emphasis> (LVFS, <link xlink:href="https://fwupd.org"/>)</para>
                  </listitem>
               </itemizedlist>
               <para><guimenu>GNOME Software</guimenu> also provides screenshots, ratings, and reviews for software.</para>
               <figure>
                  <title>
                     <guimenu>GNOME Software</guimenu>—<guimenu>Updates</guimenu> view</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/gnome-software-updates.png" width="69%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/gnome-software-updates.png" width="69%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
               <para><guimenu>GNOME Software</guimenu> has the following differences to other tools provided on <phrase role="productname">SUSE Linux Enterprise Server</phrase>:</para>
               <itemizedlist>
                  <listitem>
                     <para>Unlike YaST or Zypper, for installing software packaged as an RPM, <guimenu>GNOME Software</guimenu> is restricted to software that provides AppStream metadata. This includes most desktop applications.</para>
                  </listitem>
                  <listitem>
                     <para>While the GNOME <guimenu>Package Updater</guimenu> updates packages within the running system (forcing you to restart the respective applications), <guimenu>GNOME Software</guimenu> downloads the updates and applies them after reboot.</para>
                  </listitem>
               </itemizedlist>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-sw-cl"><?file sw_managing_commandline.xml?>
            <title>Managing software with command line tools</title>
            <info>
               <abstract>
                  <para>This chapter describes Zypper and RPM, two command line tools for managing software. For a definition of the terminology used in this context (for example, <literal>repository</literal>, <literal>patch</literal>, or <literal>update</literal>) refer to <xref linkend="sec-onlineupdate-terms"/>.</para>
               </abstract>
            </info>
            <sect1 version="5.2" xml:id="sec-zypper"><?file zypper.xml?>
               <title>Using Zypper</title>
               <info/>
               <para>Zypper is a command line package manager for installing, updating, and removing packages. It also manages repositories. It is especially useful for accomplishing remote software management tasks or managing software from shell scripts.</para>
               <sect2 xml:id="sec-zypper-usage">
                  <title>General usage</title>
                  <para>The general syntax of Zypper is:</para>
                  <screen>zypper <option>[--global-options]</option> <replaceable>COMMAND</replaceable> <option> [--command-options]</option> <option>[arguments]</option></screen>
                  <!-- Note that Zypper distinguishes between "commands" and "subcommands" in
    ways which are inconsistent with our other documentation:
    + A "command" is a preinstalled functionality of Zypper ("install",
      "remove").
    + A "subcommand" is an executable that users can put into a special path and
      can be run via Zypper.
    - sknorr, 2016-04-21 -->
                  <para>The components enclosed in brackets are not required. See <command>zypper help</command> for a list of general options and all commands. To get help for a specific command, type <command>zypper help</command><replaceable>COMMAND</replaceable>.</para>
                  <variablelist>
                     <varlistentry>
                        <term>Zypper commands</term>
                        <listitem>
                           <para>The simplest way to execute Zypper is to type its name, followed by a command. For example, to apply all needed patches to the system, use:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Global options</term>
                        <listitem>
                           <para>Additionally, you can choose from one or more global options by typing them immediately before the command:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> zypper --non-interactive patch</screen>
                           <para>In the above example, the option <option>--non-interactive</option> means that the command is run without asking anything (automatically applying the default answers).</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Command-specific options</term>
                        <listitem>
                           <para>To use options that are specific to a particular command, type them immediately after the command:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch --auto-agree-with-licenses</screen>
                           <para>In the above example, <option>--auto-agree-with-licenses</option> is used to apply all needed patches to a system without you being asked to confirm any licenses. Instead, licenses will be accepted automatically.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Arguments</term>
                        <listitem>
                           <para>Some commands require one or more arguments. For example, when using the command <command>install</command>, you need to specify which package or which packages you want to <emphasis>install</emphasis>:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> zypper install mplayer</screen>
                           <para>Some options also require a single argument. The following command will list all known patterns:</para>
                           <screen><prompt>&gt;</prompt>zypper search -t pattern</screen>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>You can combine all of the above. For example, the following command will install the <package>mc</package> and <package>vim</package> packages from the <literal>factory</literal> repository while being verbose:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> zypper -v install --from factory mc vim</screen>
                  <para>The <option>--from</option> option keeps all repositories enabled (for solving any dependencies) while requesting the package from the specified repository. <option>--repo</option> is an alias for <option>--from</option>, and you may use either one.</para>
                  <para>Most Zypper commands have a <literal>dry-run</literal> option that does a simulation of the given command. It can be used for test purposes.</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> zypper remove --dry-run MozillaFirefox</screen>
                  <para>Zypper supports the global <option>--userdata <replaceable>STRING</replaceable></option> option. You can specify a string with this option, which gets written to Zypper's log files and plug-ins (such as the Btrfs plug-in). It can be used to mark and identify transactions in log files.</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> zypper --userdata <replaceable>STRING</replaceable> patch</screen>
               </sect2>
               <sect2 xml:id="sec-zypper-subcommands">
                  <title>Using Zypper subcommands</title>
                  <para>Zypper subcommands are executables that are stored in the directory specified by the <option>zypper_execdir</option> configuration option. It is <filename>/usr/lib/zypper/commands</filename> by default. If a subcommand is not found there, Zypper automatically searches the rest of your $PATH locations for it. This lets you create your own local extensions and store them in user space.</para>
                  <para>Executing subcommands in the Zypper shell, and using global Zypper options are not supported.</para>
                  <para>List your available subcommands:</para>
                  <screen><prompt>&gt;</prompt>zypper help subcommand
[...]
Available zypper subcommands in '/usr/lib/zypper/commands'

  appstream-cache
  lifecycle
  migration
  search-packages

Zypper subcommands available from elsewhere on your $PATH

  log                   Zypper logfile reader
                            (/usr/sbin/zypper-log)
</screen>
                  <para>View the help screen for a subcommand:</para>
                  <screen><prompt>&gt;</prompt>zypper help appstream-cache
</screen>
               </sect2>
               <sect2 xml:id="sec-zypper-softman">
                  <title>Installing and removing software with Zypper</title>
                  <para>To install or remove packages, use the following commands:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> zypper install <replaceable>PACKAGE_NAME</replaceable><prompt>&gt;</prompt><command>sudo</command> zypper remove <replaceable>PACKAGE_NAME</replaceable></screen>
                  <!-- fate#304459 -->
                  <warning>
                     <title>Do not remove mandatory system packages</title>
                     <para>Do not remove mandatory system packages like <package>glibc</package> , <package>zypper</package> , <package>kernel</package> . If they are removed, the system can become unstable or stop working altogether.</para>
                  </warning>
                  <sect3 xml:id="sec-zypper-selectpackage">
                     <title>Selecting which packages to install or remove</title>
                     <para>There are various ways to address packages with the commands <command>zypper install</command> and <command>zypper remove</command>.</para>
                     <variablelist>
                        <varlistentry>
                           <term>By exact package name</term>
                           <listitem>
                              <screen><prompt>&gt;</prompt><command>sudo</command> zypper install MozillaFirefox</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>By exact package name and version number</term>
                           <listitem>
                              <screen><prompt>&gt;</prompt><command>sudo</command> zypper install MozillaFirefox-52.2</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>By repository alias and package name</term>
                           <listitem>
                              <screen><prompt>&gt;</prompt><command>sudo</command> zypper install mozilla:MozillaFirefox</screen>
                              <para>Where <literal>mozilla</literal> is the alias of the repository from which to install.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>By package name using wild cards</term>
                           <listitem>
                              <para>You can select all packages that have names starting or ending with a certain string. Use wild cards with care, especially when removing packages. The following command will install all packages starting with <quote>Moz</quote>:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> zypper install 'Moz*'</screen>
                              <tip>
                                 <title>Removing all <filename>-debuginfo</filename> packages</title>
                                 <para>When debugging a problem, you sometimes need to temporarily install a lot of <filename>-debuginfo</filename> packages which give you more information about running processes. After your debugging session finishes and you need to clean the environment, run the following:</para>
                                 <screen><prompt>&gt;</prompt><command>sudo</command> zypper remove '*-debuginfo'</screen>
                              </tip>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>By capability</term>
                           <listitem>
                              <para>For example, to install a package without knowing its name, capabilities come in handy. The following command will install the package <package>MozillaFirefox</package>:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> zypper install firefox</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>By capability, hardware architecture, or version</term>
                           <listitem>
                              <para>Together with a capability, you can specify a hardware architecture and a version:</para>
                              <itemizedlist>
                                 <listitem>
                                    <para>The name of the desired hardware architecture is appended to the capability after a full stop. For example, to specify the AMD64/Intel 64 architectures (which in Zypper is named <literal>x86_64</literal>), use:</para>
                                    <screen><prompt>&gt;</prompt><command>sudo</command> zypper install 'firefox.x86_64'</screen>
                                 </listitem>
                                 <listitem>
                                    <para>Versions must be appended to the end of the string and must be preceded by an operator: <literal>&lt;</literal> (lesser than), <literal>&lt;=</literal> (lesser than or equal), <literal>=</literal> (equal), <literal>&gt;=</literal> (greater than or equal), <literal>&gt;</literal> (greater than).</para>
                                    <screen><prompt>&gt;</prompt><command>sudo</command> zypper install 'firefox&gt;=74.2'</screen>
                                 </listitem>
                                 <listitem>
                                    <para>You can also combine a hardware architecture and version requirement:</para>
                                    <screen><prompt>&gt;</prompt><command>sudo</command> zypper install 'firefox.x86_64&gt;=74.2'</screen>
                                 </listitem>
                              </itemizedlist>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>By path to the RPM file</term>
                           <listitem>
                              <para>You can also specify a local or remote path to a package:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> zypper install /tmp/install/MozillaFirefox.rpm
<prompt>&gt;</prompt><command>sudo</command> zypper install http://download.example.com/MozillaFirefox.rpm</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3 xml:id="sec-zypper-combineinstall">
                     <title>Combining installation and removal of packages</title>
                     <para>To install and remove packages simultaneously, use the <literal>+/-</literal> modifiers. To install <package>emacs</package> and simultaneously remove <package>vim</package> , use:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper install emacs -vim</screen>
                     <para>To remove <package>emacs</package> and simultaneously install <package>vim</package> , use:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper remove emacs +vim</screen>
                     <para>To prevent the package name starting with the <literal>-</literal> being interpreted as a command option, always use it as the second argument. If this is not possible, precede it with <literal>--</literal>:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper install -emacs +vim       # Wrong
<prompt>&gt;</prompt><command>sudo</command> zypper install vim -emacs        # Correct
<prompt>&gt;</prompt><command>sudo</command> zypper install -- -emacs +vim    # Correct
<prompt>&gt;</prompt><command>sudo</command> zypper remove emacs +vim         # Correct</screen>
                  </sect3>
                  <sect3 xml:id="sec-zypper-clean">
                     <title>Cleaning up dependencies of removed packages</title>
                     <para>If (together with a certain package), you automatically want to remove any packages that become unneeded after removing the specified package, use the <option>--clean-deps</option> option:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper rm --clean-deps <replaceable>PACKAGE_NAME</replaceable></screen>
                  </sect3>
                  <sect3 xml:id="sec-zypper-script">
                     <title>Using Zypper in scripts</title>
                     <para>By default, Zypper asks for a confirmation before installing or removing a selected package, or when a problem occurs. You can override this behavior using the <option>--non-interactive</option> option. This option must be given before the actual command (<command>install</command>, <command>remove</command>, and <command>patch</command>), as can be seen in the following:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper <option>--non-interactive</option> install <replaceable>PACKAGE_NAME</replaceable></screen>
                     <para>This option allows the use of Zypper in scripts and cron jobs.</para>
                  </sect3>
                  <sect3 xml:id="sec-zypper-softman-sources">
                     <title>Installing or downloading source packages</title>
                     <para>To install the corresponding source package of a package, use:</para>
                     <screen><prompt>&gt;</prompt>zypper source-install <replaceable>PACKAGE_NAME</replaceable></screen>
                     <para>When executed as <systemitem class="username">root</systemitem>, the default location to install source packages is <filename>/usr/src/packages/</filename> and <filename>~/rpmbuild</filename> when run as user. These values can be changed in your local <command>rpm</command> configuration.</para>
                     <para>This command will also install the build dependencies of the specified package. If you do not want this, add the switch <literal>-D</literal>:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper source-install -D <replaceable>PACKAGE_NAME</replaceable></screen>
                     <para>To install only the build dependencies use <literal>-d</literal>.</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper source-install -d <replaceable>PACKAGE_NAME</replaceable></screen>
                     <para>Of course, this will only work if you have the repository with the source packages enabled in your repository list (it is added by default, but not enabled). See <xref linkend="sec-zypper-instrepo"/> for details on repository management.</para>
                     <para>A list of all source packages available in your repositories can be obtained with:</para>
                     <screen><prompt>&gt;</prompt>zypper search -t srcpackage</screen>
                     <para>You can also download source packages for all installed packages to a local directory. To download source packages, use:</para>
                     <screen><prompt>&gt;</prompt>zypper source-download</screen>
                     <para>The default download directory is <filename>/var/cache/zypper/source-download</filename>. You can change it using the <option>--directory</option> option. To only show missing or extraneous packages without downloading or deleting anything, use the <option>--status</option> option. To delete extraneous source packages, use the <option>--delete</option> option. To disable deleting, use the <option>--no-delete</option> option.</para>
                  </sect3>
                  <sect3 xml:id="sec-zypper-softman-pluscontent">
                     <title>Installing packages from disabled repositories</title>
                     <para>Normally you can only install or refresh packages from enabled repositories. The <option>--plus-content <replaceable>TAG</replaceable></option> option helps you specify repositories to be refreshed, temporarily enabled during the current Zypper session, and disabled after it completes.</para>
                     <para>For example, to enable repositories that may provide additional <filename>-debuginfo</filename> or <filename>-debugsource</filename> packages, use <option>--plus-content debug</option>. You can specify this option multiple times.</para>
                     <para>To temporarily enable such 'debug' repositories to install a specific <filename>-debuginfo</filename> package, use the option as follows:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper --plus-content debug \
   install "debuginfo(build-id)=eb844a5c20c70a59fc693cd1061f851fb7d046f4"</screen>
                     <para>The <literal>build-id</literal> string is reported by <command>gdb</command> for missing debuginfo packages.</para>
                     <note>
                        <title>Disabled installation media</title>
                        <para><remark>cwickert 2019-04-18: JSC#SLE-3191</remark> Repositories from the <phrase role="productname">SUSE Linux Enterprise Server</phrase> installation media are still configured but disabled after successful installation. You can use the <option>--plus-content</option> option to install packages from the installation media instead of the online repositories. Before calling <command>zypper</command>, ensure the media is available, for example by inserting the DVD into the computer's drive.</para>
                     </note>
                  </sect3>
                  <sect3 xml:id="sec-zypper-softman-util">
                     <title>Utilities</title>
                     <para>To verify whether all dependencies are still fulfilled and to repair missing dependencies, use:</para>
                     <screen><prompt>&gt;</prompt>zypper verify</screen>
                     <para>In addition to dependencies that must be fulfilled, some packages <quote>recommend</quote> other packages. These recommended packages are only installed if actually available and installable. In case recommended packages were made available after the recommending package has been installed (by adding additional packages or hardware), use the following command:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper install-new-recommends</screen>
                     <para>This command is very useful after plugging in a Web cam or Wi-Fi device. It will install drivers for the device and related software, if available. Drivers and related software are only installable if certain hardware dependencies are fulfilled.</para>
                  </sect3>
               </sect2>
               <sect2 xml:id="sec-zypper-softup">
                  <title>Updating software with Zypper</title>
                  <para>There are three different ways to update software using Zypper: by installing patches, by installing a new version of a package or by updating the entire distribution. The latter is achieved with <command>zypper dist-upgrade</command>. Upgrading <phrase role="productname">SUSE Linux Enterprise Server</phrase> is discussed in <!-- cwickert 2018-11-19: No whitespace and no line break with indention
    between the phrases, otherwise there will be a trailing whitespace in the
    resulting media at the end of the sentence just before the dot.
   --><phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Upgrade Guide</quote>, </phrase><xref linkend="cha-upgrade-paths" xrefstyle="%label &#34;%c&#34;"/>.</para>
                  <sect3 xml:id="sec-zypper-softup-patch">
                     <title>Installing all needed patches</title>
                     <para><emphasis>Patching</emphasis><phrase role="productname">SUSE Linux Enterprise Server</phrase> is the most reliable way to install new versions of installed packages. It guarantees that all required packages with correct versions are installed and ensures that package versions considered as <emphasis>conflicting</emphasis> are omitted.</para>
                     <para>To install all officially released patches that apply to your system, run:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch</screen>
                     <para>All patches available from repositories configured on your computer are checked for their relevance to your installation. If they are relevant (and not classified as <literal>optional</literal> or <literal>feature</literal>), they are installed immediately. If <command>zypper patch</command> succeeds, it is guaranteed that no vulnerable version package is installed unless you confirm the exception. Note that the official update repository is only available after registering your <phrase role="productname">SUSE Linux Enterprise Server</phrase> installation.</para>
                     <para>If a patch that is about to be installed includes changes that require a system reboot, you will be warned before.</para>
                     <para>The plain <command>zypper patch</command> command does not apply patches from third party repositories. To update also the third party repositories, use the <literal>with-update</literal> command option as follows:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch --with-update</screen>
                     <para>To install also optional patches, use:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch --with-optional</screen>
                     <remark>The structure here is a bit unfortunate: We explain how to use the --cve/--bugzilla options in more detail below ("Listing Patches"). However, the first bit people get is the very brief intro immediately below. Not sure whether to replicate all the information from "Listing Patches" here. - sknorr, 2016-04-25</remark>
                     <para>To install all patches relating to a specific Bugzilla issue, use:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch --bugzilla=<replaceable>NUMBER</replaceable></screen>
                     <para>To install all patches relating to a specific CVE database entry, use:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch --cve=<replaceable>NUMBER</replaceable></screen>
                     <para>For example, to install a security patch with the CVE number <literal>CVE-2010-2713</literal>, execute:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch --cve=CVE-2010-2713</screen>
                     <para>To install only patches which affect Zypper and the package management itself, use:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper patch --updatestack-only</screen>
                     <para>Bear in mind that other command options that would also update other repositories will be dropped if you use the <literal>updatestack-only</literal> command option.</para>
                  </sect3>
                  <sect3 xml:id="sec-zypper-softup-listpatch">
                     <title>Listing patches</title>
                     <para>To find out whether patches are available, Zypper allows viewing the following information:</para>
                     <variablelist>
                        <varlistentry>
                           <term>Number of needed patches</term>
                           <listitem>
                              <para>To list the number of needed patches (patches that apply to your system but are not yet installed), use <command>patch-check</command>:</para>
                              <screen><prompt>&gt;</prompt>zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</screen>
                              <para>This command can be combined with the <option>--updatestack-only</option> option to list only the patches which affect Zypper and the package management itself.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>List of needed patches</term>
                           <listitem>
                              <para>To list all needed patches (patches that apply to your system but are not yet installed), use <command>zypper list-patches</command>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>List of all patches</term>
                           <listitem>
                              <para>To list all patches available for <phrase role="productname">SUSE Linux Enterprise Server</phrase>, regardless of whether they are already installed or apply to your installation, use <command>zypper patches</command>.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <para>It is also possible to list and install patches relevant to specific issues. To list specific patches, use the <command>zypper list-patches</command> command with the following options:</para>
                     <variablelist>
                        <varlistentry>
                           <term>By Bugzilla issues</term>
                           <listitem>
                              <para>To list all needed patches that relate to Bugzilla issues, use the option <option>--bugzilla</option>.</para>
                              <para>To list patches for a specific bug, you can also specify a bug number: <option>--bugzilla=<replaceable>NUMBER</replaceable></option>. To search for patches relating to multiple Bugzilla issues, add commas between the bug numbers, for example:</para>
                              <screen><prompt>&gt;</prompt>zypper list-patches --bugzilla=972197,956917</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>By CVE number</term>
                           <listitem>
                              <para>To list all needed patches that relate to an entry in the CVE database (Common Vulnerabilities and Exposures), use the option <option>--cve</option>.</para>
                              <para>To list patches for a specific CVE database entry, you can also specify a CVE number: <option>--cve=<replaceable>NUMBER</replaceable></option>. To search for patches relating to multiple CVE database entries, add commas between the CVE numbers, for example:</para>
                              <screen><prompt>&gt;</prompt>zypper list-patches --cve=CVE-2016-2315,CVE-2016-2324</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>List retracted patches</term>
                           <listitem>
                              <para>In the SUSE Linux Enterprise 15 codestream, some patches are automatically retracted. Maintenance updates are carefully tested, because there is a risk that an update contains a new bug. If an update proves to contain a bug, a new update (with a higher version number) is issued to revert the buggy update, and the buggy update is blocked from being installed again. You can list retracted patches with <command>zypper</command>:</para>
                              <screen><prompt>&gt;</prompt><command>zypper lp --all |grep retracted</command>
SLE-Module-Basesystem15-SP3-Updates | SUSE-SLE-Module-Basesystem-15-SP3-2021-1965
 | recommended | important | ---    | retracted  | Recommended update for multipath-tools
SLE-Module-Basesystem15-SP3-Updates | SUSE-SLE-Module-Basesystem-15-SP3-2021-2689
 | security    | important | ---    | retracted  | Security update for cpio
SLE-Module-Basesystem15-SP3-Updates | SUSE-SLE-Module-Basesystem-15-SP3-2021-3655
 | security    | important | reboot | retracted  | Security update for the Linux Kernel</screen>
                              <para>See complete information on a retracted (or any) patch:</para>
                              <screen><prompt>&gt;</prompt><command>zypper patch-info SUSE-SLE-Product-SLES-15-2021-2689</command>
Loading repository data...
Reading installed packages...

Information for patch SUSE-SLE-Product-SLES-15-2021-2689:
---------------------------------------------------------
Repository  : SLE-Product-SLES15-LTSS-Updates
Name        : SUSE-SLE-Product-SLES-15-2021-2689
Version     : 1
Arch        : noarch
Vendor      : maint-coord@suse.de
Status      : retracted
Category    : security
Severity    : important
Created On  : Mon 16 Aug 2021 03:44:00 AM PDT
Interactive : ---
Summary     : Security update for cpio
Description :
    This update for cpio fixes the following issues:

    It was possible to trigger Remote code execution due to a integer overflow
    (CVE-2021-38185, bsc#1189206)

    UPDATE:
    This update was buggy and could lead to hangs, so it has been retracted.
    There will be a follow up update.
    [...]</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Patch with conflicting packages</term>
                           <listitem>
                              <screen>
Information for patch openSUSE-SLE-15.3-2022-333:
-------------------------------------------------
Repository  : Update repository with updates from SUSE Linux Enterprise 15
Name        : openSUSE-SLE-15.3-2022-333
Version     : 1
Arch        : noarch
Vendor      : maint-coord@suse.de
Status      : needed
Category    : security
Severity    : important
Created On  : Fri Feb  4 09:30:32 2022
Interactive : reboot
Summary     : Security update for xen
Description :
    This update for xen fixes the following issues:

    - CVE-2022-23033: Fixed guest_physmap_remove_page not removing the p2m mappings. (XSA-393) (bsc#1194576)
    - CVE-2022-23034: Fixed possible DoS by a PV guest Xen while unmapping a grant. (XSA-394) (bsc#1194581)
    - CVE-2022-23035: Fixed insufficient cleanup of passed-through device IRQs. (XSA-395) (bsc#1194588)
Provides    : patch:openSUSE-SLE-15.3-2022-333 = 1
Conflicts   : [22]
    xen.src &lt; 4.14.3_06-150300.3.18.2
    xen.noarch &lt; 4.14.3_06-150300.3.18.2
    xen.x86_64 &lt; 4.14.3_06-150300.3.18.2
    xen-devel.x86_64 &lt; 4.14.3_06-150300.3.18.2
    xen-devel.noarch &lt; 4.14.3_06-150300.3.18.2
[...]
</screen>
                              <para>The above patch conflicts with the affected or vulnerable versions of 22 packages. If any of these affected or vulnerable packages are installed, it triggers a conflict, and the patch is classified as <emphasis>needed</emphasis>. <command>zypper patch</command> tries to install all available patches. If it encounters problems, it reports them, thus informing you that not all updates are installed. The conflict can be resolved by either updating the affected or vulnerable packages or by removing them. Because SUSE update repositories also ship fixed packages, updating is a standard way to resolve conflicts. If the package cannot be updated—for example, because of dependency issues or package locks—it is deleted after the user's approval.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <para>To list all patches regardless of whether they are needed, use the option <option>--all</option> additionally. For example, to list all patches with a CVE number assigned, use:</para>
                     <screen><?dbsuse-fo font-size="0.70em"?><prompt>&gt;</prompt>zypper list-patches --all --cve
Issue | No.           | Patch             | Category    | Severity  | Status
------+---------------+-------------------+-------------+-----------+----------
cve   | CVE-2019-0287 | SUSE-SLE-Module.. | recommended | moderate  | needed
cve   | CVE-2019-3566 | SUSE-SLE-SERVER.. | recommended | moderate  | not needed
[...]</screen>
                  </sect3>
                  <sect3 xml:id="sec-zypper-softup-update">
                     <title>Installing new package versions</title>
                     <para>If a repository contains only new packages, but does not provide patches, <command>zypper patch</command> does not show any effect. To update all installed packages with newer available versions, use the following command:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper update</screen>
                     <important>
                        <para><command>zypper update</command> ignores problematic packages. For example, if a package is locked, <command>zypper update</command> omits the package, even if a higher version of it is available. Conversely, <command>zypper patch</command> reports a conflict if the package is considered vulnerable.</para>
                     </important>
                     <para>To update individual packages, specify the package with either the update or install command:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper update <replaceable>PACKAGE_NAME</replaceable><prompt>&gt;</prompt><command>sudo</command> zypper install <replaceable>PACKAGE_NAME</replaceable></screen>
                     <para>A list of all new installable packages can be obtained with the command:</para>
                     <screen><prompt>&gt;</prompt>zypper list-updates</screen>
                     <para>Note that this command only lists packages that match the following criteria:</para>
                     <itemizedlist>
                        <listitem>
                           <para>has the same vendor like the already installed package,</para>
                        </listitem>
                        <listitem>
                           <para>is provided by repositories with at least the same priority than the already installed package,</para>
                        </listitem>
                        <listitem>
                           <para>is installable (all dependencies are satisfied).</para>
                        </listitem>
                     </itemizedlist>
                     <para>A list of <emphasis>all</emphasis> new available packages (regardless whether installable or not) can be obtained with:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper list-updates --all</screen>
                     <para>To find out why a new package cannot be installed, use the <command>zypper install</command> or <command>zypper update</command> command as described above.</para>
                  </sect3>
                  <sect3 xml:id="sec-zypper-softup-orphaned">
                     <title>Identifying orphaned packages</title>
                     <para>Whenever you remove a repository from Zypper or upgrade your system, some packages can get in an <quote>orphaned</quote> state. These <emphasis>orphaned</emphasis> packages belong to no active repository anymore. The following command gives you a list of these:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper packages --orphaned</screen>
                     <para>With this list, you can decide if a package is still needed or can be removed safely.</para>
                  </sect3>
                  <!--taroth 2014-04-30: commenting the following content due to trello#42
    (https://trello.com/c/pyYJ7sQ1)

  <sect3 id="sec-zypper-softup-upgrade">
   <title>Upgrading to a new product version</title>
   <para>&suse; offers various tools to upgrade to a new product version.
    The scenario very much depends on how the system is registered and where it
    gets its repositories from. For more information, see <xref linkend="cha-upgrade-paths"/>.
   </para>
   <para>
    To easily upgrade your installation to a new product version
    (for example, from &sls; 11 to
    &sls; 11 SP1, first adjust your repositories to match the
    current &productname; repositories. For details, refer to
    <xref
     linkend="sec-zypper-instrepo"/>. Then use the <command>zypper
    dist-upgrade</command> command with the required repositories. This
    command ensures that all packages will be installed from the
    repositories currently enabled. For detailed instructions, refer to
    <xref
     linkend="sec-update-zypper"/>.
   </para>
   <para>
    To restrict the distribution upgrade to packages from a certain
    repository while considering also the other repositories for satisfying
    dependencies, use the <option>-/-from</option> option and specify the
    repository by either its alias, its number or URI.
   </para>
   <note>
    <title>Differences between <command>zypper update</command> and <command>zypper dist-upgrade</command></title>
    <para>
     Choose <command>zypper update</command> to update packages to newer
     versions available for your product version while maintaining system
     integrity. <command>zypper update</command> will honor the following
     rules:
    </para>
    <simplelist>
     <member>no vendor changes</member>
     <member>no architecture changes</member>
     <member>no downgrades</member>
     <member>keep installed packages</member>
    </simplelist>
    <para>
     When executing <command>zypper dist-upgrade</command>, all packages
     will be installed from the repositories currently enabled. This rule is
     enforced, so packages might change vendor or architecture or even might
     get downgraded. All packages that have unfulfilled dependencies after
     the upgrade will be uninstalled.
    </para>
   </note>
  </sect3>-->
               </sect2>
               <sect2 xml:id="sec-zypper-ps">
                  <title>Identifying processes and services using deleted files</title>
                  <para>When patching, updating, or removing packages, there may be running processes on the system which continue to use files having been deleted by the update or removal. Use <command>zypper ps</command> to list processes using deleted files. In case the process belongs to a known service, the service name is listed, making it easy to restart the service. By default <command>zypper ps</command> shows a table:</para>
                  <screen><?dbsuse-fo font-size="0.70em"?><prompt>&gt;</prompt>zypper ps
PID   | PPID | UID | User  | Command      | Service      | Files
------+------+-----+-------+--------------+--------------+-------------------
814   | 1    | 481 | avahi | avahi-daemon | avahi-daemon | /lib64/ld-2.19.s-&gt;
      |      |     |       |              |              | /lib64/libdl-2.1-&gt;
      |      |     |       |              |              | /lib64/libpthrea-&gt;
      |      |     |       |              |              | /lib64/libc-2.19-&gt;
[...]</screen>
                  <simplelist>
                     <member>
                        <emphasis role="bold">PID</emphasis>: ID of the process</member>
                     <member>
                        <emphasis role="bold">PPID</emphasis>: ID of the parent process</member>
                     <member>
                        <emphasis role="bold">UID</emphasis>: ID of the user running the process</member>
                     <member>
                        <emphasis role="bold">Login</emphasis>: Login name of the user running the process</member>
                     <member>
                        <emphasis role="bold">Command</emphasis>: Command used to execute the process</member>
                     <member>
                        <emphasis role="bold">Service</emphasis>: Service name (only if command is associated with a system service)</member>
                     <member>
                        <emphasis role="bold">Files</emphasis>: The list of the deleted files</member>
                  </simplelist>
                  <para>The output format of <command>zypper ps</command> can be controlled as follows:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <command>zypper ps</command>
                           <option>-s</option>
                        </term>
                        <listitem>
                           <para>Create a short table not showing the deleted files.</para>
                           <screen><?dbsuse-fo font-size="0.70em"?><prompt>&gt;</prompt>zypper ps -s
PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix
2031  | 2027 | 1000 | tux     | bash         |</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>zypper ps</command>
                           <option>-ss</option>
                        </term>
                        <listitem>
                           <para>Show only processes associated with a system service.</para>
                           <screen>PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>zypper ps</command>
                           <option>-sss</option>
                        </term>
                        <listitem>
                           <para>Only show system services using deleted files.</para>
                           <screen>avahi-daemon
irqbalance
postfix
sshd</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>zypper ps</command>
                           <option>--print "systemctl status %s"</option>
                        </term>
                        <listitem>
                           <para>Show the commands to retrieve status information for services which might need a restart.</para>
                           <screen>systemctl status avahi-daemon
systemctl status irqbalance
systemctl status postfix
systemctl status sshd</screen>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>For more information about service handling refer to <xref linkend="cha-systemd"/>.</para>
               </sect2>
               <sect2 xml:id="sec-zypper-instrepo">
                  <title>Managing repositories with Zypper</title>
                  <para>All installation or patch commands of Zypper rely on a list of known repositories. To list all repositories known to the system, use the command:</para>
                  <screen><prompt>&gt;</prompt>zypper repos</screen>
                  <para>The result will look similar to the following output:</para>
                  <example xml:id="ex-zypper-repos">
                     <title>Zypper—list of known repositories</title>
                     <screen><prompt>&gt;</prompt>zypper repos
# | Alias        | Name          | Enabled | Refresh
--+--------------+---------------+---------+--------
1 | SLEHA-15-GEO | SLEHA-15-GEO  | Yes     | No
2 | SLEHA-15     | SLEHA-15      | Yes     | No
3 | SLES15       | SLES15        | Yes     | No</screen>
                  </example>
                  <para>When specifying repositories in various commands, an alias, URI or repository number from the <command>zypper repos</command> command output can be used. A repository alias is a short version of the repository name for use in repository handling commands. Note that the repository numbers can change after modifying the list of repositories. The alias will never change by itself.</para>
                  <para>By default, details such as the URI or the priority of the repository are not displayed. Use the following command to list all details:</para>
                  <screen><prompt>&gt;</prompt>zypper repos -d</screen>
                  <sect3 xml:id="sec-zypper-instrepo-add">
                     <title>Adding repositories</title>
                     <para>To add a repository, run</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper addrepo <replaceable>URI</replaceable><replaceable>ALIAS</replaceable></screen>
                     <para><replaceable>URI</replaceable> can either be an Internet repository, a network resource, a directory or a CD or DVD (see <link xlink:href="https://en.opensuse.org/openSUSE:Libzypp_URIs"/> for details). The <replaceable>ALIAS</replaceable> is a shorthand and unique identifier of the repository. You can freely choose it, with the only exception that it needs to be unique. Zypper will issue a warning if you specify an alias that is already in use.</para>
                  </sect3>
                  <sect3 xml:id="sec-zypper-instrepo-refresh">
                     <title>Refreshing repositories</title>
                     <para><command>zypper</command> enables you to fetch changes in packages from configured repositories. To fetch the changes, run:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper refresh</screen>
                     <note>
                        <title>Default behavior of <command>zypper</command>
                        </title>
                        <para>By default, some commands perform <command>refresh</command> automatically, so you do not need to run the command explicitly.</para>
                     </note>
                     <para>The <command>refresh</command> command enables you to view changes also in disabled repositories, by using the <literal>--plus-content</literal> option:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper --plus-content refresh</screen>
                     <para>This option fetches changes in repositories, but keeps the disabled repositories in the same state—disabled.</para>
                  </sect3>
                  <sect3 xml:id="sec-zypper-instrepo-rm">
                     <title>Removing repositories</title>
                     <para>To remove a repository from the list, use the command <command>zypper removerepo</command> together with the alias or number of the repository you want to delete. For example, to remove the repository <literal>SLEHA-12-GEO</literal> from <xref linkend="ex-zypper-repos"/>, use one of the following commands:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper removerepo 1
<prompt>&gt;</prompt><command>sudo</command> zypper removerepo "SLEHA-12-GEO"</screen>
                  </sect3>
                  <sect3 xml:id="sec-zypper-instrepo-modify">
                     <title>Modifying repositories</title>
                     <para>Enable or disable repositories with <command>zypper modifyrepo</command>. You can also alter the repository's properties (such as refreshing behavior, name or priority) with this command. The following command will enable the repository named <literal>updates</literal>, turn on auto-refresh and set its priority to 20:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper modifyrepo -er -p 20 'updates'</screen>
                     <para>Modifying repositories is not limited to a single repository—you can also operate on groups:</para>
                     <simplelist>
                        <member>
                           <option>-a</option>: all repositories</member>
                        <member>
                           <option>-l</option>: local repositories</member>
                        <member>
                           <option>-t</option>: remote repositories</member>
                        <member>
                           <option>-m <replaceable>TYPE</replaceable>
                           </option>: repositories of a certain type (where <replaceable>TYPE</replaceable> can be one of the following: <literal>http</literal>, <literal>https</literal>, <literal>ftp</literal>, <literal>cd</literal>, <literal>dvd</literal>, <literal>dir</literal>, <literal>file</literal>, <literal>cifs</literal>, <literal>smb</literal>, <literal>nfs</literal>, <literal>hd</literal>, <literal>iso</literal>)</member>
                     </simplelist>
                     <para>To rename a repository alias, use the <literal>renamerepo</literal> command. The following example changes the alias from <literal>Mozilla Firefox</literal> to <literal>firefox</literal>:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> zypper renamerepo 'Mozilla Firefox' firefox</screen>
                  </sect3>
               </sect2>
               <sect2 xml:id="sec-zypper-query">
                  <title>Querying repositories and packages with Zypper</title>
                  <para>Zypper offers various methods to query repositories or packages. To get lists of all products, patterns, packages or patches available, use the following commands:</para>
                  <screen><prompt>&gt;</prompt>zypper products
<prompt>&gt;</prompt>zypper patterns
<prompt>&gt;</prompt>zypper packages
<prompt>&gt;</prompt>zypper patches</screen>
                  <para>To query all repositories for certain packages, use <literal>search</literal>. To get information regarding particular packages, use the <literal>info</literal> command.</para>
                  <sect3 xml:id="sec-zypper-query-search">
                     <title>Searching for software</title>
                     <para>The <command>zypper search</command> command works on package names, or, optionally, on package summaries and descriptions. Strings wrapped in <literal>/</literal> are interpreted as regular expressions. By default, the search is not case-sensitive.</para>
                     <variablelist>
                        <varlistentry>
                           <term>Simple search for a package name containing <literal>fire</literal>
                           </term>
                           <listitem>
                              <screen><prompt>&gt;</prompt>zypper search "fire"</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Simple search for the exact package <literal>MozillaFirefox</literal>
                           </term>
                           <listitem>
                              <screen><prompt>&gt;</prompt>zypper search --match-exact "MozillaFirefox"</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Also search in package descriptions and summaries</term>
                           <listitem>
                              <screen><prompt>&gt;</prompt>zypper search -d fire</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Only display packages not already installed</term>
                           <listitem>
                              <screen><prompt>&gt;</prompt>zypper search -u fire</screen>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Display packages containing the string <literal>fir</literal> not followed be <literal>e</literal>
                           </term>
                           <listitem>
                              <screen><prompt>&gt;</prompt>zypper se "/fir[^e]/"</screen>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3 xml:id="sec-zypper-query-search-packages">
                     <title>Searching for packages across all SLE modules</title>
                     <para>To search for packages both within and outside of currently enabled SLE modules, use the <command>search-packages</command> subcommand. This command contacts the SUSE Customer Center and searches all modules for matching packages, for example:</para>
                     <screen><prompt>&gt;</prompt>zypper search-packages <replaceable>package1</replaceable><replaceable>package2</replaceable></screen>
                     <para><command>zypper search-packages</command> provides the following options:</para>
                     <itemizedlist>
                        <listitem>
                           <para>Search for an exact match of your search string: <option>-x</option>, <option>--match-exact</option></para>
                        </listitem>
                        <listitem>
                           <para>Group the results by module (default: group by package): <option>-g,</option><option>--group-by-module</option></para>
                        </listitem>
                        <listitem>
                           <para>Display more detailed information about packages: <option>-d</option>, <option>--details</option></para>
                        </listitem>
                        <listitem>
                           <para>Output search results in XML: <option>--xmlout</option></para>
                        </listitem>
                     </itemizedlist>
                  </sect3>
                  <sect3 xml:id="sec-zypper-query-what-provides">
                     <title>Searching for specific capability</title>
                     <para>To search for packages which provide a special capability, use the command <literal>what-provides</literal>. For example, if you want to know which package provides the Perl module <literal>SVN::Core</literal>, use the following command:</para>
                     <screen><prompt>&gt;</prompt>zypper what-provides 'perl(SVN::Core)'</screen>
                     <para>The <literal>what-provides <replaceable>PACKAGE_NAME</replaceable></literal> is similar to <command>rpm -q --whatprovides</command><replaceable>PACKAGE_NAME</replaceable>, but RPM is only able to query the RPM database (that is the database of all installed packages). Zypper, on the other hand, will tell you about providers of the capability from any repository, not only those that are installed.</para>
                  </sect3>
                  <sect3 xml:id="sec-zypper-query-info">
                     <title>Showing package information</title>
                     <para>To query single packages, use <command>info</command> with an exact package name as an argument. This displays detailed information about a package. In case the package name does not match any package name from repositories, the command outputs detailed information for non-package matches. If you request a specific type (by using the <literal>-t</literal> option) and the type does not exist, the command outputs other available matches but without detailed information.</para>
                     <para>If you specify a source package, the command displays binary packages built from the source package. If you specify a binary package, the command outputs the source packages used to build the binary package.</para>
                     <para>To also show what is required/recommended by the package, use the options <option>--requires</option> and <option>--recommends</option>:</para>
                     <screen><prompt>&gt;</prompt>zypper info --requires MozillaFirefox</screen>
                  </sect3>
               </sect2>
               <sect2 xml:id="sec-zypper-lifecycle">
                  <title>Showing lifecycle information</title>
                  <para>SUSE products are generally supported for 10 years. Often, you can extend that standard lifecycle by using the extended support offerings of SUSE which add three years of support. Depending on your product, find the exact support lifecycle at <link xlink:href="https://www.suse.com/lifecycle"/>.</para>
                  <para>To check the lifecycle of your product and the supported package, use the <command>zypper lifecycle</command> command as shown below:</para>
                  <screen><prompt role="root">#</prompt><command>zypper lifecycle</command>
    Product end of support
Codestream: SUSE Linux Enterprise Server 15             2028-07-31
    Product: SUSE Linux Enterprise Server 15 SP3        n/a*

Module end of support
Basesystem Module                                       n/a*
Desktop Applications Module                             n/a*
Server Applications Module                              n/a*

Package end of support if different from product:
autofs                                   Now, installed 5.1.3-7.3.1, update available 5.1.3-7.6.1
</screen>
               </sect2>
               <sect2 xml:id="sec-zypper-configure">
                  <title>Configuring Zypper</title>
                  <para>Zypper now comes with a configuration file, allowing you to permanently change Zypper's behavior (either system-wide or user-specific). For system-wide changes, edit <filename>/etc/zypp/zypper.conf</filename>. For user-specific changes, edit <filename>~/.zypper.conf</filename>. If <filename>~/.zypper.conf</filename> does not yet exist, you can use <filename>/etc/zypp/zypper.conf</filename> as a template: copy it to <filename>~/.zypper.conf</filename> and adjust it to your liking. Refer to the comments in the file for help about the available options.</para>
               </sect2>
               <sect2 xml:id="sec-zypper-trouble">
                  <title>Troubleshooting</title>
                  <para>If you have trouble accessing packages from configured repositories (for example, Zypper cannot find a certain package even though you know it exists in one of the repositories), refreshing the repositories may help:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> zypper refresh</screen>
                  <para>If that does not help, try</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> zypper refresh -fdb</screen>
                  <para>This forces a complete refresh and rebuild of the database, including a forced download of raw metadata.</para>
               </sect2>
               <sect2 xml:id="sec-zypper-rollback">
                  <title>Zypper rollback feature on Btrfs file system</title>
                  <para>If the Btrfs file system is used on the root partition and <command>snapper</command> is installed, Zypper automatically calls <command>snapper</command> when committing changes to the file system to create appropriate file system snapshots. These snapshots can be used to revert any changes made by Zypper. See <xref linkend="cha-snapper"/> for more information.</para>
               </sect2>
               <sect2 xml:id="sec-zypper-more">
                  <title>More information</title>
                  <para>For more information on managing software from the command line, enter <command>zypper help</command>, <command>zypper help </command><replaceable>COMMAND</replaceable> or refer to the <command>zypper(8)</command> man page. For a complete and detailed command reference, <literal>cheat sheets</literal> with the most important commands, and information on how to use Zypper in scripts and applications, refer to <link xlink:href="https://en.opensuse.org/SDB:Zypper_usage"/>. A list of software changes for the latest <phrase role="productname">SUSE Linux Enterprise Server</phrase> version can be found at <link xlink:href="https://en.opensuse.org/openSUSE:Zypper_versions"/>.</para>
               </sect2>
            </sect1>
            <sect1 version="5.2" xml:id="sec-rpm"><?file rpm.xml?>
               <title>RPM—the package manager</title>
               <info/>
               <para>RPM (RPM Package Manager) is used for managing software packages. Its main commands are <command>rpm</command> and <command>rpmbuild</command>. The powerful RPM database can be queried by the users, system administrators and package builders for detailed information about the installed software.</para>
               <para><command>rpm</command> has five modes: installing, uninstalling (or updating) software packages, rebuilding the RPM database, querying RPM bases or individual RPM archives, integrity checking of packages and signing packages. <command>rpmbuild</command> can be used to build installable packages from pristine sources.</para>
               <para>Installable RPM archives are packed in a special binary format. These archives consist of the program files to install and certain meta information used during the installation by <command>rpm</command> to configure the software package or stored in the RPM database for documentation purposes. RPM archives normally have the extension <filename>.rpm</filename>.</para>
               <tip>
                  <title>Software development packages</title>
                  <para>For several packages, the components needed for software development (libraries, headers, include files, etc.) have been put into separate packages. These development packages are only needed if you want to compile software yourself (for example, the most recent GNOME packages). They can be identified by the name extension <literal>-devel</literal>, such as the packages <systemitem class="resource">alsa-devel</systemitem> and <systemitem class="resource">gimp-devel</systemitem>.</para>
               </tip>
               <sect2 xml:id="sec-rpm-package-auth">
                  <title>Verifying package authenticity</title>
                  <para>RPM packages have a GPG signature. To verify the signature of an RPM package, use the command <command>rpm --checksig </command><replaceable>PACKAGE</replaceable>-1.2.3.rpm to determine whether the package originates from SUSE or from another trustworthy facility. This is especially recommended for update packages from the Internet.</para>
                  <!--taroth 2015-06-01: fix for https://bugzilla.suse.com/show_bug.cgi?id=927292-->
                  <para>While fixing issues in the operating system, you might need to install a Problem Temporary Fix (PTF) into a production system. The packages provided by SUSE are signed against a special PTF key. However, in contrast to SUSE Linux Enterprise 11, this key is not imported by default on SUSE Linux Enterprise 12 systems. To manually import the key, use the following command:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> rpm --import \
/usr/share/doc/packages/suse-build-key/suse_ptf_key.asc</screen>
                  <para>After importing the key, you can install PTF packages on your system.</para>
               </sect2>
               <sect2 xml:id="sec-rpm-packages-manage">
                  <title>Managing packages: install, update, and uninstall</title>
                  <para>Normally, the installation of an RPM archive is quite simple: <command>rpm -i</command><replaceable>PACKAGE</replaceable>.rpm. With this command the package is installed, but only if its dependencies are fulfilled and if there are no conflicts with other packages. With an error message, <command>rpm</command> requests those packages that need to be installed to meet dependency requirements. In the background, the RPM database ensures that no conflicts arise—a specific file can only belong to one package. By choosing different options, you can force <command>rpm</command> to ignore these defaults, but this is only for experts. Otherwise, you risk compromising the integrity of the system and possibly jeopardize the ability to update the system.</para>
                  <para>The options <option>-U</option> or <option>--upgrade</option> and <option>-F</option> or <option>--freshen</option> can be used to update a package (for example, <command>rpm -F</command><replaceable>PACKAGE</replaceable>.rpm). This command removes the files of the old version and immediately installs the new files. The difference between the two versions is that <option>-U</option> installs packages that previously did not exist in the system, while <option>-F</option> merely updates previously installed packages. When updating, <command>rpm</command> updates configuration files carefully using the following strategy:</para>
                  <itemizedlist mark="bullet" spacing="normal">
                     <listitem>
                        <para>If a configuration file was not changed by the system administrator, <command>rpm</command> installs the new version of the appropriate file. No action by the system administrator is required.</para>
                     </listitem>
                     <listitem>
                        <para>If a configuration file was changed by the system administrator before the update, <command>rpm</command> saves the changed file with the extension <filename>.rpmorig</filename> or <filename>.rpmsave</filename> (backup file) and installs the version from the new package. This is done only if the originally installed file and the newer version are different. If this is the case, compare the backup file (<filename>.rpmorig</filename> or <filename>.rpmsave</filename>) with the newly installed file and make your changes again in the new file. Afterward, delete all <filename>.rpmorig</filename> and <filename>.rpmsave</filename> files to avoid problems with future updates.</para>
                     </listitem>
                     <listitem>
                        <para><filename>.rpmnew</filename> files appear if the configuration file already exists <emphasis>and</emphasis> if the <option>noreplace</option> label was specified in the <filename>.spec</filename> file.</para>
                     </listitem>
                  </itemizedlist>
                  <para>Following an update, <filename>.rpmsave</filename> and <filename>.rpmnew</filename> files should be removed after comparing them, so they do not obstruct future updates. The <filename>.rpmorig</filename> extension is assigned if the file has not previously been recognized by the RPM database.</para>
                  <para>Otherwise, <filename>.rpmsave</filename> is used. In other words, <filename>.rpmorig</filename> results from updating from a foreign format to RPM. <filename>.rpmsave</filename> results from updating from an older RPM to a newer RPM. <filename>.rpmnew</filename> does not disclose any information to whether the system administrator has made any changes to the configuration file. A list of these files is available in <filename>/var/adm/rpmconfigcheck</filename>. Some configuration files (like <filename>/etc/httpd/httpd.conf</filename>) are not overwritten to allow continued operation.</para>
                  <para>The <option>-U</option> switch is <emphasis>not</emphasis> only an equivalent to uninstalling with the <option>-e</option> option and installing with the <option>-i</option> option. Use <option>-U</option> whenever possible.</para>
                  <para>To remove a package, enter <command>rpm -e</command><replaceable>PACKAGE</replaceable>. This command only deletes the package if there are no unresolved dependencies. It is theoretically impossible to delete Tcl/Tk, for example, as long as another application requires it. Even in this case, RPM calls for assistance from the database. If such a deletion is, for whatever reason, impossible (even if <emphasis>no</emphasis> additional dependencies exist), it may be helpful to rebuild the RPM database using the option <option>--rebuilddb</option>.</para>
               </sect2>
               <sect2 xml:id="sec-rpm-delta">
                  <title>Delta RPM packages</title>
                  <para>Delta RPM packages contain the difference between an old and a new version of an RPM package. Applying a delta RPM onto an old RPM results in a completely new RPM. It is not necessary to have a copy of the old RPM because a delta RPM can also work with an installed RPM. The delta RPM packages are even smaller in size than patch RPMs, which is an advantage when transferring update packages over the Internet. The drawback is that update operations with delta RPMs involved consume considerably more CPU cycles than plain or patch RPMs.</para>
                  <para>The <command>makedeltarpm</command> and <command>applydelta</command> binaries are part of the delta RPM suite (package <systemitem>deltarpm</systemitem>) and help you create and apply delta RPM packages. With the following commands, you can create a delta RPM called <filename>new.delta.rpm</filename>. The following command assumes that <filename>old.rpm</filename> and <filename>new.rpm</filename> are present:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> makedeltarpm old.rpm new.rpm new.delta.rpm</screen>
                  <para>Using <command>applydeltarpm</command>, you can reconstruct the new RPM from the file system if the old package is already installed:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> applydeltarpm new.delta.rpm new.rpm</screen>
                  <para>To derive it from the old RPM without accessing the file system, use the <option>-r</option> option:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> applydeltarpm -r old.rpm new.delta.rpm new.rpm</screen>
                  <para>See <filename>/usr/share/doc/packages/deltarpm/README</filename> for technical details.</para>
               </sect2>
               <sect2 xml:id="sec-rpm-query">
                  <title>RPM queries</title>
                  <para>With the <option>-q</option> option <command>rpm</command> initiates queries, making it possible to inspect an RPM archive (by adding the option <option>-p</option>) and to query the RPM database of installed packages. Several switches are available to specify the type of information required. See <xref linkend="tab-rpm-query"/>.</para>
                  <table xml:id="tab-rpm-query">
                     <title>Essential RPM query options</title>
                     <tgroup cols="2">
                        <tbody>
                           <row>
                              <entry><para><option>-i</option></para></entry>
                              <entry><para>Package information</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-l</option></para></entry>
                              <entry><para>File list</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-f FILE</option></para></entry>
                              <entry><para>Query the package that contains the file <replaceable>FILE</replaceable> (the full path must be specified with <replaceable>FILE</replaceable>)</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-s</option></para></entry>
                              <entry><para>File list with status information (implies <option>-l</option>)</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-d</option></para></entry>
                              <entry><para>List only documentation files (implies <literal>-l</literal>)</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-c</option></para></entry>
                              <entry><para>List only configuration files (implies <option>-l</option>)</para></entry>
                           </row>
                           <row>
                              <entry><para><option>--dump</option></para></entry>
                              <entry><para>File list with complete details (to be used with <option>-l</option>, <option>-c</option>, or <option>-d</option>)</para></entry>
                           </row>
                           <row>
                              <entry><para><option>--provides</option></para></entry>
                              <entry><para>List features of the package that another package can request with <option>--requires</option></para></entry>
                           </row>
                           <row>
                              <entry><para><option>--requires</option>, <option>-R</option></para></entry>
                              <entry><para>Capabilities the package requires</para></entry>
                           </row>
                           <row>
                              <entry><para><option>--scripts</option></para></entry>
                              <entry><para>Installation scripts (preinstall, postinstall, uninstall)</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para>For example, the command <command>rpm -q -i wget</command> displays the information shown in <xref linkend="aus-update-rpm-i"/>.</para>
                  <example xml:id="aus-update-rpm-i">
                     <title>
                        <command>rpm -q -i wget</command>
                     </title>
                     <screen><?dbsuse-fo font-size="0.70em"?>
Name        : wget
Version     : 1.14
Release     : 17.1
Architecture: x86_64
Install Date: Mon 30 Jan 2017 14:01:29 CET
Group       : Productivity/Networking/Web/Utilities
Size        : 2046483
License     : GPL-3.0+
Signature   : RSA/SHA256, Thu 08 Dec 2016 07:48:44 CET, Key ID 70af9e8139db7c82
Source RPM  : wget-1.14-17.1.src.rpm
Build Date  : Thu 08 Dec 2016 07:48:34 CET
Build Host  : sheep09
Relocations : (not relocatable)
Packager    : https://www.suse.com/
Vendor      : SUSE LLC &lt;https://www.suse.com/&gt;
URL         : http://www.gnu.org/software/wget/
Summary     : A Tool for Mirroring FTP and HTTP Servers
Description :
Wget enables you to retrieve WWW documents or FTP files from a server.
This can be done in script files or via the command line.
Distribution: SUSE Linux Enterprise 15
</screen>
                  </example>
                  <para>The option <option>-f</option> only works if you specify the complete file name with its full path. Provide as many file names as desired. For example:</para>
                  <screen><prompt>&gt;</prompt>rpm -q -f /bin/rpm /usr/bin/wget
rpm-4.14.1-lp151.13.10.x86_64
wget-1.19.5-lp151.4.1.x86_64
</screen>
                  <para>If only part of the file name is known, use a shell script as shown in <xref linkend="dat-rpm-search"/>. Pass the partial file name to the script shown as a parameter when running it.</para>
                  <example xml:id="dat-rpm-search">
                     <title>Script to search for packages</title>
                     <screen>#! /bin/sh
for i in $(rpm -q -a -l | grep $1); do
    echo "\"$i\" is in package:"
    rpm -q -f $i
    echo ""
done</screen>
                  </example>
                  <para>The command <command>rpm -q --changelog</command><replaceable>PACKAGE</replaceable> displays a detailed list of change information about a specific package, sorted by date.</para>
                  <para>With the installed RPM database, verification checks can be made. Initiate these with <option>-V</option>, or <option>--verify</option>. With this option, <command>rpm</command> shows all files in a package that have been changed since installation. <command>rpm</command> uses eight character symbols to give some hints about the following changes:</para>
                  <table xml:id="tab-rpm-verify">
                     <title>RPM verify options</title>
                     <tgroup cols="2">
                        <tbody>
                           <row>
                              <entry><para><option>5</option></para></entry>
                              <entry><para>MD5 check sum</para></entry>
                           </row>
                           <row>
                              <entry><para><option>S</option></para></entry>
                              <entry><para>File size</para></entry>
                           </row>
                           <row>
                              <entry><para><option>L</option></para></entry>
                              <entry><para>Symbolic link</para></entry>
                           </row>
                           <row>
                              <entry><para><option>T</option></para></entry>
                              <entry><para>Modification time</para></entry>
                           </row>
                           <row>
                              <entry><para><option>D</option></para></entry>
                              <entry><para>Major and minor device numbers</para></entry>
                           </row>
                           <row>
                              <entry><para><option>U</option></para></entry>
                              <entry><para>Owner</para></entry>
                           </row>
                           <row>
                              <entry><para><option>G</option></para></entry>
                              <entry><para>Group</para></entry>
                           </row>
                           <row>
                              <entry><para><option>M</option></para></entry>
                              <entry><para>Mode (permissions and file type)</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para>In the case of configuration files, the letter <option>c</option> is printed. For example, for changes to <filename>/etc/wgetrc</filename> (<systemitem class="resource">wget</systemitem> package):</para>
                  <screen><prompt>&gt;</prompt>rpm -V wget
S.5....T c /etc/wgetrc</screen>
                  <para>The files of the RPM database are placed in <filename>/var/lib/rpm</filename>. If the partition <filename>/usr</filename> has a size of 1 GB, this database can occupy nearly 30 MB, especially after a complete update. If the database is much larger than expected, it is useful to rebuild the database with the option <option>--rebuilddb</option>. Before doing this, make a backup of the old database. The <command>cron</command> script <command>cron.daily</command> makes daily copies of the database (packed with gzip) and stores them in <filename>/var/adm/backup/rpmdb</filename>. The number of copies is controlled by the variable <systemitem>MAX_RPMDB_BACKUPS</systemitem> (default: <option>5</option>) in <filename>/etc/sysconfig/backup</filename>. The size of a single backup is approximately 1 MB for 1 GB in <filename>/usr</filename>.</para>
               </sect2>
               <sect2 xml:id="sec-rpm-sources">
                  <title>Installing and compiling source packages</title>
                  <para>All source packages carry a <filename>.src.rpm</filename> extension (source RPM).</para>
                  <note>
                     <title>Installed source packages</title>
                     <para>Source packages can be copied from the installation medium to the hard disk and unpacked with YaST. They are not, however, marked as installed (<literal>[i]</literal>) in the package manager. This is because the source packages are not entered in the RPM database. Only <emphasis>installed</emphasis> operating system software is listed in the RPM database. When you <quote>install</quote> a source package, only the source code is added to the system.</para>
                  </note>
                  <para>The following directories must be available for <command>rpm</command> and <command>rpmbuild</command> in <filename>/usr/src/packages</filename> (unless you specified custom settings in a file like <filename>/etc/rpmrc</filename>):</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <filename>SOURCES</filename>
                        </term>
                        <listitem>
                           <para>for the original sources (<filename>.tar.bz2</filename> or <filename>.tar.gz</filename> files, etc.) and for distribution-specific adjustments (mostly <filename>.diff</filename> or <filename>.patch</filename> files)</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>SPECS</filename>
                        </term>
                        <listitem>
                           <para>for the <filename>.spec</filename> files, similar to a meta Makefile, which control the <emphasis>build</emphasis> process</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>BUILD</filename>
                        </term>
                        <listitem>
                           <para>all the sources are unpacked, patched and compiled in this directory</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>RPMS</filename>
                        </term>
                        <listitem>
                           <para>where the completed binary packages are stored</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>SRPMS</filename>
                        </term>
                        <listitem>
                           <para>here are the source RPMs</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>When you install a source package with YaST, all the necessary components are installed in <filename>/usr/src/packages</filename>: the sources and the adjustments in <filename>SOURCES</filename> and the relevant <filename>.spec</filename> file in <filename>SPECS</filename>.</para>
                  <warning>
                     <title>System integrity</title>
                     <para>Do not experiment with system components (<systemitem class="resource">glibc</systemitem>, <systemitem class="resource">rpm</systemitem>, etc.), because this endangers the stability of your system.</para>
                  </warning>
                  <para>The following example uses the <filename>wget.src.rpm</filename> package. After installing the source package, you should have files similar to those in the following list:</para>
                  <screen>/usr/src/packages/SOURCES/wget-1.19.5.tar.bz2
/usr/src/packages/SOURCES/wgetrc.patch
/usr/src/packages/SPECS/wget.spec</screen>
                  <para><command>rpmbuild</command><option>-b<replaceable>X</replaceable></option><filename>/usr/src/packages/SPECS/wget.spec</filename> starts the compilation. <replaceable>X</replaceable> is a wild card for various stages of the build process (see the output of <option>--help</option> or the RPM documentation for details). The following is merely a brief explanation:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <option>-bp</option>
                        </term>
                        <listitem>
                           <para>Prepare sources in <filename>/usr/src/packages/BUILD</filename>: unpack and patch.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <option>-bc</option>
                        </term>
                        <listitem>
                           <para>Do the same as <option>-bp</option>, but with additional compilation.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <option>-bi</option>
                        </term>
                        <listitem>
                           <para>Do the same as <option>-bp</option>, but with additional installation of the built software. Caution: if the package does not support the BuildRoot feature, you might overwrite configuration files.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <option>-bb</option>
                        </term>
                        <listitem>
                           <para>Do the same as <option>-bi</option>, but with the additional creation of the binary package. If the compile was successful, the binary should be in <filename>/usr/src/packages/RPMS</filename>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <option>-ba</option>
                        </term>
                        <listitem>
                           <para>Do the same as <option>-bb</option>, but with the additional creation of the source RPM. If the compilation was successful, the binary should be in <filename>/usr/src/packages/SRPMS</filename>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <option>--short-circuit</option>
                        </term>
                        <listitem>
                           <para>Skip some steps.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>The binary RPM created can now be installed with <command>rpm</command><option>-i</option> or, preferably, with <command>rpm</command><option>-U</option>. Installation with <command>rpm</command> makes it appear in the RPM database.</para>
                  <para>Keep in mind that the <literal>BuildRoot</literal> directive in the spec file is deprecated. If you still need this feature, use the <option>--buildroot</option> option as a workaround.</para>
               </sect2>
               <sect2 xml:id="sec-rpm-build">
                  <title>Compiling RPM packages with build</title>
                  <para>The danger with many packages is that unwanted files are added to the running system during the build process. To prevent this use <systemitem>build</systemitem>, which creates a defined environment in which the package is built. To establish this chroot environment, the <command>build</command> script must be provided with a complete package tree. This tree can be made available on the hard disk, via NFS, or from DVD. Set the position with <command>build --rpms</command><replaceable>DIRECTORY</replaceable>. Unlike <command>rpm</command>, the <command>build</command> command looks for the <filename>.spec</filename> file in the source directory. To build <filename>wget</filename> (like in the above example) with the DVD mounted in the system under <filename>/media/dvd</filename>, use the following commands as <systemitem class="username">root</systemitem>:</para>
                  <screen><prompt role="root">#</prompt>cd /usr/src/packages/SOURCES/
<prompt role="root">#</prompt>mv ../SPECS/wget.spec .
<prompt role="root">#</prompt>build --rpms /media/dvd/suse/ wget.spec</screen>
                  <para>Subsequently, a minimum environment is established at <filename>/var/tmp/build-root</filename>. The package is built in this environment. Upon completion, the resulting packages are located in <filename>/var/tmp/build-root/usr/src/packages/RPMS</filename>.</para>
                  <para>The <command>build</command> script offers several additional options. For example, cause the script to prefer your own RPMs, omit the initialization of the build environment or limit the <command>rpm</command> command to one of the above-mentioned stages. Access additional information with <command>build</command><option>--help</option> and by reading the <command>build</command> man page.</para>
               </sect2>
               <sect2 xml:id="sec-rpm-tools">
                  <title>Tools for RPM archives and the RPM database</title>
                  <para>Midnight Commander (<command>mc</command>) can display the contents of RPM archives and copy parts of them. It represents archives as virtual file systems, offering all usual menu options of Midnight Commander. Display the <filename>HEADER</filename> with <keycap>F3</keycap>. View the archive structure with the cursor keys and <keycap function="enter"/>. Copy archive components with <keycap>F5</keycap>.</para>
                  <para>A full-featured package manager is available as a YaST module. For details, see <xref linkend="cha-yast-software"/>.</para>
                  <!--
  -->
               </sect2>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-snapper"><?file snapper.xml?>
            <title>System recovery and snapshot management with Snapper</title>
            <info>
               <abstract>
                  <para>Snapper allows creating and managing file system snapshots. File system snapshots allow keeping a copy of the state of a file system at a certain point of time. The standard setup of Snapper is designed to allow rolling back system changes. However, you can also use it to create on-disk backups of user data. As the basis for this functionality, Snapper uses the Btrfs file system or thinly provisioned LVM volumes with an XFS or Ext4 file system.</para>
               </abstract>
            </info>
            <para>Snapper has a command line interface and a YaST interface. Snapper lets you create and manage file system snapshots on the following types of file systems:</para>
            <itemizedlist>
               <listitem>
                  <para>Btrfs, a copy-on-write file system for Linux that natively supports file system snapshots of subvolumes. (Subvolumes are separately mountable file systems within a physical partition.)</para>
                  <para>You can also boot from <literal>Btrfs</literal> snapshots. For more information, see <xref linkend="sec-snapper-snapshot-boot"/>.</para>
               </listitem>
               <listitem>
                  <para>Thinly provisioned LVM volumes formatted with XFS or Ext4.</para>
               </listitem>
            </itemizedlist>
            <para>Using Snapper, you can perform the following tasks:</para>
            <itemizedlist mark="bullet" spacing="normal">
               <listitem>
                  <para>Undo system changes made by <command>zypper</command> and YaST. See <xref linkend="sec-snapper-undo"/> for details.</para>
               </listitem>
               <listitem>
                  <para>Restore files from previous snapshots. See <xref linkend="sec-snapper-undo-delete-file"/> for details.</para>
               </listitem>
               <listitem>
                  <para>Do a system rollback by booting from a snapshot. See <xref linkend="sec-snapper-snapshot-boot"/> for details.</para>
               </listitem>
               <listitem>
                  <para>Manually create and manage snapshots, within the running system. See <xref linkend="sec-snapper-manage"/> for details.</para>
               </listitem>
            </itemizedlist>
            <sect1 xml:id="sec-snapper-setup">
               <title>Default setup</title>
               <para>Snapper on <phrase role="productname">SUSE Linux Enterprise Server</phrase> is set up as an undo and recovery tool for system changes. By default, the root partition (<filename>/</filename>) of <phrase role="productname">SUSE Linux Enterprise Server</phrase> is formatted with <literal>Btrfs</literal>. Taking snapshots is automatically enabled if the root partition (<filename>/</filename>) is big enough (more than approximately 16 GB). By default, snapshots are disabled on partitions other than <filename>/</filename>.</para>
               <tip>
                  <title>Enabling Snapper in the installed system</title>
                  <para>If you disabled Snapper during the installation, you can enable it at any time later. To do so, create a default Snapper configuration for the root file system by running:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c root create-config /</screen>
                  <para>Afterward enable the different snapshot types as described in <xref linkend="sec-snapper-setup-customize-auto-snapshots"/>.</para>
                  <para>On a Btrfs root file system, snapshots require a file system with subvolumes configured as proposed by the installer and a partition size of at least 16 GB.</para>
               </tip>
               <para>When a snapshot is created, both the snapshot and the original point to the same blocks in the file system. So, initially a snapshot does not occupy additional disk space. If data in the original file system is modified, changed data blocks are copied while the old data blocks are kept for the snapshot. Therefore, a snapshot occupies the same amount of space as the data modified. So, over time, the amount of space a snapshot allocates, constantly grows. As a consequence, deleting files from a <literal>Btrfs</literal> file system containing snapshots may <emphasis>not</emphasis> free disk space.</para>
               <note>
                  <title>Snapshot location</title>
                  <para>Snapshots always reside on the same partition or subvolume on which the snapshot has been taken. It is not possible to store snapshots on a different partition or subvolume.</para>
               </note>
               <para>As a result, partitions containing snapshots need to be larger than partitions not containing snapshots. The exact amount depends strongly on the number of snapshots you keep and the amount of data modifications. As a rule of thumb, give partitions twice as much space as you normally would. To prevent disks from running out of space, old snapshots are automatically cleaned up. Refer to <xref linkend="sec-snapper-setup-customize-archiving"/> for details.</para>
               <sect2 xml:id="snapper-default-settings">
                  <title>Default settings</title>
                  <variablelist>
                     <varlistentry>
                        <term>Disks larger than 16 GB</term>
                        <listitem>
                           <itemizedlist>
                              <listitem>
                                 <para>Configuration file: <filename>/etc/snapper/configs/root</filename></para>
                              </listitem>
                              <listitem>
                                 <para><literal>USE_SNAPPER=yes</literal></para>
                              </listitem>
                              <listitem>
                                 <para><literal>TIMELINE_CREATE=no</literal></para>
                              </listitem>
                           </itemizedlist>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Disks smaller than 16 GB</term>
                        <listitem>
                           <itemizedlist>
                              <listitem>
                                 <para>Configuration file: not created</para>
                              </listitem>
                              <listitem>
                                 <para><literal>USE_SNAPPER=no</literal></para>
                              </listitem>
                              <listitem>
                                 <para><literal>TIMELINE_CREATE=yes</literal></para>
                              </listitem>
                           </itemizedlist>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="snapper-snapshot-type">
                  <title>Types of snapshots</title>
                  <para>Although snapshots themselves do not differ in a technical sense, we distinguish between three types of snapshots, based on the events that trigger them:</para>
                  <variablelist>
                     <varlistentry>
                        <term>Timeline snapshots</term>
                        <listitem>
                           <para>A single snapshot is created every hour. Using the YaST OS installation method (default), timeline snapshots are enabled, except for the root file system. You can configure timeline snapshots to be taken at different intervals: hourly, daily, weekly, monthly and yearly. Old snapshots are automatically deleted. By default, the first snapshot of the last ten days, months and years is kept.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Installation snapshots</term>
                        <listitem>
                           <para>Whenever one or more packages are installed with Zypper or YaST, three installation snapshots are created. In case an important system component such as the kernel has been installed, the snapshot pair is marked as important. Old snapshots are automatically deleted. Installation snapshots are enabled by default.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Administration snapshots</term>
                        <listitem>
                           <para>Whenever you make changes to the system using Zypper or YaST, a pair of snapshots is created: one prior to the system change (<quote>pre</quote>) and the other one after the system change (<quote>post</quote>). Old snapshots are automatically deleted. Administration snapshots are enabled by default.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="snapper-dir-excludes">
                  <title>Directories that are excluded from snapshots</title>
                  <para>Certain directories need to be excluded from snapshots for different reasons. The following list shows all directories that are excluded:</para>
                  <variablelist version="5.2"><?file snapshot_excludes_i.xml?>
                     <info/>
                     <varlistentry>
                        <term>
                           <filename>/boot/grub2/i386-pc</filename>, <filename>/boot/grub2/x86_64-efi</filename>, <filename>/boot/grub2/powerpc-ieee1275</filename>, <filename>/boot/grub2/s390x-emu</filename>
                        </term>
                        <listitem>
                           <para>A rollback of the boot loader configuration is not supported. The directories listed above are architecture-specific. The first two directories are present on AMD64/Intel 64 machines, the latter two on IBM POWER and on IBM Z, respectively.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/home</filename>
                        </term>
                        <listitem>
                           <para>If <filename>/home</filename> does not reside on a separate partition, it is excluded to avoid data loss on rollbacks.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/opt</filename>
                        </term>
                        <listitem>
                           <para>Third-party products usually get installed to <filename>/opt</filename>. It is excluded to avoid uninstalling these applications on rollbacks.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/srv</filename>
                        </term>
                        <listitem>
                           <para>Contains data for Web and FTP servers. It is excluded to avoid data loss on rollbacks.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/tmp</filename>
                        </term>
                        <listitem>
                           <para>All directories containing temporary files and caches are excluded from snapshots.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/usr/local</filename>
                        </term>
                        <listitem>
                           <para>This directory is used when manually installing software. It is excluded to avoid uninstalling these installations on rollbacks.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <filename>/var</filename>
                        </term>
                        <listitem>
                           <para>This directory contains many variable files, including logs, temporary caches, third party products in <filename>/var/opt</filename>, and is the default location for virtual machine images and databases. Therefore this subvolume is created to exclude all of this variable data from snapshots and has Copy-On-Write disabled.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="sec-snapper-setup-customize">
                  <title>Customizing the setup</title>
                  <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> comes with a reasonable default setup, which should be sufficient for most use cases. However, all aspects of taking automatic snapshots and snapshot keeping can be configured according to your needs.</para>
                  <sect3 xml:id="sec-snapper-setup-customize-auto-snapshots">
                     <title>Disabling/enabling snapshots</title>
                     <para>Each of the three snapshot types (timeline, installation, administration) can be enabled or disabled independently.</para>
                     <variablelist>
                        <varlistentry>
                           <term>Disabling/enabling timeline snapshots</term>
                           <listitem>
                              <formalpara>
                                 <title>Enabling</title>
                                 <para><command>snapper -c root set-config "TIMELINE_CREATE=yes"</command></para>
                              </formalpara>
                              <formalpara>
                                 <title>Disabling</title>
                                 <para><command>snapper -c root set-config "TIMELINE_CREATE=no"</command></para>
                              </formalpara>
                              <para>Using the YaST OS installation method (default), timeline snapshots are enabled, except for the root file system.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Disabling/enabling installation snapshots</term>
                           <listitem>
                              <formalpara>
                                 <title>Enabling:</title>
                                 <para>Install the package <systemitem class="resource">snapper-zypp-plugin</systemitem></para>
                              </formalpara>
                              <formalpara>
                                 <title>Disabling:</title>
                                 <para>Uninstall the package <systemitem class="resource">snapper-zypp-plugin</systemitem></para>
                              </formalpara>
                              <para>Installation snapshots are enabled by default.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Disabling/enabling administration snapshots</term>
                           <listitem>
                              <formalpara>
                                 <title>Enabling:</title>
                                 <para>Set <envar>USE_SNAPPER</envar> to <literal>yes</literal> in <filename>/etc/sysconfig/yast2</filename>.</para>
                              </formalpara>
                              <formalpara>
                                 <title>Disabling:</title>
                                 <para>Set <envar>USE_SNAPPER</envar> to <literal>no</literal> in <filename>/etc/sysconfig/yast2</filename>.</para>
                              </formalpara>
                              <para>Administration snapshots are enabled by default.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3 xml:id="sec-snapper-setup-customize-inst-snapshots">
                     <title>Controlling installation snapshots</title>
                     <para>Taking snapshot pairs upon installing packages with YaST or Zypper is handled by the <systemitem class="resource">snapper-zypp-plugin</systemitem>. An XML configuration file, <filename>/etc/snapper/zypp-plugin.conf</filename> defines, when to make snapshots. By default the file looks like the following:</para>
                     <screen> 1 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 2 &lt;snapper-zypp-plugin-conf&gt;
 3  &lt;solvables&gt;
 4   &lt;solvable match="w"<co xml:id="zypp-conf-match"/> important="true"<co xml:id="zypp-conf-important"/>&gt;kernel-*<co xml:id="zypp-conf-kernel"/>&lt;/solvable&gt;
 5   &lt;solvable match="w" important="true"&gt;dracut&lt;/solvable&gt;
 6   &lt;solvable match="w" important="true"&gt;glibc&lt;/solvable&gt;
 7   &lt;solvable match="w" important="true"&gt;systemd*&lt;/solvable&gt;
 8   &lt;solvable match="w" important="true"&gt;udev&lt;/solvable&gt;
 9   &lt;solvable match="w"&gt;*&lt;/solvable&gt;<co xml:id="zypp-conf-packages"/>
10  &lt;/solvables&gt;
11 &lt;/snapper-zypp-plugin-conf&gt;</screen>
                     <calloutlist>
                        <callout arearefs="zypp-conf-match">
                           <para>The match attribute defines whether the pattern is a Unix shell-style wild card (<literal>w</literal>) or a Python regular expression (<literal>re</literal>).</para>
                        </callout>
                        <callout arearefs="zypp-conf-important">
                           <para>If the given pattern matches and the corresponding package is marked as important (for example, kernel packages), the snapshot is also marked as important.</para>
                        </callout>
                        <callout arearefs="zypp-conf-kernel">
                           <para>Pattern to match a package name. Based on the setting of the <literal>match</literal> attribute, special characters are either interpreted as shell wild cards or regular expressions. This pattern matches all package names starting with <literal>kernel-</literal>.</para>
                        </callout>
                        <callout arearefs="zypp-conf-packages">
                           <para>This line unconditionally matches all packages.</para>
                        </callout>
                     </calloutlist>
                     <para>With this configuration snapshot, pairs are made whenever a package is installed (line 9). When the kernel, dracut, glibc, systemd or udev packages marked as important are installed, the snapshot pair is also marked as important (lines 4 to 8). All rules are evaluated.</para>
                     <para>To disable a rule, either delete it or deactivate it using XML comments. To prevent the system from making snapshot pairs for every package installation for example, comment line 9:</para>
                     <screen> 1 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 2 &lt;snapper-zypp-plugin-conf&gt;
 3  &lt;solvables&gt;
 4   &lt;solvable match="w" important="true"&gt;kernel-*&lt;/solvable&gt;
 5   &lt;solvable match="w" important="true"&gt;dracut&lt;/solvable&gt;
 6   &lt;solvable match="w" important="true"&gt;glibc&lt;/solvable&gt;
 7   &lt;solvable match="w" important="true"&gt;systemd*&lt;/solvable&gt;
 8   &lt;solvable match="w" important="true"&gt;udev&lt;/solvable&gt;
 9   &lt;!-- &lt;solvable match="w"&gt;*&lt;/solvable&gt; --&gt;
10  &lt;/solvables&gt;
11 &lt;/snapper-zypp-plugin-conf&gt;</screen>
                  </sect3>
                  <sect3 xml:id="sec-snapper-setup-customizing-new-subvolume">
                     <title>Creating and mounting new subvolumes</title>
                     <para>Creating a new subvolume underneath the <filename>/</filename> hierarchy and permanently mounting it is supported. Such a subvolume is excluded from snapshots. You need to make sure not to create it inside an existing snapshot, since you would not be able to delete snapshots anymore after a rollback.</para>
                     <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> is configured with the <filename>/@/</filename> subvolume which serves as an independent root for permanent subvolumes such as <filename>/opt</filename>, <filename>/srv</filename>, <filename>/home</filename> and others. Any new subvolumes you create and permanently mount need to be created in this initial root file system.</para>
                     <para>To do so, run the following commands. In this example, a new subvolume <filename>/usr/important</filename> is created from <filename>/dev/sda2</filename>.</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> mount /dev/sda2 -o subvol=@ /mnt
<prompt>&gt;</prompt><command>sudo</command> btrfs subvolume create /mnt/usr/important
<prompt>&gt;</prompt><command>sudo</command> umount /mnt</screen>
                     <para>The corresponding entry in <filename>/etc/fstab</filename> needs to look like the following:</para>
                     <screen>/dev/sda2 /usr/important btrfs subvol=@/usr/important 0 0</screen>
                     <tip>
                        <title>Disable copy-on-write (cow)</title>
                        <para>A subvolume may contain files that constantly change, such as virtualized disk images, database files, or log files. If so, consider disabling the copy-on-write feature for this volume, to avoid duplication of disk blocks. Use the <option>nodatacow</option> mount option in <filename>/etc/fstab</filename> to do so:</para>
                        <screen>/dev/sda2 /usr/important btrfs nodatacow,subvol=@/usr/important 0 0</screen>
                        <para>To alternatively disable copy-on-write for single files or directories, use the command <command>chattr +C <replaceable>PATH</replaceable></command>.</para>
                     </tip>
                  </sect3>
                  <sect3 xml:id="sec-snapper-setup-customize-archiving">
                     <title>Controlling snapshot archiving</title>
                     <para>Snapshots occupy disk space. To prevent disks from running out of space and thus causing system outages, old snapshots are automatically deleted. By default, up to ten important installation and administration snapshots and up to ten regular installation and administration snapshots are kept. If these snapshots occupy more than 50% of the root file system size, additional snapshots are deleted. A minimum of four important and two regular snapshots are always kept.</para>
                     <para>Refer to <xref linkend="sec-snapper-config-modify"/> for instructions on how to change these values.</para>
                  </sect3>
                  <sect3 xml:id="sec-snapper-lvm">
                     <title>Using Snapper on thinly provisioned LVM volumes</title>
                     <para>Apart from snapshots on <literal>Btrfs</literal> file systems, Snapper also supports taking snapshots on thinly provisioned LVM volumes (snapshots on regular LVM volumes are <emphasis>not</emphasis> supported) formatted with XFS, Ext4 or Ext3. For more information and setup instructions on LVM volumes, refer to <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Deployment Guide</quote>, </phrase><xref linkend="sec-yast-system-lvm" xrefstyle="%label &#34;%c&#34;"/>.</para>
                     <para>To use Snapper on a thinly provisioned LVM volume, you need to create a Snapper configuration for it. On LVM it is required to specify the file system with <option>--fstype=lvm(<replaceable>FILESYSTEM</replaceable>)</option>. <literal>ext3</literal>, <literal>etx4</literal> or <literal>xfs</literal> are valid values for <replaceable>FILESYSTEM</replaceable>. Example:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c lvm create-config --fstype="lvm(xfs)" /thin_lvm</screen>
                     <para>You can adjust this configuration according to your needs as described in <xref linkend="sec-snapper-config-modify"/>.</para>
                  </sect3>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-snapper-undo">
               <title>Using Snapper to undo changes</title>
               <para>Snapper on <phrase role="productname">SUSE Linux Enterprise Server</phrase> is preconfigured to serve as a tool that lets you undo changes made by <command>zypper</command> and YaST. For this purpose, Snapper is configured to create a pair of snapshots before and after each run of <command>zypper</command> and YaST. Snapper also lets you restore system files that have been accidentally deleted or modified. Timeline snapshots for the root partition need to be enabled for this purpose—see <xref linkend="sec-snapper-setup-customize-auto-snapshots"/> for details.</para>
               <para>By default, automatic snapshots as described above are configured for the root partition and its subvolumes. To make snapshots available for other partitions such as <filename>/home</filename> for example, you can create custom configurations.</para>
               <important>
                  <title>Undoing changes compared to rollback</title>
                  <para>When working with snapshots to restore data, it is important to know that there are two fundamentally different scenarios Snapper can handle:</para>
                  <variablelist>
                     <varlistentry>
                        <term>Undoing changes</term>
                        <listitem>
                           <para>When undoing changes as described in the following, two snapshots are being compared and the changes between these two snapshots are made undone. Using this method also allows to explicitly select the files that should be restored.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Rollback</term>
                        <listitem>
                           <para>When doing rollbacks as described in <xref linkend="sec-snapper-snapshot-boot"/>, the system is reset to the state at which the snapshot was taken.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>When undoing changes, it is also possible to compare a snapshot against the current system. When restoring <emphasis>all</emphasis> files from such a comparison, this will have the same result as doing a rollback. However, using the method described in <xref linkend="sec-snapper-snapshot-boot"/> for rollbacks should be preferred, since it is faster and allows you to review the system before doing the rollback.</para>
               </important>
               <warning>
                  <title>Data consistency</title>
                  <para>There is no mechanism to ensure data consistency when creating a snapshot. Whenever a file (for example, a database) is written at the same time as the snapshot is being created, it will result in a corrupted or partly written file. Restoring such a file will cause problems. Furthermore, certain system files such as <filename>/etc/mtab</filename> must never be restored. Therefore it is strongly recommended to <emphasis>always</emphasis> closely review the list of changed files and their diffs. Only restore files that really belong to the action you want to revert.</para>
               </warning>
               <sect2 xml:id="sec-snapper-undo-yast">
                  <title>Undoing YaST and Zypper changes</title>
                  <para>If you set up the root partition with <literal>Btrfs</literal> during the installation, Snapper—preconfigured for doing rollbacks of YaST or Zypper changes—will automatically be installed. Every time you start a YaST module or a Zypper transaction, two snapshots are created: a <quote>pre-snapshot</quote> capturing the state of the file system before the start of the module and a <quote>post-snapshot</quote> after the module has been finished.</para>
                  <para>Using the YaST Snapper module or the <command>snapper</command> command line tool, you can undo the changes made by YaST/Zypper by restoring files from the <quote>pre-snapshot</quote>. Comparing two snapshots the tools also allow you to see which files have been changed. You can also display the differences between two versions of a file (diff).</para>
                  <procedure xml:id="proc-snapper-undo-yast">
                     <title>Undoing changes using the YaST <guimenu>Snapper</guimenu> module</title>
                     <step>
                        <para>Start the <guimenu>Snapper</guimenu> module from the <guimenu>Miscellaneous</guimenu> section in YaST or by entering <command>yast2 snapper</command>.</para>
                     </step>
                     <step>
                        <para>Make sure <guimenu>Current Configuration</guimenu> is set to <guimenu>root</guimenu>. This is always the case unless you have manually added own Snapper configurations.</para>
                     </step>
                     <step>
                        <para>Choose a pair of pre- and post-snapshots from the list. Both, YaST and Zypper snapshot pairs are of the type <guimenu>Pre &amp; Post</guimenu>. YaST snapshots are labeled as <literal>zypp(y2base)</literal> in the <guimenu>Description column</guimenu>; Zypper snapshots are labeled <literal>zypp(zypper)</literal>.</para>
                        <informalfigure>
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/snapper_yast2_list.png" width="69%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/snapper_yast2_list.png" width="69%"/>
                              </imageobject>
                           </mediaobject>
                        </informalfigure>
                     </step>
                     <step>
                        <para>Click <guimenu>Show Changes</guimenu> to open the list of files that differ between the two snapshots.</para>
                        <informalfigure>
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/snapper_yast2_changes.png" width="69%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/snapper_yast2_changes.png" width="69%"/>
                              </imageobject>
                           </mediaobject>
                        </informalfigure>
                     </step>
                     <step>
                        <para>Review the list of files. To display a <quote>diff</quote> between the pre- and post-version of a file, select it from the list.</para>
                        <informalfigure>
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/snapper_yast2_diff.png" width="59%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/snapper_yast2_diff.png" width="69%"/>
                              </imageobject>
                           </mediaobject>
                        </informalfigure>
                     </step>
                     <step>
                        <para>To restore one or more files, select the relevant files or directories by activating the respective check box. Click <guimenu>Restore Selected</guimenu> and confirm the action by clicking <guimenu>Yes</guimenu>.</para>
                        <informalfigure>
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/snapper_yast2_restore.png" width="69%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/snapper_yast2_restore.png" width="69%"/>
                              </imageobject>
                           </mediaobject>
                        </informalfigure>
                        <para>To restore a single file, activate its diff view by clicking its name. Click <guimenu>Restore From First</guimenu> and confirm your choice with <guimenu>Yes</guimenu>.</para>
                     </step>
                  </procedure>
                  <procedure xml:id="proc-snapper-yast-cmdline">
                     <title>Undoing changes using the <command>snapper</command> command</title>
                     <step>
                        <para>Get a list of YaST and Zypper snapshots by running <command>snapper list -t pre-post</command>. YaST snapshots are labeled as <literal>yast <replaceable>MODULE_NAME</replaceable></literal> in the <guimenu>Description column</guimenu>; Zypper snapshots are labeled <literal>zypp(zypper)</literal>.</para>
                        <screen><?dbsuse-fo font-size="0.60em"?><prompt>&gt;</prompt><command>sudo</command> snapper list -t pre-post
Pre # | Post # | Pre Date                      | Post Date                     | Description
------+--------+-------------------------------+-------------------------------+--------------
311   | 312    | Tue 06 May 2018 14:05:46 CEST | Tue 06 May 2018 14:05:52 CEST | zypp(y2base)
340   | 341    | Wed 07 May 2018 16:15:10 CEST | Wed 07 May 2018 16:15:16 CEST | zypp(zypper)
342   | 343    | Wed 07 May 2018 16:20:38 CEST | Wed 07 May 2018 16:20:42 CEST | zypp(y2base)
344   | 345    | Wed 07 May 2018 16:21:23 CEST | Wed 07 May 2018 16:21:24 CEST | zypp(zypper)
346   | 347    | Wed 07 May 2018 16:41:06 CEST | Wed 07 May 2018 16:41:10 CEST | zypp(y2base)
348   | 349    | Wed 07 May 2018 16:44:50 CEST | Wed 07 May 2018 16:44:53 CEST | zypp(y2base)
350   | 351    | Wed 07 May 2018 16:46:27 CEST | Wed 07 May 2018 16:46:38 CEST | zypp(y2base) </screen>
                     </step>
                     <step>
                        <para>Get a list of changed files for a snapshot pair with <command>snapper status</command><replaceable>PRE</replaceable>..<replaceable>POST</replaceable>. Files with content changes are marked with <guimenu>c</guimenu>, files that have been added are marked with <guimenu>+</guimenu> and deleted files are marked with <guimenu>-</guimenu>.</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> snapper status 350..351
+..... /usr/share/doc/packages/mikachan-fonts
+..... /usr/share/doc/packages/mikachan-fonts/COPYING
+..... /usr/share/doc/packages/mikachan-fonts/dl.html
c..... /usr/share/fonts/truetype/fonts.dir
c..... /usr/share/fonts/truetype/fonts.scale
+..... /usr/share/fonts/truetype/みかちゃん-p.ttf
+..... /usr/share/fonts/truetype/みかちゃん-pb.ttf
+..... /usr/share/fonts/truetype/みかちゃん-ps.ttf
+..... /usr/share/fonts/truetype/みかちゃん.ttf
c..... /var/cache/fontconfig/7ef2298fde41cc6eeb7af42e48b7d293-x86_64.cache-4
c..... /var/lib/rpm/Basenames
c..... /var/lib/rpm/Dirnames
c..... /var/lib/rpm/Group
c..... /var/lib/rpm/Installtid
c..... /var/lib/rpm/Name
c..... /var/lib/rpm/Packages
c..... /var/lib/rpm/Providename
c..... /var/lib/rpm/Requirename
c..... /var/lib/rpm/Sha1header
c..... /var/lib/rpm/Sigmd5</screen>
                     </step>
                     <step>
                        <para>To display the diff for a certain file, run <command>snapper diff</command><replaceable>PRE</replaceable>..<replaceable>POST</replaceable><replaceable>FILENAME</replaceable>. If you do not specify <replaceable>FILENAME</replaceable>, a diff for all files will be displayed.</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> snapper diff 350..351 /usr/share/fonts/truetype/fonts.scale
--- /.snapshots/350/snapshot/usr/share/fonts/truetype/fonts.scale       2014-04-23 15:58:57.000000000 +0200
+++ /.snapshots/351/snapshot/usr/share/fonts/truetype/fonts.scale       2014-05-07 16:46:31.000000000 +0200
@@ -1,4 +1,4 @@
-1174
+1486
 ds=y:ai=0.2:luximr.ttf -b&amp;h-luxi mono-bold-i-normal--0-0-0-0-c-0-iso10646-1
 ds=y:ai=0.2:luximr.ttf -b&amp;h-luxi mono-bold-i-normal--0-0-0-0-c-0-iso8859-1
[...]</screen>
                     </step>
                     <step>
                        <para>To restore one or more files run <command>snapper -v undochange</command><replaceable>PRE</replaceable>..<replaceable>POST</replaceable><replaceable>FILENAMES</replaceable>. If you do not specify a <replaceable>FILENAMES</replaceable>, all changed files will be restored.</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> snapper -v undochange 350..351
     create:0 modify:13 delete:7
     undoing change...
     deleting /usr/share/doc/packages/mikachan-fonts
     deleting /usr/share/doc/packages/mikachan-fonts/COPYING
     deleting /usr/share/doc/packages/mikachan-fonts/dl.html
     deleting /usr/share/fonts/truetype/みかちゃん-p.ttf
     deleting /usr/share/fonts/truetype/みかちゃん-pb.ttf
     deleting /usr/share/fonts/truetype/みかちゃん-ps.ttf
     deleting /usr/share/fonts/truetype/みかちゃん.ttf
     modifying /usr/share/fonts/truetype/fonts.dir
     modifying /usr/share/fonts/truetype/fonts.scale
     modifying /var/cache/fontconfig/7ef2298fde41cc6eeb7af42e48b7d293-x86_64.cache-4
     modifying /var/lib/rpm/Basenames
     modifying /var/lib/rpm/Dirnames
     modifying /var/lib/rpm/Group
     modifying /var/lib/rpm/Installtid
     modifying /var/lib/rpm/Name
     modifying /var/lib/rpm/Packages
     modifying /var/lib/rpm/Providename
     modifying /var/lib/rpm/Requirename
     modifying /var/lib/rpm/Sha1header
     modifying /var/lib/rpm/Sigmd5
     undoing change done</screen>
                     </step>
                  </procedure>
                  <warning>
                     <title>Reverting user additions</title>
                     <para>Reverting user additions via undoing changes with Snapper is not recommended. Since certain directories are excluded from snapshots, files belonging to these users will remain in the file system. If a user with the same user ID as a deleted user is created, this user will inherit the files. Therefore it is strongly recommended to use the YaST <guimenu>User and Group Management</guimenu> tool to remove users.</para>
                  </warning>
               </sect2>
               <sect2 xml:id="sec-snapper-undo-delete-file">
                  <title>Using Snapper to restore files</title>
                  <para>Apart from the installation and administration snapshots, Snapper creates timeline snapshots. You can use these backup snapshots to restore files that have accidentally been deleted or to restore a previous version of a file. By using Snapper's diff feature you can also find out which modifications have been made at a certain point of time.</para>
                  <para>Being able to restore files is especially interesting for data, which may reside on subvolumes or partitions for which snapshots are not taken by default. To be able to restore files from home directories, for example, create a separate Snapper configuration for <filename>/home</filename> doing automatic timeline snapshots. See <xref linkend="sec-snapper-config"/> for instructions.</para>
                  <warning>
                     <title>Restoring files compared to rollback</title>
                     <para>Snapshots taken from the root file system (defined by Snapper's root configuration), can be used to do a system rollback. The recommended way to do such a rollback is to boot from the snapshot and then perform the rollback. See <xref linkend="sec-snapper-snapshot-boot"/> for details.</para>
                     <para>Performing a rollback would also be possible by restoring all files from a root file system snapshot as described below. However, this is not recommended. You may restore single files, for example, a configuration file from the <systemitem>/etc</systemitem> directory, but not the complete list of files from the snapshot.</para>
                     <para>This restriction only affects snapshots taken from the root file system.</para>
                  </warning>
                  <procedure xml:id="proc-snapper-restore-yast">
                     <title>Restoring files using the YaST <guimenu>Snapper</guimenu> module</title>
                     <step>
                        <para>Start the <guimenu>Snapper</guimenu> module from the <guimenu>Miscellaneous</guimenu> section in YaST or by entering <command>yast2 snapper</command>.</para>
                     </step>
                     <step>
                        <para>Choose the <guimenu>Current Configuration</guimenu> from which to choose a snapshot.</para>
                     </step>
                     <step>
                        <para>Select a timeline snapshot from which to restore a file and choose <guimenu>Show Changes</guimenu>. Timeline snapshots are of the type <guimenu>Single</guimenu> with a description value of <guimenu>timeline</guimenu>.</para>
                     </step>
                     <step>
                        <para>Select a file from the text box by clicking the file name. The difference between the snapshot version and the current system is shown. Activate the check box to select the file for restore. Do so for all files you want to restore.</para>
                     </step>
                     <step>
                        <para>Click <guimenu>Restore Selected</guimenu> and confirm the action by clicking <guimenu>Yes</guimenu>.</para>
                     </step>
                  </procedure>
                  <procedure xml:id="proc-snapper-restore-cmdl">
                     <title>Restoring files using the <command>snapper</command> command</title>
                     <step>
                        <para>Get a list of timeline snapshots for a specific configuration by running the following command:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> list -t single | grep timeline</screen>
                        <para><replaceable>CONFIG</replaceable> needs to be replaced by an existing Snapper configuration. Use <command>snapper list-configs</command> to display a list.</para>
                     </step>
                     <step>
                        <para>Get a list of changed files for a given snapshot by running the following command:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> status <replaceable>SNAPSHOT_ID</replaceable>..0</screen>
                        <para>Replace <replaceable>SNAPSHOT_ID</replaceable> by the ID for the snapshot from which you want to restore the files.</para>
                     </step>
                     <step>
                        <para>Optionally list the differences between the current file version and the one from the snapshot by running</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> diff <replaceable>SNAPSHOT_ID</replaceable>..0 <replaceable>FILE NAME</replaceable></screen>
                        <para>If you do not specify <replaceable>&lt;FILE NAME&gt;</replaceable>, the difference for all files are shown.</para>
                     </step>
                     <step>
                        <para>To restore one or more files, run</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> -v undochange <replaceable>SNAPSHOT_ID</replaceable>..0 <replaceable>FILENAME1</replaceable><replaceable>FILENAME2</replaceable></screen>
                        <para>If you do not specify file names, all changed files will be restored.</para>
                     </step>
                  </procedure>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-snapper-snapshot-boot">
               <title>System rollback by booting from snapshots</title>
               <para>The GRUB 2 version included on <phrase role="productname">SUSE Linux Enterprise Server</phrase> can boot from Btrfs snapshots. Together with Snapper's rollback feature, this allows to recover a misconfigured system. Only snapshots created for the default Snapper configuration (<literal>root</literal>) are bootable.</para>
               <important>
                  <title>Supported configuration</title>
                  <para><!-- fs 2016-06-17: This will change with SP3 - see FATE #316347 --> As of <phrase role="productname">SUSE Linux Enterprise Server</phrase><phrase role="productnumber">15 SP7</phrase> system rollbacks are only supported if the default subvolume configuration of the root partition has not been changed.</para>
               </important>
               <para>When booting a snapshot, the parts of the file system included in the snapshot are mounted read-only; all other file systems and parts that are excluded from snapshots are mounted read-write and can be modified.</para>
               <important>
                  <title>Undoing changes compared to rollback</title>
                  <para>When working with snapshots to restore data, it is important to know that there are two fundamentally different scenarios Snapper can handle:</para>
                  <variablelist>
                     <varlistentry>
                        <term>Undoing changes</term>
                        <listitem>
                           <para>When undoing changes as described in <xref linkend="sec-snapper-undo"/>, two snapshots are compared and the changes between these two snapshots are reverted. Using this method also allows to explicitly exclude selected files from being restored.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Rollback</term>
                        <listitem>
                           <para>When doing rollbacks as described in the following, the system is reset to the state at which the snapshot was taken.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </important>
               <para>To do a rollback from a bootable snapshot, the following requirements must be met. When doing a default installation, the system is set up accordingly.</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <title>Requirements for a rollback from a bootable snapshot</title>
                  <listitem>
                     <para>The root file system needs to be Btrfs. Booting from LVM volume snapshots is not supported.</para>
                  </listitem>
                  <listitem>
                     <para>The root file system needs to be on a single device. To check, run <command>sudo /sbin/btrfs filesystem show</command>. It needs to report <literal>Total devices 1</literal>. If more than <literal>1</literal> device is listed, your setup is not supported.</para>
                     <note>
                        <title>Directories excluded from snapshots</title>
                        <para>Directories that are excluded from snapshots such as <filename>/srv</filename> (see <xref linkend="snapper-dir-excludes"/> for a full list) may reside on separate devices.</para>
                     </note>
                  </listitem>
                  <listitem>
                     <para>The system needs to be bootable via the installed boot loader.</para>
                  </listitem>
                  <listitem>
                     <para>Only contents of the subvolume <filename>/</filename> will be rolled back. It is not possible to include other subvolumes.</para>
                  </listitem>
               </itemizedlist>
               <para>To perform a rollback from a bootable snapshot, do as follows:</para>
               <procedure>
                  <step>
                     <para>Boot the system. In the boot menu choose <guimenu>Bootable snapshots</guimenu> and select the snapshot you want to boot. The list of snapshots is listed by date—the most recent snapshot is listed first.</para>
                  </step>
                  <step>
                     <para>Log in to the system. Carefully check whether everything works as expected. Note that you cannot write to any directory that is part of the snapshot. Data you write to other directories will <emphasis>not</emphasis> get lost, regardless of what you do next.</para>
                  </step>
                  <step>
                     <para>Depending on whether you want to perform the rollback or not, choose your next step:</para>
                     <substeps performance="required">
                        <step>
                           <para>If the system is in a state where you do not want to do a rollback, reboot to boot into the current system state. You can then choose a different snapshot, or start the rescue system.</para>
                        </step>
                        <step>
                           <para>To perform the rollback, run</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper rollback</screen>
                           <para>and reboot afterward. On the boot screen, choose the default boot entry to reboot into the reinstated system. A snapshot of the file system status before the rollback is created. The default subvolume for root will be replaced with a fresh read-write snapshot. For details, see <xref linkend="sec-snapper-snapshot-boot-rollback"/>.</para>
                           <para>It is useful to add a description for the snapshot with the <option>-d</option> option. For example:</para>
                           <screen>New file system root since rollback on <replaceable>DATE</replaceable><replaceable>TIME</replaceable></screen>
                        </step>
                     </substeps>
                  </step>
               </procedure>
               <tip>
                  <title>Rolling back to a specific installation state</title>
                  <para>If snapshots are not disabled during installation, an initial bootable snapshot is created at the end of the initial system installation. You can go back to that state at any time by booting this snapshot. The snapshot can be identified by the description <literal>after installation</literal>.</para>
                  <para>A bootable snapshot is also created when starting a system upgrade to a service pack or a new major release (provided snapshots are not disabled).</para>
               </tip>
               <sect2 xml:id="sec-snapper-snapshot-boot-rollback">
                  <title>Snapshots after rollback</title>
                  <para>Before a rollback is performed, a snapshot of the running file system is created. The description references the ID of the snapshot that was restored in the rollback.</para>
                  <para>Snapshots created by rollbacks receive the value <literal>number</literal> for the <literal>Cleanup</literal> attribute. The rollback snapshots are therefore automatically deleted when the set number of snapshots is reached. Refer to <xref linkend="sec-snapper-clean-up"/> for details. If the snapshot contains important data, extract the data from the snapshot before it is removed.</para>
                  <sect3 xml:id="sec-snapper-snapshot-boot-rollback-example">
                     <title>Example of rollback snapshot</title>
                     <para>For example, after a fresh installation the following snapshots are available on the system:</para>
                     <screen><prompt role="root">#</prompt><command>snapper</command> --iso list
Type   | # |     | Cleanup | Description           | Userdata
-------+---+ ... +---------+-----------------------+--------------
single | 0 |     |         | current               |
single | 1 |     |         | first root filesystem |
single | 2 |     | number  | after installation    | important=yes
</screen>
                     <para>After running <command>sudo snapper rollback</command> snapshot <literal>3</literal> is created and contains the state of the system before the rollback was executed. Snapshot <literal>4</literal> is the new default Btrfs subvolume and thus the system after a reboot.</para>
                     <screen><prompt role="root">#</prompt><command>snapper</command> --iso list
Type   | # |     | Cleanup | Description           | Userdata
-------+---+ ... +---------+-----------------------+--------------
single | 0 |     |         | current               |
single | 1 |     | number  | first root filesystem |
single | 2 |     | number  | after installation    | important=yes
single | 3 |     | number  | rollback backup of #1 | important=yes
single | 4 |     |         |                       |
</screen>
                  </sect3>
               </sect2>
               <sect2 xml:id="sec-snapper-snapshot-boot-identify">
                  <title>Accessing and identifying snapshot boot entries</title>
                  <para>To boot from a snapshot, reboot your machine and choose <guimenu>Start Bootloader from a read-only snapshot</guimenu>. A screen listing all bootable snapshots opens. The most recent snapshot is listed first, the oldest last. Use the keys <keycap function="down"/> and <keycap function="up"/> to navigate and press <keycap function="enter"/> to activate the selected snapshot. Activating a snapshot from the boot menu does not reboot the machine immediately, but rather opens the boot loader of the selected snapshot.</para>
                  <figure xml:id="fig-snapper-snapshot-boot-identify">
                     <title>Boot loader: snapshots</title>
                     <mediaobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/boot_snapshots.png" width="69%"/>
                        </imageobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/boot_snapshots.png" width="69%"/>
                        </imageobject>
                     </mediaobject>
                  </figure>
                  <warning>
                     <title>Booting Xen from a Btrfs snapshot using UEFI currently fails</title>
                     <para>Refer to <link xlink:href="https://www.suse.com/support/kb/doc/?id=000020602"/> for more details.</para>
                  </warning>
                  <para>Each snapshot entry in the boot loader follows a naming scheme which makes it possible to identify it easily:</para>
                  <screen>[*]<co xml:id="snapper-boot-important"/><replaceable>OS</replaceable><co xml:id="snapper-boot-os"/> (<replaceable>KERNEL</replaceable><co xml:id="snapper-boot-kernel"/>,<replaceable>DATE</replaceable><co xml:id="snapper-boot-date"/>T<replaceable>TIME</replaceable><co xml:id="snapper-boot-time"/>,<replaceable>DESCRIPTION</replaceable><co xml:id="snapper-boot-description"/>)</screen>
                  <calloutlist>
                     <callout arearefs="snapper-boot-important">
                        <para>If the snapshot was marked <literal>important</literal>, the entry is marked with a <literal>*</literal>.</para>
                     </callout>
                     <callout arearefs="snapper-boot-os">
                        <para>Operating system label.</para>
                     </callout>
                     <callout arearefs="snapper-boot-date">
                        <para>Date in the format <literal>YYYY-MM-DD</literal>.</para>
                     </callout>
                     <callout arearefs="snapper-boot-time">
                        <para>Time in the format <literal>HH:MM</literal>.</para>
                     </callout>
                     <callout arearefs="snapper-boot-description">
                        <para>This field contains a description of the snapshot. In case of a manually created snapshot this is the string created with the option <option>--description</option> or a custom string (see <xref linkend="tip-snapper-snapshot-boot-custom-descr"/>). In case of an automatically created snapshot, it is the tool that was called, for example <literal>zypp(zypper)</literal> or <literal>yast_sw_single</literal>. Long descriptions may be truncated, depending on the size of the boot screen.</para>
                     </callout>
                  </calloutlist>
                  <tip xml:id="tip-snapper-snapshot-boot-custom-descr">
                     <title>Setting a custom description for boot loader snapshot entries</title>
                     <para>It is possible to replace the default string in the description field of a snapshot with a custom string. This is for example useful if an automatically created description is not sufficient, or a user-provided description is too long. To set a custom string <replaceable>STRING</replaceable> for snapshot <replaceable>NUMBER</replaceable>, use the following command:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> snapper modify --userdata "bootloader=<replaceable>STRING</replaceable>" <replaceable>NUMBER</replaceable></screen>
                     <para>The description should be no longer than 25 characters—everything that exceeds this size will not be readable on the boot screen.</para>
                  </tip>
               </sect2>
               <sect2 xml:id="sec-snapper-snapshot-boot-limits">
                  <title>Limitations</title>
                  <para>A <emphasis>complete</emphasis> system rollback, restoring the complete system to the identical state as it was in when a snapshot was taken, is not possible.</para>
                  <sect3 xml:id="sec-snapper-limits-snapshot-boot-excludes">
                     <title>Directories excluded from snapshots</title>
                     <para>Root file system snapshots do not contain all directories. See <xref linkend="snapper-dir-excludes"/> for details and reasons. As a general consequence, data from these directories is not restored, resulting in the following limitations.</para>
                     <variablelist>
                        <varlistentry>
                           <term>Add-ons and third-party software may be unusable after a rollback</term>
                           <listitem>
                              <para>Applications and add-ons installing data in subvolumes excluded from the snapshot, such as <filename>/opt</filename>, may not work after a rollback if other parts of the application data are also installed on subvolumes included in the snapshot. Re-install the application or the add-on to solve this problem.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>File access problems</term>
                           <listitem>
                              <para>If an application had changed file permissions and/or ownership in between snapshot and current system, the application may not be able to access these files. Reset permissions and/or ownership for the affected files after the rollback.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Incompatible data formats</term>
                           <listitem>
                              <para>If a service or an application has established a new data format in between snapshot and current system, the application may not be able to read the affected data files after a rollback.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>Subvolumes with a mixture of code and data</term>
                           <listitem>
                              <para>Subvolumes like <filename>/srv</filename> may contain a mixture of code and data. A rollback may result in non-functional code. A downgrade of the PHP version, for example, may result in broken PHP scripts for the Web server.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>User data</term>
                           <listitem>
                              <para>If a rollback removes users from the system, data that is owned by these users in directories excluded from the snapshot, is not removed. If a user with the same user ID is created, this user will inherit the files. Use a tool like <command>find</command> to locate and remove orphaned files.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3 xml:id="sec-snapper-limits-snapshot-boot-grub">
                     <title>No rollback of boot loader data</title>
                     <para>A rollback of the boot loader is not possible, since all <quote>stages</quote> of the boot loader must fit together. This cannot be guaranteed when doing rollbacks of <filename>/boot</filename>.</para>
                  </sect3>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-snapper-homedirs">
               <title>Enabling Snapper in user home directories</title>
               <para>You may enable snapshots for users' <filename>/home</filename> directories, which supports several use cases:</para>
               <itemizedlist>
                  <listitem>
                     <para>Individual users may manage their own snapshots and rollbacks.</para>
                  </listitem>
                  <listitem>
                     <para>System users, for example, database, system, and network admins who want to track copies of configuration files, documentation, and so on.</para>
                  </listitem>
                  <listitem>
                     <para>Samba shares with home directories and Btrfs back-end.</para>
                  </listitem>
               </itemizedlist>
               <para>Each user's directory is a Btrfs subvolume of <filename>/home</filename>. It is possible to set this up manually (see <xref linkend="sec-snapper-manual-home-config"/>). However, a more convenient way is to use <literal>pam_snapper</literal>. The <literal>pam_snapper</literal> package installs the <literal>pam_snapper.so</literal> module and helper scripts, which automate user creation and Snapper configuration.</para>
               <para><literal>pam_snapper</literal> provides integration with the <command>useradd</command> command, pluggable authentication modules (PAM), and Snapper. By default it creates snapshots at user login and logout, and also creates time-based snapshots as certain users remain logged in for extended periods of time. You may change the defaults using the normal Snapper commands and configuration files.</para>
               <sect2 xml:id="sec-snapper-install-pam-snapper">
                  <title>Installing pam_snapper and creating users</title>
                  <para>The easiest way is to start with a new <filename>/home</filename> directory formatted with Btrfs, and no existing users. Install <literal>pam_snapper</literal>:</para>
                  <screen><prompt role="root">#</prompt>zypper in pam_snapper</screen>
                  <para>Add this line to <filename>/etc/pam.d/common-session</filename>:</para>
                  <screen>session optional pam_snapper.so</screen>
                  <para>Use the <command>/usr/lib/pam_snapper/pam_snapper_useradd.sh</command> script to create a new user and home directory. By default the script performs a dry run. Edit the script to change <literal>DRYRUN=1</literal> to <literal>DRYRUN=0</literal>. Now you can create a new user:</para>
                  <screen><prompt role="root">#</prompt>/usr/lib/pam_snapper/pam_snapper_useradd.sh \
<replaceable>username</replaceable><replaceable>group</replaceable> passwd=<replaceable>password</replaceable>
Create subvolume '/home/username'
useradd: warning: the home directory already exists.
Not copying any file from skel directory into it.
</screen>
                  <para>The files from <filename>/etc/skel</filename> will be copied into the user's home directory at their first login. Verify that the user's configuration was created by listing your Snapper configurations:</para>
                  <screen><prompt role="root">#</prompt>snapper list --all
Config: home_username, subvolume: /home/username
Type   | # | Pre # | Date | User | Cleanup | Description | Userdata
-------+---+-------+------+------+---------+-------------+---------
single | 0 |       |      | root |         | current     |
</screen>
                  <para>Over time, this output will become populated with a list of snapshots, which the user can manage with the standard Snapper commands.</para>
               </sect2>
               <sect2 xml:id="sec-snapper-remove-user">
                  <title>Removing users</title>
                  <para>Remove users with the <command>/usr/lib/pam_snapper/pam_snapper_userdel.sh</command> script. By default it performs a dry run, so edit it to change <literal>DRYRUN=1</literal> to <literal>DRYRUN=0</literal>. This removes the user, the user's home subvolume, Snapper configuration, and deletes all snapshots.</para>
                  <screen><prompt role="root">#</prompt>/usr/lib/pam_snapper/pam_snapper_userdel.sh username</screen>
               </sect2>
               <sect2 xml:id="sec-snapper-manual-home-config">
                  <title>Manually enabling snapshots in home directories</title>
                  <para>These are the steps for manually setting up users' home directories with Snapper. <filename>/home</filename> must be formatted with Btrfs, and the users not yet created.</para>
                  <screen><prompt role="root">#</prompt>btrfs subvol create /home/<replaceable>username</replaceable><prompt role="root">#</prompt>snapper -c home_<replaceable>username</replaceable> create-config /home/<replaceable>username</replaceable><prompt role="root">#</prompt>sed -i -e "s/ALLOW_USERS=\"\"/ALLOW_USERS=\"<replaceable>username</replaceable>\"/g" \
/etc/snapper/configs/home_<replaceable>username</replaceable><prompt role="root">#</prompt>yast users add username=<replaceable>username</replaceable> home=/home/<replaceable>username</replaceable> password=<replaceable>password</replaceable><prompt role="root">#</prompt>chown <replaceable>username</replaceable>.<replaceable>group</replaceable> /home/<replaceable>username</replaceable><prompt role="root">#</prompt>chmod 755 /home/<replaceable>username</replaceable>/.snapshots
</screen>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-snapper-config">
               <title>Creating and modifying Snapper configurations</title>
               <para>The way Snapper behaves is defined in a configuration file that is specific for each partition or <literal>Btrfs</literal> subvolume. These configuration files reside under <filename>/etc/snapper/configs/</filename>.</para>
               <para>In case the root file system is big enough (approximately 12 GB), snapshots are automatically enabled for the root file system <filename>/</filename> upon installation. The corresponding default configuration is named <filename>root</filename>. It creates and manages the YaST and Zypper snapshot. See <xref linkend="sec-snapper-config-modify-values"/> for a list of the default values.</para>
               <note>
                  <title>Minimum root file system size for enabling snapshots</title>
                  <para>As explained in <xref linkend="sec-snapper-setup"/>, enabling snapshots requires additional free space in the root file system. The amount depends on the amount of packages installed and the amount of changes made to the volume that is included in snapshots. The snapshot frequency and the number of snapshots that get archived also matter.</para>
                  <para>There is a minimum root file system size that is required to automatically enable snapshots during the installation. Currently this size is approximately 12 GB. This value may change in the future, depending on architecture and the size of the base system. It depends on the values for the following tags in the file <filename>/control.xml</filename> from the installation media:</para>
                  <screen>&lt;root_base_size&gt;
&lt;btrfs_increase_percentage&gt;</screen>
                  <para>It is calculated with the following formula: <replaceable>ROOT_BASE_SIZE</replaceable> * (1 + <replaceable>BTRFS_INCREASE_PERCENTAGE</replaceable>/100)</para>
                  <para>Keep in mind that this value is a minimum size. Consider using more space for the root file system. As a rule of thumb, double the size you would use when not having enabled snapshots.</para>
               </note>
               <para>You may create your own configurations for other partitions formatted with <literal>Btrfs</literal> or existing subvolumes on a <literal>Btrfs</literal> partition. In the following example we will set up a Snapper configuration for backing up the Web server data residing on a separate, <literal>Btrfs</literal>-formatted partition mounted at <filename>/srv/www</filename>.</para>
               <para>After a configuration has been created, you can either use <command>snapper</command> itself or the YaST <guimenu>Snapper</guimenu> module to restore files from these snapshots. In YaST you need to select your <guimenu>Current Configuration</guimenu>, while you need to specify your configuration for <command>snapper</command> with the global switch <option>-c</option> (for example, <command>snapper -c myconfig list</command>).</para>
               <para>To create a new Snapper configuration, run <command>snapper create-config</command>:</para>
               <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c www-data<co xml:id="snapper-create-name"/> create-config /srv/www<co xml:id="snapper-create-volume"/></screen>
               <calloutlist>
                  <callout arearefs="snapper-create-name">
                     <para>Name of configuration file.</para>
                  </callout>
                  <callout arearefs="snapper-create-volume">
                     <para>Mount point of the partition or <literal>Btrfs</literal> subvolume on which to take snapshots.</para>
                  </callout>
               </calloutlist>
               <para>This command will create a new configuration file <filename>/etc/snapper/configs/www-data</filename> with reasonable default values (taken from <filename>/etc/snapper/config-templates/default</filename>). Refer to <xref linkend="sec-snapper-config-modify"/> for instructions on how to adjust these defaults.</para>
               <tip>
                  <title>Configuration defaults</title>
                  <para>Default values for a new configuration are taken from <filename>/etc/snapper/config-templates/default</filename>. To use your own set of defaults, create a copy of this file in the same directory and adjust it to your needs. To use it, specify the <option>-t</option> option with the create-config command:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c www-data create-config -t <replaceable>MY_DEFAULTS</replaceable> /srv/www</screen>
               </tip>
               <sect2 xml:id="sec-snapper-config-modify">
                  <title>Managing existing configurations</title>
                  <para>The <command>snapper</command> command offers several subcommands for managing existing configurations. You can list, show, delete and modify them:</para>
                  <variablelist>
                     <varlistentry>
                        <term>Listing configurations</term>
                        <listitem>
                           <para>Use the subcommand <command>snapper list-configs</command> to get all existing configurations:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper list-configs
Config | Subvolume
-------+----------
root   | /
usr    | /usr
local  | /local</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Showing a configuration</term>
                        <listitem>
                           <para>Use the subcommand <command>snapper -c <replaceable>CONFIG</replaceable> get-config</command> to display the specified configuration. Replace <replaceable>CONFIG</replaceable> with one of the configuration names shown by <command>snapper list-configs</command>. For more information about the configuration options, see <xref linkend="sec-snapper-config-modify-values"/>.</para>
                           <para>To display the default configuration, run:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c root get-config</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Modifying a configuration</term>
                        <listitem>
                           <para>Use the subcommand <command>snapper -c <replaceable>CONFIG</replaceable> set-config <replaceable>OPTION</replaceable>=<replaceable>VALUE</replaceable></command> to modify an option in the specified configuration. Replace <replaceable>CONFIG</replaceable> with one of the configuration names shown by <command>snapper list-configs</command>. Possible values for <replaceable>OPTION</replaceable> and <replaceable>VALUE</replaceable> are listed in <xref linkend="sec-snapper-config-modify-values"/>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Deleting a configuration</term>
                        <listitem>
                           <para>Use the subcommand <command>snapper -c <replaceable>CONFIG</replaceable> delete-config</command> to delete a configuration. Replace <replaceable>CONFIG</replaceable> with one of the configuration names shown by <command>snapper list-configs</command>.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <sect3 xml:id="sec-snapper-config-modify-values">
                     <title>Configuration data</title>
                     <para>Each configuration contains a list of options that can be modified from the command line. The following list provides details for each option. To change a value, run <command>snapper -c <replaceable>CONFIG</replaceable> set-config "<replaceable>KEY</replaceable>=<replaceable>VALUE</replaceable>"</command>.</para>
                     <variablelist>
                        <varlistentry>
                           <term>
                              <literal>ALLOW_GROUPS</literal>, <literal>ALLOW_USERS</literal>
                           </term>
                           <listitem>
                              <para>Granting permissions to use snapshots to regular users. See <xref linkend="sec-snapper-config-user"/> for more information.</para>
                              <para>The default value is <literal>""</literal>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>BACKGROUND_COMPARISON</literal>
                           </term>
                           <listitem>
                              <para>Defines whether pre and post snapshots should be compared in the background after creation.</para>
                              <para>The default value is <literal>"yes"</literal>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>EMPTY_*</literal>
                           </term>
                           <listitem>
                              <para>Defines the clean-up algorithm for snapshots pairs with identical pre and post snapshots. See <xref linkend="sec-snapper-clean-up-empty"/> for details.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>FSTYPE</literal>
                           </term>
                           <listitem>
                              <para>File system type of the partition. Do not change.</para>
                              <para>The default value is <literal>"btrfs"</literal>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>NUMBER_*</literal>
                           </term>
                           <listitem>
                              <para>Defines the clean-up algorithm for installation and administration snapshots. See <xref linkend="sec-snapper-clean-up-number"/> for details.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>QGROUP</literal> / <literal>SPACE_LIMIT</literal>
                           </term>
                           <listitem>
                              <para>Adds quota support to the clean-up algorithms. See <xref linkend="sec-snapper-clean-up-quota"/> for details.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>SUBVOLUME</literal>
                           </term>
                           <listitem>
                              <para>Mount point of the partition or subvolume to snapshot. Do not change.</para>
                              <para>The default value is <literal>"/"</literal>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>SYNC_ACL</literal>
                           </term>
                           <listitem>
                              <para>If Snapper is used by regular users (see <xref linkend="sec-snapper-config-user"/>), the users must be able to access the <filename>.snapshot</filename> directories and to read files within them. If SYNC_ACL is set to <literal>yes</literal>, Snapper automatically makes them accessible using ACLs for users and groups from the ALLOW_USERS or ALLOW_GROUPS entries.</para>
                              <para>The default value is <literal>"no"</literal>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>TIMELINE_CREATE</literal>
                           </term>
                           <listitem>
                              <para>If set to <literal>yes</literal>, hourly snapshots are created. Valid values: <literal>yes</literal>, <literal>no</literal>.</para>
                              <para>The default value is <literal>"no"</literal>.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>TIMELINE_CLEANUP</literal> / <literal>TIMELINE_LIMIT_*</literal>
                           </term>
                           <listitem>
                              <para>Defines the clean-up algorithm for timeline snapshots. See <xref linkend="sec-snapper-clean-up-timeline"/> for details.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3 xml:id="sec-snapper-config-user">
                     <title>Using Snapper as regular user</title>
                     <para>By default Snapper can only be used by <systemitem class="username">root</systemitem>. However, there are cases in which certain groups or users need to be able to create snapshots or undo changes by reverting to a snapshot:</para>
                     <itemizedlist mark="bullet" spacing="normal">
                        <listitem>
                           <para>Web site administrators who want to take snapshots of <filename>/srv/www</filename></para>
                        </listitem>
                        <listitem>
                           <para>Users who want to take a snapshot of their home directory</para>
                        </listitem>
                     </itemizedlist>
                     <para>For these purposes, you can create Snapper configurations that grant permissions to users or/and groups. The corresponding <filename>.snapshots</filename> directory needs to be readable and accessible by the specified users. The easiest way to achieve this is to set the SYNC_ACL option to <literal>yes</literal>.</para>
                     <procedure>
                        <title>Enabling regular users to use Snapper</title>
                        <para>All steps in this procedure need to be run by <systemitem class="username">root</systemitem>.</para>
                        <step>
                           <para>If a Snapper configuration does not exist yet, create one for the partition or subvolume on which the user should be able to use Snapper. Refer to <xref linkend="sec-snapper-config"/> for instructions. Example:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper --config web_data create /srv/www</screen>
                        </step>
                        <step>
                           <para>The configuration file is created under <filename>/etc/snapper/configs/<replaceable>CONFIG</replaceable></filename>, where CONFIG is the value you specified with <option>-c/--config</option> in the previous step (for example <filename>/etc/snapper/configs/web_data</filename>). Adjust it according to your needs. For more information, see <xref linkend="sec-snapper-config-modify"/>.</para>
                        </step>
                        <step>
                           <para>Set values for <envar>ALLOW_USERS</envar> and/or <envar>ALLOW_GROUPS</envar> to grant permissions to users and/or groups, respectively. Multiple entries need to be separated by <keycap function="space"/>. To grant permissions to the user <systemitem class="username">www_admin</systemitem> for example, run:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c web_data set-config "ALLOW_USERS=www_admin" SYNC_ACL="yes"</screen>
                        </step>
                        <step>
                           <para>The given Snapper configuration can now be used by the specified users and/or groups. You can test it with the <literal>list</literal> command, for example:</para>
                           <screen><prompt>www_admin:~ &gt;</prompt>snapper -c web_data list</screen>
                        </step>
                     </procedure>
                  </sect3>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-snapper-manage">
               <title>Manually creating and managing snapshots</title>
               <para>Snapper is not restricted to creating and managing snapshots automatically by configuration; you can also create snapshot pairs (<quote>before and after</quote>) or single snapshots manually using either the command-line tool or the YaST module.</para>
               <para>All Snapper operations are carried out for an existing configuration (see <xref linkend="sec-snapper-config"/> for details). You can only take snapshots of partitions or volumes for which a configuration exists. By default the system configuration (<literal>root</literal>) is used. To create or manage snapshots for your own configuration you need to explicitly choose it. Use the <guimenu>Current Configuration</guimenu> drop-down box in YaST or specify the <option>-c</option> on the command line (<command>snapper -c <replaceable>MYCONFIG</replaceable><replaceable>COMMAND</replaceable></command>).</para>
               <sect2 xml:id="sec-snapper-manage-metadata">
                  <title>Snapshot metadata</title>
                  <para>Each snapshot consists of the snapshot itself and certain metadata. When creating a snapshot you also need to specify the metadata. Modifying a snapshot means changing its metadata—you cannot modify its content. Use <command>snapper list</command> to show existing snapshots and their metadata:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <command>snapper --config home list</command>
                        </term>
                        <listitem>
                           <para>Lists snapshots for the configuration <literal>home</literal>. To list snapshots for the default configuration (root), use <command>snapper -c root list</command> or <command>snapper list</command>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper list -a</command>
                        </term>
                        <listitem>
                           <para>Lists snapshots for all existing configurations.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper list -t pre-post</command>
                        </term>
                        <listitem>
                           <para>Lists all pre and post snapshot pairs for the default (<literal>root</literal>) configuration.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper list -t single</command>
                        </term>
                        <listitem>
                           <para>Lists all snapshots of the type <literal>single</literal> for the default (<literal>root</literal>) configuration.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>The following metadata is available for each snapshot:</para>
                  <itemizedlist mark="bullet" spacing="normal">
                     <listitem>
                        <para><emphasis role="bold">Type</emphasis>: snapshot type, see <xref linkend="sec-snapper-manage-metadata-type"/> for details. This data cannot be changed.</para>
                     </listitem>
                     <listitem>
                        <para><emphasis role="bold">Number</emphasis>: unique number of the snapshot. This data cannot be changed.</para>
                     </listitem>
                     <listitem>
                        <para><emphasis role="bold">Pre Number</emphasis>: specifies the number of the corresponding pre snapshot. For snapshots of type post only. This data cannot be changed.</para>
                     </listitem>
                     <listitem>
                        <para><emphasis role="bold">Description</emphasis>: a description of the snapshot.</para>
                     </listitem>
                     <listitem>
                        <para><emphasis role="bold">Userdata</emphasis>: an extended description where you can specify custom data in the form of a comma-separated key=value list: <literal>reason=testing, project=foo</literal>. This field is also used to mark a snapshot as important (<literal>important=yes</literal>) and to list the user that created the snapshot (user=tux).</para>
                     </listitem>
                     <listitem>
                        <para><emphasis role="bold">Cleanup-Algorithm</emphasis>: cleanup-algorithm for the snapshot, see <xref linkend="sec-snapper-clean-up"/> for details.</para>
                     </listitem>
                  </itemizedlist>
                  <sect3 xml:id="sec-snapper-manage-metadata-type">
                     <title>Snapshot types</title>
                     <para>Snapper knows three different types of snapshots: pre, post and single. Physically they do not differ, but Snapper handles them differently.</para>
                     <variablelist>
                        <varlistentry>
                           <term>
                              <literal>pre</literal>
                           </term>
                           <listitem>
                              <para>Snapshot of a file system <emphasis>before</emphasis> a modification. Each <literal>pre</literal> snapshot corresponds to a <literal>post</literal> snapshot. For example, this is used for the automatic YaST/Zypper snapshots.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>post</literal>
                           </term>
                           <listitem>
                              <para>Snapshot of a file system <emphasis>after</emphasis> a modification. Each <literal>post</literal> snapshot corresponds to a <literal>pre</literal> snapshot. For example, this is used for the automatic YaST/Zypper snapshots.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <literal>single</literal>
                           </term>
                           <listitem>
                              <para>Stand-alone snapshot. For example, this is used for the automatic hourly snapshots. This is the default type when creating snapshots.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
                  <sect3 xml:id="sec-snapper-manage-metadata-cleanup">
                     <title>Cleanup algorithms</title>
                     <para>Snapper provides three algorithms to clean up old snapshots. The algorithms are executed in a daily <systemitem class="daemon">cron</systemitem> job. It is possible to define the number of different types of snapshots to keep in the Snapper configuration (see <xref linkend="sec-snapper-config-modify"/> for details).</para>
                     <variablelist>
                        <varlistentry>
                           <term>number</term>
                           <listitem>
                              <para>Deletes old snapshots when a certain snapshot count is reached.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>timeline</term>
                           <listitem>
                              <para>Deletes old snapshots having passed a certain age but keeps several hourly, daily, monthly and yearly snapshots.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>empty-pre-post</term>
                           <listitem>
                              <para>Deletes pre/post snapshot pairs with empty diffs.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                  </sect3>
               </sect2>
               <sect2 xml:id="sec-snapper-manage-create">
                  <title>Creating snapshots</title>
                  <para>To create a snapshot, run <command>snapper create</command> or click <guimenu>Create</guimenu> in the YaST module <guimenu>Snapper</guimenu>. The following examples explain how to create snapshots from the command line. The YaST interface for Snapper is not explicitly described here but provides equivalent functionality.</para>
                  <tip>
                     <title>Snapshot description</title>
                     <para>Always specify a meaningful description to later be able to identify its purpose. You can also specify additional information via the option <option>--userdata</option>.</para>
                  </tip>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <command>snapper create --from <replaceable>17</replaceable> --description "with package2"</command>
                        </term>
                        <listitem>
                           <para>Creates a stand-alone snapshot (type single) from an existing snapshot, which is specified by the snapshot's number from <command>snapper list</command>. (This applies to Snapper version 0.8.4 and newer.)</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper create --description "Snapshot for week 2 2014"</command>
                        </term>
                        <listitem>
                           <para>Creates a stand-alone snapshot (type single) for the default (<literal>root</literal>) configuration with a description. Because no cleanup-algorithm is specified, the snapshot will never be deleted automatically.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper --config home create --description "Cleanup in ~tux"</command>
                        </term>
                        <listitem>
                           <para>Creates a stand-alone snapshot (type single) for a custom configuration named <literal>home</literal> with a description. Because no cleanup-algorithm is specified, the snapshot will never be deleted automatically.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper --config home create --description "Daily data backup" --cleanup-algorithm timeline</command>&gt;</term>
                        <listitem>
                           <para>Creates a stand-alone snapshot (type single) for a custom configuration named <literal>home</literal> with a description. The snapshot will automatically be deleted when it meets the criteria specified for the timeline cleanup-algorithm in the configuration.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper create --type pre --print-number --description "Before the Apache config cleanup" --userdata "important=yes"</command>
                        </term>
                        <listitem>
                           <para>Creates a snapshot of the type <literal>pre</literal> and prints the snapshot number. First command needed to create a pair of snapshots used to save a <quote>before</quote> and <quote>after</quote> state. The snapshot is marked as important.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper create --type post --pre-number 30 --description "After the Apache config cleanup" --userdata "important=yes"</command>
                        </term>
                        <listitem>
                           <para>Creates a snapshot of the type <literal>post</literal> paired with the <literal>pre</literal> snapshot number <literal>30</literal>. Second command needed to create a pair of snapshots used to save a <quote>before</quote> and <quote>after</quote> state. The snapshot is marked as important.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper create --command <replaceable>COMMAND</replaceable> --description "Before and after COMMAND"</command>
                        </term>
                        <listitem>
                           <para>Automatically creates a snapshot pair before and after running <replaceable>COMMAND</replaceable>. This option is only available when using snapper on the command line.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="sec-snapper-manage-modify">
                  <title>Modifying snapshot metadata</title>
                  <para>Snapper allows you to modify the description, the cleanup algorithm, and the user data of a snapshot. All other metadata cannot be changed. The following examples explain how to modify snapshots from the command line. It should be easy to adopt them when using the YaST interface.</para>
                  <para>To modify a snapshot on the command line, you need to know its number. Use <command>snapper list</command> to display all snapshots and their numbers.</para>
                  <para>The YaST <guimenu>Snapper</guimenu> module already lists all snapshots. Choose one from the list and click <guimenu>Modify</guimenu>.</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <command>snapper modify --cleanup-algorithm "timeline"</command> 10</term>
                        <listitem>
                           <para>Modifies the metadata of snapshot 10 for the default (<literal>root</literal>) configuration. The cleanup algorithm is set to <literal>timeline</literal>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper --config home modify --description "daily backup" -cleanup-algorithm "timeline" 120</command>
                        </term>
                        <listitem>
                           <para>Modifies the metadata of snapshot 120 for a custom configuration named <literal>home</literal>. A new description is set and the cleanup algorithm is unset.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="sec-snapper-manage-delete">
                  <title>Deleting snapshots</title>
                  <para>To delete a snapshot with the YaST <guimenu>Snapper</guimenu> module, choose a snapshot from the list and click <guimenu>Delete</guimenu>.</para>
                  <para>To delete a snapshot with the command-line tool, you need to know its number. Get it by running <command>snapper list</command>. To delete a snapshot, run <command>snapper delete</command><replaceable>NUMBER</replaceable>.</para>
                  <para>Deleting the current default subvolume snapshot is not allowed.</para>
                  <para>When deleting snapshots with Snapper, the freed space will be claimed by a Btrfs process running in the background. Thus the visibility and the availability of free space is delayed. In case you need space freed by deleting a snapshot to be available immediately, use the option <option>--sync</option> with the delete command.</para>
                  <tip>
                     <title>Deleting snapshot pairs</title>
                     <para>When deleting a <literal>pre</literal> snapshot, you should always delete its corresponding <literal>post</literal> snapshot (and vice versa).</para>
                  </tip>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <command>snapper delete 65</command>
                        </term>
                        <listitem>
                           <para>Deletes snapshot 65 for the default (<literal>root</literal>) configuration.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper -c home delete 89 90</command>
                        </term>
                        <listitem>
                           <para>Deletes snapshots 89 and 90 for a custom configuration named <literal>home</literal>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper delete --sync 23</command>
                        </term>
                        <listitem>
                           <para>Deletes snapshot 23 for the default (<literal>root</literal>) configuration and makes the freed space available immediately.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <tip>
                     <title>Delete unreferenced snapshots</title>
                     <para>Sometimes the Btrfs snapshot is present but the XML file containing the metadata for Snapper is missing. In this case, the snapshot is not visible for Snapper and needs to be deleted manually:</para>
                     <screen>btrfs subvolume delete /.snapshots/<replaceable>SNAPSHOTNUMBER</replaceable>/snapshot
rm -rf /.snapshots/SNAPSHOTNUMBER</screen>
                  </tip>
                  <tip>
                     <title>Old snapshots occupy more disk space</title>
                     <para>If you delete snapshots to free space on your hard disk, make sure to delete old snapshots first. The older a snapshot is, the more disk space it occupies.</para>
                  </tip>
                  <para>Snapshots are also automatically deleted by a daily cron job. Refer to <xref linkend="sec-snapper-manage-metadata-cleanup"/> for details.</para>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-snapper-clean-up">
               <title>Automatic snapshot clean-up</title>
               <para>Snapshots occupy disk space and over time the amount of disk space occupied by the snapshots may become large. To prevent disks from running out of space, Snapper offers algorithms to automatically delete old snapshots. These algorithms differentiate between timeline snapshots and numbered snapshots (administration plus installation snapshot pairs). You can specify the number of snapshots to keep for each type.</para>
               <para>Additionally, you can optionally specify a disk space quota, defining the maximum amount of disk space the snapshots may occupy. It is also possible to automatically delete pre and post snapshots pairs that do not differ.</para>
               <para>A clean-up algorithm is always bound to a single Snapper configuration, so you need to configure algorithms for each configuration. To prevent certain snapshots from being automatically deleted, refer to <xref linkend="faq-snapper-permanent" xrefstyle="template:Frequently asked questions"/>.</para>
               <para>The default setup (<literal>root</literal>) is configured to do clean-up for numbered snapshots and empty pre and post snapshot pairs. Quota support is enabled—snapshots may not occupy more than 50% of the available disk space of the root partition. Timeline snapshots are disabled by default, therefore the timeline clean-up algorithm is also disabled.</para>
               <sect2 xml:id="sec-snapper-clean-up-number">
                  <title>Cleaning up numbered snapshots</title>
                  <para>Cleaning up numbered snapshots—administration plus installation snapshot pairs—is controlled by the following parameters of a Snapper configuration.</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>NUMBER_CLEANUP</literal>
                        </term>
                        <listitem>
                           <para>Enables or disables clean-up of installation and admin snapshot pairs. If enabled, snapshot pairs are deleted when the total snapshot count exceeds a number specified with <literal>NUMBER_LIMIT</literal> and/or <literal>NUMBER_LIMIT_IMPORTANT</literal><emphasis>and</emphasis> an age specified with <literal>NUMBER_MIN_AGE</literal>. Valid values: <literal>yes</literal> (enable), <literal>no</literal> (disable).</para>
                           <para>The default value is <literal>"yes"</literal>.</para>
                           <para>Example command to change or set:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> set-config "NUMBER_CLEANUP=no"</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>NUMBER_LIMIT</literal> / <literal>NUMBER_LIMIT_IMPORTANT</literal>
                        </term>
                        <listitem>
                           <para>Defines how many regular and/or important installation and administration snapshot pairs to keep. Ignored if <literal>NUMBER_CLEANUP</literal> is set to <literal>"no"</literal>.</para>
                           <para>The default value is <literal>"2-10"</literal> for <literal>NUMBER_LIMIT</literal> and <literal>"4-10"</literal> for <literal>NUMBER_LIMIT_IMPORTANT</literal>. The cleaning algorithms delete snapshots above the specified maximum value, without taking the snapshot and file system space into account. The algorithms also delete snapshots above the minimum value until the limits for the snapshot and file system are reached.</para>
                           <para>Example command to change or set:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> set-config "NUMBER_LIMIT=10"</screen>
                           <important>
                              <title>Ranged compared to constant values</title>
                              <para>If quota support is enabled (see <xref linkend="sec-snapper-clean-up-quota"/>), the limit needs to be specified as a minimum-maximum range, for example, <literal>2-10</literal>. If quota support is disabled, a constant value, for example, <literal>10</literal>, needs to be provided, otherwise cleaning up fails with an error.</para>
                           </important>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>NUMBER_MIN_AGE</literal>
                        </term>
                        <listitem>
                           <para>Defines the minimum age in seconds a snapshot must have before it can automatically be deleted. Snapshots younger than the value specified here will not be deleted, regardless of how many exist.</para>
                           <para>The default value is <literal>"1800"</literal>.</para>
                           <para>Example command to change or set:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> set-config "NUMBER_MIN_AGE=864000"</screen>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <note>
                     <title>Limit and age</title>
                     <para><literal>NUMBER_LIMIT</literal>, <literal>NUMBER_LIMIT_IMPORTANT</literal> and <literal>NUMBER_MIN_AGE</literal> are always evaluated. Snapshots are only deleted when <emphasis>all</emphasis> conditions are met.</para>
                     <para>If you always want to keep the number of snapshots defined with <literal>NUMBER_LIMIT*</literal> regardless of their age, set <literal>NUMBER_MIN_AGE</literal> to <literal>0</literal>.</para>
                     <para>The following example shows a configuration to keep the last 10 important and regular snapshots regardless of age:</para>
                     <screen>NUMBER_CLEANUP=yes
NUMBER_LIMIT_IMPORTANT=10
NUMBER_LIMIT=10
NUMBER_MIN_AGE=0</screen>
                     <para>If you do not want to keep snapshots beyond a certain age, set <literal>NUMBER_LIMIT*</literal> to <literal>0</literal> and provide the age with <literal>NUMBER_MIN_AGE</literal>.</para>
                     <para>The following example shows a configuration to only keep snapshots younger than ten days:</para>
                     <screen>NUMBER_CLEANUP=yes
NUMBER_LIMIT_IMPORTANT=0
NUMBER_LIMIT=0
NUMBER_MIN_AGE=864000</screen>
                  </note>
               </sect2>
               <sect2 xml:id="sec-snapper-clean-up-timeline">
                  <title>Cleaning up timeline snapshots</title>
                  <para>Cleaning up timeline snapshots is controlled by the following parameters of a Snapper configuration.</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>TIMELINE_CLEANUP</literal>
                        </term>
                        <listitem>
                           <para>Enables or disables clean-up of timeline snapshots. If enabled, snapshots are deleted when the total snapshot count exceeds a number specified with <literal>TIMELINE_LIMIT_*</literal><emphasis>and</emphasis> an age specified with <literal>TIMELINE_MIN_AGE</literal>. Valid values: <literal>yes</literal>, <literal>no</literal>.</para>
                           <para>The default value is <literal>"yes"</literal>.</para>
                           <para>Example command to change or set:</para>
                           <screen><prompt>&gt;</prompt><command>sudo</command> snapper -c <replaceable>CONFIG</replaceable> set-config "TIMELINE_CLEANUP=yes"</screen>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>TIMELINE_LIMIT_DAILY</literal>, <literal>TIMELINE_LIMIT_HOURLY</literal>, <literal>TIMELINE_LIMIT_MONTHLY</literal>, <literal>TIMELINE_LIMIT_WEEKLY</literal>, <literal>TIMELINE_LIMIT_YEARLY</literal>
                        </term>
                        <listitem>
                           <para>Number of snapshots to keep for hour, day, month, week and year.</para>
                           <para>The default value for each entry is <literal>"10"</literal>, except for <literal>TIMELINE_LIMIT_WEEKLY</literal>, which is set to <literal>"0"</literal> by default.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>TIMELINE_MIN_AGE</literal>
                        </term>
                        <listitem>
                           <para>Defines the minimum age in seconds a snapshot must have before it can automatically be deleted.</para>
                           <para>The default value is <literal>"1800"</literal>.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <example xml:id="ex-snapper-config-timeline">
                     <title>Example timeline configuration</title>
                     <screen>TIMELINE_CLEANUP="yes"
TIMELINE_CREATE="yes"
TIMELINE_LIMIT_DAILY="7"
TIMELINE_LIMIT_HOURLY="24"
TIMELINE_LIMIT_MONTHLY="12"
TIMELINE_LIMIT_WEEKLY="4"
TIMELINE_LIMIT_YEARLY="2"
TIMELINE_MIN_AGE="1800"</screen>
                     <para>This example configuration enables hourly snapshots which are automatically cleaned up. <literal>TIMELINE_MIN_AGE</literal> and <literal>TIMELINE_LIMIT_*</literal> are always both evaluated. In this example, the minimum age of a snapshot before it can be deleted is set to 30 minutes (1800 seconds). Since we create hourly snapshots, this ensures that only the latest snapshots are kept. If <literal>TIMELINE_LIMIT_DAILY</literal> is set to not zero, this means that the first snapshot of the day is kept, too.</para>
                     <itemizedlist mark="bullet" spacing="normal">
                        <title>Snapshots to be kept</title>
                        <listitem>
                           <para>Hourly: the last 24 snapshots that have been made.</para>
                        </listitem>
                        <listitem>
                           <para>Daily: the first daily snapshot that has been made is kept from the last seven days.</para>
                        </listitem>
                        <listitem>
                           <para>Monthly: the first snapshot made on the last day of the month is kept for the last twelve months.</para>
                        </listitem>
                        <listitem>
                           <para>Weekly: the first snapshot made on the last day of the week is kept from the last four weeks.</para>
                        </listitem>
                        <listitem>
                           <para>Yearly: the first snapshot made on the last day of the year is kept for the last two years.</para>
                        </listitem>
                     </itemizedlist>
                  </example>
               </sect2>
               <sect2 xml:id="sec-snapper-clean-up-empty">
                  <title>Cleaning up snapshot pairs that do not differ</title>
                  <para>As explained in <xref linkend="snapper-snapshot-type"/>, whenever you run a YaST module or execute Zypper, a pre snapshot is created on start-up and a post snapshot is created when exiting. In case you have not made any changes there will be no difference between the pre and post snapshots. Such <quote>empty</quote> snapshot pairs can be automatically be deleted by setting the following parameters in a Snapper configuration:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>EMPTY_PRE_POST_CLEANUP</literal>
                        </term>
                        <listitem>
                           <para>If set to <literal>yes</literal>, pre and post snapshot pairs that do not differ will be deleted.</para>
                           <para>The default value is <literal>"yes"</literal>.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>EMPTY_PRE_POST_MIN_AGE</literal>
                        </term>
                        <listitem>
                           <para>Defines the minimum age in seconds a pre and post snapshot pair that does not differ must have before it can automatically be deleted.</para>
                           <para>The default value is <literal>"1800"</literal>.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="sec-snapper-clean-up-manual">
                  <title>Cleaning up manually created snapshots</title>
                  <para>Snapper does not offer custom clean-up algorithms for manually created snapshots. However, you can assign the number or timeline clean-up algorithm to a manually created snapshot. If you do so, the snapshot will join the <quote>clean-up queue</quote> for the algorithm you specified. You can specify a clean-up algorithm when creating a snapshot, or by modifying an existing snapshot:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <command>snapper create --description "Test" --cleanup-algorithm number</command>
                        </term>
                        <listitem>
                           <para>Creates a stand-alone snapshot (type single) for the default (root) configuration and assigns the <literal>number</literal> clean-up algorithm.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <command>snapper modify --cleanup-algorithm "timeline" 25</command>
                        </term>
                        <listitem>
                           <para>Modifies the snapshot with the number 25 and assigns the clean-up algorithm <literal>timeline</literal>.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
               <sect2 xml:id="sec-snapper-clean-up-quota">
                  <title>Adding disk quota support</title>
                  <para>In addition to the number and/or timeline clean-up algorithms described above, Snapper supports quotas. You can define what percentage of the available space snapshots are allowed to occupy. This percentage value always applies to the Btrfs subvolume defined in the respective Snapper configuration.</para>
                  <para>Btrfs quotas are applied to subvolumes, not to users. You may apply disk space quotas to users and groups (for example, with the <command>quota</command> command) in addition to using Btrfs quotas.</para>
                  <para>If Snapper was enabled during the installation, quota support is automatically enabled. In case you manually enable Snapper at a later point in time, you can enable quota support by running <command>snapper setup-quota</command>. This requires a valid configuration (see <xref linkend="sec-snapper-config"/> for more information).</para>
                  <para>Quota support is controlled by the following parameters of a Snapper configuration.</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>QGROUP</literal>
                        </term>
                        <listitem>
                           <para>The Btrfs quota group used by Snapper. If not set, run <command>snapper setup-quota</command>. If already set, only change if you are familiar with <command>man 8 btrfs-qgroup</command>. This value is set with <command>snapper setup-quota</command> and should not be changed.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>SPACE_LIMIT</literal>
                        </term>
                        <listitem>
                           <para>Limit of space snapshots are allowed to use in fractions of 1 (100%). Valid values range from 0 to 1 (0.1 = 10%, 0.2 = 20%, ...).</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>The following limitations and guidelines apply:</para>
                  <itemizedlist>
                     <listitem>
                        <para>Quotas are only activated in <emphasis>addition</emphasis> to an existing number and/or timeline clean-up algorithm. If no clean-up algorithm is active, quota restrictions are not applied.</para>
                     </listitem>
                     <listitem>
                        <para>With quota support enabled, Snapper will perform two clean-up runs if required. The first run will apply the rules specified for number and timeline snapshots. Only if the quota is exceeded after this run, the quota-specific rules will be applied in a second run.</para>
                     </listitem>
                     <listitem>
                        <para>Even if quota support is enabled, Snapper will always keep the number of snapshots specified with the <literal>NUMBER_LIMIT*</literal> and <literal>TIMELINE_LIMIT*</literal> values, even if the quota will be exceeded. It is therefore recommended to specify ranged values (<literal><replaceable>MIN</replaceable>-<replaceable>MAX</replaceable></literal>) for <literal>NUMBER_LIMIT*</literal> and <literal>TIMELINE_LIMIT*</literal> to ensure the quota can be applied.</para>
                        <para>If, for example, <literal>NUMBER_LIMIT=5-20</literal> is set, Snapper will perform a first clean-up run and reduce the number of regular numbered snapshots to 20. In case these 20 snapshots exceed the quota, Snapper will delete the oldest ones in a second run until the quota is met. A minimum of five snapshots will always be kept, regardless of the amount of space they occupy.</para>
                     </listitem>
                  </itemizedlist>
               </sect2>
            </sect1>
            <sect1>
               <title>Showing exclusive disk space used by snapshots</title>
               <para>Snapshots share data, for efficient use of storage space, so using ordinary commands like <command>du</command> and <command>df</command> will not measure used disk space accurately. When you want to free up disk space on Btrfs with quotas enabled, you need to know how much exclusive disk space is used by each snapshot, rather than shared space. Snapper 0.6 and up reports the used disk space for each snapshot in the <literal>Used Space</literal> column:</para>
               <screen><prompt role="root">#</prompt>snapper --iso list
  # | Type   | Pre # | Date                | User | Used Space | Cleanup | Description           | Userdata     
----+--------+-------+---------------------+------+------------+---------+-----------------------+--------------
 0  | single |       |                     | root |            |         | current               |              
 1* | single |       | 2019-07-22 13:08:38 | root |  16.00 KiB |         | first root filesystem |              
 2  | single |       | 2019-07-22 14:21:05 | root |  14.23 MiB | number  | after installation    | important=yes
 3  | pre    |       | 2019-07-22 14:26:03 | root | 144.00 KiB | number  | zypp(zypper)          | important=no 
 4  | post   |     3 | 2019-07-22 14:26:04 | root | 112.00 KiB | number  |                       | important=no 
 5  | pre    |       | 2019-07-23 08:19:36 | root | 128.00 KiB | number  | zypp(zypper)          | important=no 
 6  | post   |     5 | 2019-07-23 08:19:43 | root |  80.00 KiB | number  |                       | important=no 
 7  | pre    |       | 2019-07-23 08:20:50 | root | 256.00 KiB | number  | yast sw_single        |              
 8  | pre    |       | 2019-07-23 08:23:22 | root | 112.00 KiB | number  | zypp(ruby.ruby2.5)    | important=no 
 9  | post   |     8 | 2019-07-23 08:23:35 | root |  64.00 KiB | number  |                       | important=no 
10  | post   |     7 | 2019-07-23 08:24:05 | root |  16.00 KiB | number  |                       |              
</screen>
               <para>The <command>btrfs</command> command provides another view of space used by snapshots:</para>
               <screen><prompt role="root">#</prompt>btrfs qgroup show -p /
qgroupid         rfer         excl parent  
--------         ----         ---- ------  
0/5          16.00KiB     16.00KiB ---     
[...]    
0/272         3.09GiB     14.23MiB 1/0     
0/273         3.11GiB    144.00KiB 1/0     
0/274         3.11GiB    112.00KiB 1/0     
0/275         3.11GiB    128.00KiB 1/0     
0/276         3.11GiB     80.00KiB 1/0     
0/277         3.11GiB    256.00KiB 1/0     
0/278         3.11GiB    112.00KiB 1/0     
0/279         3.12GiB     64.00KiB 1/0     
0/280         3.12GiB     16.00KiB 1/0     
1/0           3.33GiB    222.95MiB --- 
</screen>
               <para>The <literal>qgroupid</literal> column displays the identification number for each subvolume, assigning a qgroup level/ID combination.</para>
               <para>The <literal>rfer</literal> column displays the total amount of data referred to in the subvolume.</para>
               <para>The <literal>excl</literal> column displays the exclusive data in each subvolume.</para>
               <para>The <literal>parent</literal> column shows the parent qgroup of the subvolumes.</para>
               <para>The final item, <literal>1/0</literal>, shows the totals for the parent qgroup. In the above example, 222.95 MiB will be freed if all subvolumes are removed. Run the following command to see which snapshots are associated with each subvolume:</para>
               <screen><prompt role="root">#</prompt>btrfs subvolume list -st /
ID	gen	top level	path	
--	---	---------	----	
267	298	266		@/.snapshots/1/snapshot
272	159	266		@/.snapshots/2/snapshot
273	170	266		@/.snapshots/3/snapshot
274	171	266		@/.snapshots/4/snapshot
275	287	266		@/.snapshots/5/snapshot
276	288	266		@/.snapshots/6/snapshot
277	292	266		@/.snapshots/7/snapshot
278	296	266		@/.snapshots/8/snapshot
279	297	266		@/.snapshots/9/snapshot
280	298	266		@/.snapshots/10/snapshot
</screen>
               <para>Doing an upgrade from one service pack to another results in snapshots occupying a lot of disk space on the system subvolumes. Manually deleting these snapshots after they are no longer needed is recommended. See <xref linkend="sec-snapper-manage-delete"/> for details.</para>
            </sect1>
            <sect1 xml:id="sec-snapper-faqs">
               <title>Frequently asked questions</title>
               <qandaset defaultlabel="qanda">
                  <qandaentry>
                     <question>
                        <para>Why does Snapper never show changes in <filename>/var/log</filename>, <filename>/tmp</filename> and other directories?</para>
                     </question>
                     <answer>
                        <para>For certain directories, we decided to exclude them from snapshots. See <xref linkend="snapper-dir-excludes"/> for a list and reasons. To exclude a path from snapshots we create a subvolume for that path.</para>
                     </answer>
                  </qandaentry>
                  <qandaentry>
                     <question>
                        <para>Can I boot a snapshot from the boot loader?</para>
                     </question>
                     <answer>
                        <para>Yes—refer to <xref linkend="sec-snapper-snapshot-boot"/> for details.</para>
                     </answer>
                  </qandaentry>
                  <qandaentry xml:id="faq-snapper-permanent">
                     <question>
                        <para>Can a snapshot be protected from deletion?</para>
                     </question>
                     <answer>
                        <para>Currently Snapper does not offer means to prevent a snapshot from being deleted manually. However, you can prevent snapshots from being automatically deleted by clean-up algorithms. Manually created snapshots (see <xref linkend="sec-snapper-manage-create"/>) have no clean-up algorithm assigned unless you specify one with <option>--cleanup-algorithm</option>. Automatically created snapshots always either have the <literal>number</literal> or <literal>timeline</literal> algorithm assigned. To remove such an assignment from one or more snapshots, proceed as follows:</para>
                        <procedure>
                           <step>
                              <para>List all available snapshots:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> snapper list -a</screen>
                           </step>
                           <step>
                              <para>Memorize the number of the snapshots you want to prevent from being deleted.</para>
                           </step>
                           <step>
                              <para>Run the following command and replace the number placeholders with the numbers you memorized:</para>
                              <screen><prompt>&gt;</prompt><command>sudo</command> snapper modify --cleanup-algorithm "" <replaceable>#1</replaceable><replaceable>#2</replaceable><replaceable>#n</replaceable></screen>
                           </step>
                           <step>
                              <para>Check the result by running <command>snapper list -a</command> again. The entry in the column <literal>Cleanup</literal> should now be empty for the snapshots you modified.</para>
                           </step>
                        </procedure>
                     </answer>
                  </qandaentry>
                  <qandaentry>
                     <question>
                        <para>Where can I get more information on Snapper?</para>
                     </question>
                     <answer>
                        <para>See the Snapper home page at <link xlink:href="http://snapper.io/"/>.</para>
                     </answer>
                  </qandaentry>
               </qandaset>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-klp" xml:lang="en"><?file klp.xml?>
            <title>Live kernel patching with KLP</title>
            <info>
               <abstract>
                  <para>This document describes the basic principles of the Kernel Live Patching (KLP) technology, and provides usage guidelines for the SLE Live Patching service.</para>
               </abstract>
            </info>
            <para>KLP makes it possible to apply the latest security updates to Linux kernels without rebooting. This maximizes system uptime and availability, which is especially important for mission-critical systems.</para>
            <para>The information provided in this document relates to the AMD64/Intel 64, POWER, and IBM Z architectures.</para>
            <sect1 xml:id="sec-klp-advantages">
               <title>Advantages of Kernel Live Patching</title>
               <para>KLP offers several benefits.</para>
               <itemizedlist>
                  <listitem>
                     <para>Keeping a large number of servers automatically up to date is essential for organizations obtaining or maintaining certain compliance certifications. KLP can help achieve compliance, while reducing the need for costly maintenance windows.</para>
                  </listitem>
                  <listitem>
                     <para>Companies that work with service-level agreement contracts must guarantee a specific level of their system accessibility and uptime. Live patching makes it possible to patch systems without incurring downtime.</para>
                  </listitem>
                  <listitem>
                     <para>Since KLP is part of the standard system update mechanism, there is no need for specialized training or introduction of complicated maintenance routines.</para>
                  </listitem>
               </itemizedlist>
            </sect1>
            <sect1 xml:id="sec-klp-overview">
               <title>Kernel Live Patching overview</title>
               <para>Kernel live patches are delivered as packages with modified code that are separate from the main kernel package. The live patches are cumulative, so the latest patch contains all fixes from the previous ones for the kernel package. Each kernel live package is tied to the exact kernel revision for which it is issued. The live patch package version number increases with every addition of fixes.</para>
               <note>
                  <title>Live patches and the running kernel</title>
                  <para>To determine the kernel patching status, use the <command>klp -v patches</command> command. The <command>uname</command> command's output does not change for patched kernels.</para>
               </note>
               <important>
                  <title>Live patches compared to kernel updates</title>
                  <para>Live patches contain only critical fixes, and they do not replace regular kernel updates that require a reboot. Consider live patches as temporary measures that protect the kernel until a proper kernel update and a reboot are performed.</para>
               </important>
               <para>The diagram below illustrates the overall relationship between live patches and kernel updates. The list of CVEs and defect reports addressed by the currently active live patch can be viewed using the <command>klp -v patches</command> command.</para>
               <informalfigure>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/klp.png" width="73%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/klp.png" width="92%"/>
                     </imageobject>
                  </mediaobject>
               </informalfigure>
               <para>It is possible to have multiple versions of the kernel package installed along with their live patches. These packages do not conflict. You can install updated kernel packages along with live patches for the running kernel. In this case, you may be prompted to reboot the system. Users with SLE Live Patching subscriptions are eligible for technical support as long as there are live patch updates for the running kernel (see <xref linkend="sec-klp-lifecycle"/>).</para>
               <para>With KLP activated, every kernel update comes with a live patch package. This live patch does not contain any fixes and serves as a seed for future live patches for the corresponding kernel. These empty seed patches are called <literal>initial patches</literal>.</para>
               <sect2 xml:id="sec-klp-scope">
                  <title>Kernel Live Patching scope</title>
                  <para>The scope of SLE Live Patching includes fixes for SUSE Common Vulnerability Scoring System (CVSS; SUSE CVSS is based on the CVSS v3.1 system) level 7+ vulnerabilities and bug fixes related to system stability or data corruption. However, it may not be technically feasible to create live patches for all fixes that fall under the specified categories. SUSE therefore reserves the right to skip fixes in situations where creating a kernel live patch is not possible for technical reasons. Currently, over 95% of qualifying fixes are released as live patches. For more information on CVSS (the base for the SUSE CVSS rating), see <link xlink:href="https://www.first.org/cvss/">Common Vulnerability Scoring System SIG</link>.</para>
               </sect2>
               <sect2 xml:id="sec-klp-limitations">
                  <title>Kernel Live Patching limitations</title>
                  <para>KLP involves replacing functions and gracefully handling replacement of interdependent function sets. This is done by redirecting calls to old code to updated code in a different memory location. Changes in data structures make the situation more complicated, as the data remain in place and cannot be extended or reinterpreted. While there are techniques that allow indirect alteration of data structures, certain fixes cannot be converted to live patches. In this situation, a system restart is the only way to apply the fixes.</para>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-klp-enable-with-yast2">
               <title>Activating Kernel Live Patching using YaST</title>
               <para>To activate KLP on your system, you need to have active SLES and SLE Live Patching subscriptions. Visit <link xlink:href="https://scc.suse.com/">SUSE Customer Center</link> to check the status of your subscriptions and obtain a registration code for the SLE Live Patching subscription.</para>
               <para>To activate Kernel Live Patching on your system, follow these steps:</para>
               <procedure>
                  <step>
                     <para>Run the <command>yast2 registration</command> command and click <guimenu>Select Extensions</guimenu>.</para>
                  </step>
                  <step>
                     <para>Select <guimenu>SUSE Linux Enterprise Live Patching 15</guimenu> in the list of available extensions and click <guimenu>Next</guimenu>.</para>
                  </step>
                  <step>
                     <para>Confirm the license terms and click <guimenu>Next</guimenu>.</para>
                  </step>
                  <step>
                     <para>Enter your SLE Live Patching registration code and click <guimenu>Next</guimenu>.</para>
                  </step>
                  <step>
                     <para>Check the <guimenu>Installation Summary</guimenu> and selected <guimenu>Patterns</guimenu>. The patterns <systemitem>Live Patching</systemitem> and <systemitem>SLE Live Patching Lifecycle Data</systemitem> should be automatically selected for installation along with additional packages to satisfy dependencies.</para>
                  </step>
                  <step>
                     <para>Click <guimenu>Accept</guimenu> to complete the installation. This installs the base Kernel Live Patching components on your system, the initial live patch, and the required dependencies.</para>
                  </step>
               </procedure>
            </sect1>
            <sect1 xml:id="sec-klp-enable-cli">
               <title>Activating Kernel Live Patching from the command line</title>
               <para>To activate Kernel Live Patching, you need to have active SLES and SLES Live Patching subscriptions. Visit <link xlink:href="https://scc.suse.com/">SUSE Customer Center</link> to check the status of your subscriptions and obtain a registration code for the SLES Live Patching subscription.</para>
               <procedure>
                  <step>
                     <para>Run <command>sudo SUSEConnect --list-extensions</command>. Note the exact activation command for SLES Live Patching. Example command output (abbreviated):</para>
                     <screen>$ SUSEConnect --list-extensions
...
SUSE Linux Enterprise Live Patching <phrase role="productnumber">15 SP7</phrase> x86_64
Activate with: SUSEConnect -p sle-module-live-patching/15.7/x86_64 \
  -r ADDITIONAL REGCODE</screen>
                  </step>
                  <step>
                     <para>Activate SLES Live Patching using the obtained command followed by <option>-r <replaceable>LIVE_PATCHING_REGISTRATION_CODE</replaceable></option>, for example:</para>
                     <screen>SUSEConnect -p sle-module-live-patching/15.7/x86_64 \
  -r <replaceable>LIVE_PATCHING_REGISTRATION_CODE</replaceable></screen>
                  </step>
                  <step>
                     <para>Install the required packages and dependencies using the command <command>zypper install -t pattern lp_sles</command></para>
                  </step>
               </procedure>
               <para>At this point, the system has already been live-patched.</para>
               <para>Here is how the process works behind the scenes: when the package installation system detects that there is an installed kernel that can be live-patched, and that there is a live patch for it in the software channel, the system selects the live patch for installation. The kernel then receives the live patch fixes <emphasis>as part of the package installation</emphasis>. The kernel gets live-patched even before the product installation is complete.</para>
            </sect1>
            <sect1 xml:id="sec-klp-perform">
               <title>Performing Kernel Live Patching</title>
               <para>Kernel live patches are installed as part of regular system updates. However, there are several things you should be aware of.</para>
               <itemizedlist>
                  <listitem>
                     <para>The kernel is live-patched if a <package>kernel-livepatch-*</package> package has been installed for the running kernel. You can use the command <command>zypper se --details kernel-livepatch-*</command> to check what kernel live patch packages are installed on your system.</para>
                  </listitem>
                  <listitem>
                     <para>When the <package>kernel-default</package> package is installed, the update manager prompts you to reboot the system. To prevent this message from appearing, you can filter out kernel updates from the patching operation. This can be done by adding package locks with Zypper. SUSE Multi-Linux Manager also makes it possible to filter channel contents (see <link xlink:href="https://documentation.suse.com/suma/5.0/en/suse-manager/administration/live-patching.html">Live Patching with SUSE Multi-Linux Manager</link>).</para>
                  </listitem>
                  <listitem>
                     <para>You can check patching status using the <command>klp status</command> command. To examine installed patches, run the <command>klp -v patches</command> command.</para>
                  </listitem>
                  <listitem>
                     <para>Keep in mind that while there may be multiple kernel packages installed on the system, only one of them is running at any given time. Similarly, there may be multiple live patch packages installed, but only one live patch is loaded into the kernel.</para>
                  </listitem>
                  <listitem>
                     <para>The active live patch is included in the <literal>initrd</literal>. This means that in case of an unexpected reboot, the system comes up with the live patch fixes applied, so there is no need to perform patching again.</para>
                  </listitem>
               </itemizedlist>
               <sect2 xml:id="sec-klp-lifecycle">
                  <title>Checking expiration date of the live patch</title>
                  <para>Make sure that the <package>lifecycle-data-sle-module-live-patching</package> is installed, then run the <command>zypper lifecycle</command> command. You should see expiration dates for live patches in the <literal>Package end of support if different from product</literal> section of the output.</para>
                  <para>Every live patch receives updates for one year from the release of the underlying kernel package. The <link xlink:href="https://www.suse.com/products/live-patching/current-patches/">Maintained kernels, patch updates and lifecycle</link> page allows you to check expiration dates based on the running kernel version without installing the product extension.</para>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-klp-troubleshoot">
               <title>Troubleshooting Kernel Live Patching issues</title>
               <sect2 xml:id="sec-klp-man-patch-downgrade">
                  <title>Manual patch downgrade</title>
                  <para>If you find the latest live patch problematic, you can downgrade the currently installed live patch back to its previous version. We recommend performing patch downgrade before the system starts exhibiting issues. Keep in mind that a system with kernel warnings or kernel error traces in the system log may not be suitable for the patch downgrade procedure. If you are unsure whether the system meets the requirements for a patch downgrade, contact SUSE Technical Support for help.</para>
                  <procedure>
                     <title>Manual patch downgrade</title>
                     <step>
                        <para>Identify the running live patch using the <command>klp -v patches</command> command. You can see the currently running patch on the line starting with <literal>RPM:</literal>. For example:</para>
                        <screen>RPM: kernel-livepatch-6_4_0-150700_38-default-1-150700.1.23.x86_64</screen>
                        <para>The <literal>6_4_0-150600_9-default</literal> in the example above denotes the exact running kernel version.</para>
                     </step>
                     <step>
                        <para>Use the command <command>zypper search -s kernel-livepatch-<replaceable>RUNNING_KERNEL_VERSION</replaceable>-default</command> to search for previous versions of the patch. The command returns a list of available package versions. Keep in mind that for every new live patch package release, the version number increases by one. Make sure that you choose the version number one release lower than the current one.</para>
                     </step>
                     <step>
                        <para>Install the desired version with the command <command>zypper in --oldpackage kernel-livepatch-<replaceable>RUNNING_KERNEL_VERSION</replaceable>-default=<replaceable>DESIRED_VERSION</replaceable></command>.</para>
                     </step>
                  </procedure>
               </sect2>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-ulp" xml:lang="en"><?file ulp.xml?>
            <title>User space live patching</title>
            <info>
               <abstract>
                  <para>This chapter describes the basic principles and usage of user space live patching.</para>
               </abstract>
            </info>
            <sect1 xml:id="sec-ulp">
               <title>About user space live patching</title>
               <para>User space live patching (ULP) refers to the process of applying patches to the libraries used by a running process without interrupting them. Every time a security fix is available as a live patch, customer services will be secured after applying the live patch without restarting the processes.</para>
               <para>ULP is supported on the following architectures:</para>
               <itemizedlist>
                  <listitem>
                     <para>AMD64/Intel 64</para>
                  </listitem>
                  <listitem>
                     <para>ppc64le (starting with <phrase role="productname">SUSE Linux Enterprise Server</phrase> 15 SP7)</para>
                  </listitem>
               </itemizedlist>
               <para>Live patching operations are performed using the <systemitem>ulp</systemitem> tool that is part of <systemitem>libpulp</systemitem>. <systemitem>libpulp</systemitem> is a framework that consists of the <systemitem>libpulp.so</systemitem> library and the <command>ulp</command> binary that makes libraries live patchable and applies live patches.</para>
               <tip>
                  <para>You can run the <command>ulp</command> command either as a normal user or a privileged user via the <command>sudo</command> mechanism. The difference is that running <command>ulp</command> via <command>sudo</command> lets you view information of processes or patch processes that are running by <systemitem class="username">root</systemitem>.</para>
               </tip>
               <tip>
                  <title>Install <package>libpulp-load-default</package>
                  </title>
                  <para>The <package>libpulp-load-default</package> automates the requirements and manual steps mentioned in <xref linkend="sec-ulp-prereqs"/> and <xref linkend="sec-ulp-libpulp"/>. If you install the package, you can skip those sections.</para>
               </tip>
               <sect2 xml:id="sec-ulp-prereqs">
                  <title>Prerequisites</title>
                  <para>For ULP to work, two requirements must be met.</para>
                  <itemizedlist>
                     <listitem>
                        <para>Install the ULP on your system by running:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> zypper in libpulp0 libpulp-tools</screen>
                     </listitem>
                     <listitem>
                        <para>Applications with desired live patch support must be launched preloading the <systemitem>libpulp.so.0</systemitem> library. See <xref linkend="sec-ulp-libpulp"/> for more details.</para>
                     </listitem>
                  </itemizedlist>
               </sect2>
               <sect2 xml:id="sec-ulp-supported-libs">
                  <title>Supported libraries</title>
                  <para>Currently, only <systemitem>glibc</systemitem> and <systemitem>openssl</systemitem> (<systemitem>openssl1_1</systemitem> and <systemitem>openssl-3</systemitem>) are supported. Additional packages will be available after they are prepared for live patching. To receive <systemitem>glibc</systemitem> and <systemitem>openssl-1_1-</systemitem> live patches, install the following packages:</para>
                  <screen><prompt>&gt;</prompt>zypper install glibc-livepatches openssl-1_1-livepatches openssl-3-livepatches</screen>
               </sect2>
               <sect2 xml:id="sec-ulp-libpulp">
                  <title>Using <systemitem>libpulp</systemitem>
                  </title>
                  <para>To enable live patching on an application, you need to preload the <systemitem>libpulp.so.0</systemitem> library when starting the application:</para>
                  <screen><prompt>&gt;</prompt>LD_PRELOAD=/usr/lib64/libpulp.so.0 <replaceable>APPLICATION_CMD</replaceable></screen>
                  <sect3 xml:id="sec-ulp-livepatch-check">
                     <title>Checking if a library is live patchable</title>
                     <para>To check whether a library is live patchable, use the following command:</para>
                     <screen><prompt>&gt;</prompt>ulp livepatchable <replaceable>PATH_TO_LIBRARY</replaceable></screen>
                  </sect3>
                  <sect3 xml:id="sec-ulp-livepatch-container-check">
                     <title>Checking if a <filename>.so</filename> file is a live patch container</title>
                     <para>A shared object (<filename>.so</filename>) is a live patch container if it contains the ULP patch description embedded into it. You can verify it with the following command:</para>
                     <screen><prompt>&gt;</prompt>readelf -S <replaceable>SHARED_OBJECT</replaceable> | grep .ulp</screen>
                     <para>If the output shows that there are both <literal>.ulp</literal> and <literal>.ulp.rev</literal> sections in the shared object, then it is a live patch container.</para>
                  </sect3>
                  <sect3 xml:id="sec-ulp-apply-livepatch">
                     <title>Applying live patches</title>
                     <para>Live patches provided by SUSE are shipped through usual updates if the following packages are installed: <package>glibc-livepatches</package><package>openssl-livepatches</package><package>openssl-3-livepatches</package>.</para>
                     <para>Custom live patches are applied using the <command>ulp trigger</command> command, for example:</para>
                     <screen><prompt>&gt;</prompt>ulp trigger -p <replaceable>PID</replaceable><replaceable>LIVEPATCH</replaceable>.so</screen>
                     <para>Replace <literal>PID</literal> with the process ID of the running process that uses the library to be patched and <literal>LIVEPATCH.so</literal> with the actual live patch file. The command returns one of the following status messages:</para>
                     <variablelist>
                        <varlistentry>
                           <term>SUCCESS</term>
                           <listitem>
                              <para>The live patching operation was successful.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>SKIPPED</term>
                           <listitem>
                              <para>The patch was skipped because it was not designed for any library that is loaded in the process.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>ERROR</term>
                           <listitem>
                              <para>An error occurred, and you can retrieve more information by inspecting the <systemitem>libpulp</systemitem> internal message buffer. See <xref linkend="sec-ulp-internal-messages"/> for more information.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <para>It is also possible to apply multiple live patches by using wildcards, for example:</para>
                     <screen><prompt>&gt;</prompt>ulp trigger '*.so'</screen>
                     <para>The command tries to apply every patch in the current folder to every process that have the <systemitem>libpulp</systemitem> library loaded. If the patch is not suitable for the process, it is automatically skipped. In the end, the tool shows how many patches it successfully applied to how many processes.</para>
                  </sect3>
                  <sect3 xml:id="sec-ulp-revert-livepatch">
                     <title>Reverting live patches</title>
                     <para>You can use the <command>ulp trigger</command> command to revert live patches. There are two ways to revert live patches. You can revert a live patch by using the <option>--revert</option> switch and passing the live patch container:</para>
                     <screen><prompt>&gt;</prompt>ulp trigger -p <replaceable>PID</replaceable> --revert <replaceable>LIVEPATCH</replaceable>.so</screen>
                     <para>Alternatively, it is possible to remove all patches associated with a particular library, for example:</para>
                     <screen><prompt>&gt;</prompt>ulp trigger -p <replaceable>PID</replaceable> --revert-all=<replaceable>LIBRARY</replaceable></screen>
                     <para>In the example, <replaceable>LIBRARY</replaceable> refers to the actual library, such as <systemitem>libcrypto.so.1.1</systemitem>.</para>
                     <para>The latter approach can be useful when the source code of the original live patch is not available. Or you want to remove a specific old patch and apply a new one while the target application is still running a secure code, for example:</para>
                     <screen><prompt>&gt;</prompt>ulp trigger -p <replaceable>PID</replaceable>  --revert-all=libcrypto.so.1.1 new_livepatch2.so</screen>
                  </sect3>
                  <sect3 xml:id="sec-ulp-verify-patches">
                     <title>View applied patches</title>
                     <para>It is possible to verify which applications have live patches applied by running:</para>
                     <screen><prompt>&gt;</prompt>ulp patches</screen>
                     <para>The output shows which libraries are live patchable and patches loaded in programs, as well which bugs the patch addresses:</para>
                     <screen>PID: 10636, name: test
  Livepatchable libraries:
    in /lib64/libc.so.6:
      livepatch: libc_livepatch1.so
        bug labels: jsc#SLE-0000
    in /usr/lib64/libpulp.so.0:</screen>
                     <para>It is also possible to see which functions are patched by the live patch:</para>
                     <screen><prompt>&gt;</prompt>ulp dump <replaceable>LIVEPATCH.so</replaceable></screen>
                  </sect3>
                  <sect3 xml:id="sec-ulp-internal-messages">
                     <title>View internal message queue</title>
                     <para>Log messages from <systemitem>libpulp.so</systemitem> are stored in a buffer inside the library and are not displayed unless requested by the user. To show these messages, run:</para>
                     <screen><prompt>&gt;</prompt>ulp messages -p <replaceable>PID</replaceable></screen>
                  </sect3>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-ulp-info">
               <title>More information</title>
               <para>Further information about <systemitem>libpulp</systemitem> is available in the project's <link xlink:href="https://github.com/SUSE/libpulp">Git repository</link>.</para>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-transactional-updates" xml:lang="en"><?file transactional_updates.xml?>
            <title>Transactional updates</title>
            <info>
               <abstract>
                  <para>Transactional updates are available in <phrase role="productname">SUSE Linux Enterprise Server</phrase> as a technology preview for updating SLES when the root file system is read-only. Transactional updates are atomic—all updates are applied only if all succeed—and support rollbacks. It does not affect a running system as no changes are activated until after the system is rebooted. As reboots are disruptive, the administrator must decide if a reboot is more expensive than disturbing running services. If reboots are too expensive then do not use transactional updates.</para>
                  <para>Transactional updates are run daily by the <command>transactional-update</command> script. The script checks for available updates. If there are any updates, it creates a new snapshot of the root file system in the background, and then fetches updates from the release channels. After the new snapshot is updated, it is marked as active and will be the new default root file system after the next reboot of the system. When <command>transactional-update</command> is set to run automatically (which is the default behavior) it also reboots the system. Both the time that the update runs and the reboot maintenance window are configurable.</para>
                  <para>Only packages that are part of the snapshot of the root file system can be updated. If packages contain files that are not part of the snapshot, the update could fail or break the system.</para>
                  <para>RPMs that require a license to be accepted cannot be updated.</para>
               </abstract>
            </info>
            <sect1 xml:id="sec-tu-limitations">
               <title>Limitations</title>
               <para>Currently, there are certain limitations in the functionality of transactional updates. The following packages do not work with the <command>transactional-update</command> command:</para>
               <itemizedlist>
                  <listitem>
                     <para>The <package>nginx</package> default <filename>index.html</filename> page may not be available</para>
                  </listitem>
                  <listitem>
                     <para><package>tomcat-webapps</package> and <package>tomcat-admin-webapps</package></para>
                  </listitem>
                  <listitem>
                     <para><package>phpMyAdmin</package></para>
                  </listitem>
                  <listitem>
                     <para><package>sca-appliance-*</package></para>
                  </listitem>
                  <listitem>
                     <para><package>mpi-selector</package></para>
                  </listitem>
                  <listitem>
                     <para><package>emacs</package> works except for Emacs games</para>
                  </listitem>
                  <listitem>
                     <para><package>bind</package> and <package>bind-chrootenv</package></para>
                  </listitem>
                  <listitem>
                     <para><package>docbook*</package></para>
                  </listitem>
                  <listitem>
                     <para><package>sblim-sfcb*</package></para>
                  </listitem>
                  <listitem>
                     <para><package>texlive*</package></para>
                  </listitem>
                  <listitem>
                     <para><package>iso_ent</package></para>
                  </listitem>
                  <listitem>
                     <para><package>openjade</package></para>
                  </listitem>
                  <listitem>
                     <para><package>opensp</package></para>
                  </listitem>
                  <listitem>
                     <para><package>pcp</package></para>
                  </listitem>
                  <listitem>
                     <para><package>plymouth</package></para>
                  </listitem>
                  <listitem>
                     <para><package>postgresql-server-10</package></para>
                  </listitem>
                  <listitem>
                     <para><package>pulseaudio-gdm-hooks</package></para>
                  </listitem>
                  <listitem>
                     <para><package>smartmontools</package></para>
                  </listitem>
               </itemizedlist>
               <para>The updater component of the system installer does not work with a read-only file system as it has no support for transactional updates.</para>
               <para>Further considerations:</para>
               <itemizedlist>
                  <listitem>
                     <para>It is a good idea to minimize the time between updating the system and rebooting the machine.</para>
                  </listitem>
                  <listitem>
                     <para>Only one update can be applied at a time. Be sure to reboot after an update, and before the next update is applied.</para>
                  </listitem>
                  <listitem>
                     <para><command>update-alternatives</command> should not be run after a transactional update until the machine has been rebooted.</para>
                  </listitem>
                  <listitem>
                     <para>Do not create new system users or system groups after a transactional update until after reboot. It is acceptable to create normal users and groups (UID &gt; 1000, GID &gt; 1000).</para>
                  </listitem>
                  <listitem>
                     <para>YaST is not yet aware of transactional updates. If a YaST module needs to install additional packages, this does not work. Normal system operations that modify configuration files in <filename>/etc</filename> work.</para>
                  </listitem>
                  <listitem>
                     <para>For <package>php7-fastcgi</package>, you must manually create a symbolic link, <filename>/srv/www/cgi-bin/php</filename>, that points to <filename>/usr/bin/php-cgi</filename>.</para>
                  </listitem>
                  <listitem>
                     <para><package>ntp</package>is part of the Legacy Module for migration from older SLES versions. It is not supported on a new <phrase role="productname">SUSE Linux Enterprise Server</phrase> installation, and has been replaced by <package>chrony</package>. If you continue to use <package>ntp</package>, a fresh installation is required to work correctly with transactional updates.</para>
                  </listitem>
                  <listitem>
                     <para><package>sblim-sfcb</package>: the whole sblim ecosystem is incompatible with transactional update.</para>
                  </listitem>
                  <listitem>
                     <para><command>btrfs-defrag</command> from the <package>btrfsmaintenance</package> package does not work with a read-only root file system.</para>
                  </listitem>
                  <listitem>
                     <para>For <command>btrfs-balance</command>, the variable <literal>BTRFS_BALANCE_MOUNTPOINTS</literal> in <filename>/etc/sysconfig/btrfsmaintenance</filename> must be changed from <literal>/</literal> to <literal>/.snapshots</literal>.</para>
                  </listitem>
                  <listitem>
                     <para>For <command>btrfs-scrub</command>, the variable <literal>BTRFS_SCRUB_MOUNTPOINTS</literal> in <filename>/etc/sysconfig/btrfsmaintenance</filename> must be changed from <literal>/</literal> to <literal>/.snapshots</literal>.</para>
                  </listitem>
               </itemizedlist>
            </sect1>
            <sect1 xml:id="sec-install-tu">
               <title>Enabling <package>transactional-update</package>
               </title>
               <para>You must enable the Transactional Server Module during system installation, and then select the Transactional Server System Role. Installing any package from the Transactional Server Module later in a running system is NOT supported and may break the system.</para>
               <para>Changing the subvolume layout of the root partition, or putting subdirectories or subvolumes of the root partition on their own partitions (except <filename>/home</filename>, <filename>/var</filename>, <filename>/srv</filename>, and <filename>/opt</filename>) is not supported, and may break the system.</para>
            </sect1>
            <sect1 xml:id="sec-tu-disable">
               <title>Managing automatic updates</title>
               <para>Automatic updates are controlled by a <command>systemd.timer</command> that runs once per day. This applies all updates, and informs <command>rebootmgrd</command> that the machine should be rebooted. You may adjust the time when the update runs, see systemd.timer(5). To adjust the maintenance window, which is when <command>rebootmgrd</command> reboots the system, see rebootmgrd(8).</para>
               <para>You can disable automatic transactional updates with this command:</para>
               <screen><prompt role="root">#</prompt><command>systemctl --now disable transactional-update.timer</command></screen>
            </sect1>
            <sect1>
               <title>The <command>transactional-update</command> command</title>
               <para>The <command>transactional-update</command> command enables atomic installation or removal of updates. Updates are applied only if they all can be successfully installed. <command>transactional-update</command> creates a snapshot of your system before the update is applied, and you can restore this snapshot. All changes become active only after reboot.</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <literal>--continue</literal>
                     </term>
                     <listitem>
                        <para>The <command>--continue</command> option is for making multiple changes to an existing snapshot without rebooting.</para>
                        <para>The default <command>transactional-update</command> behavior is to create a new snapshot from the current root file system. If you forget something, such as installing a new package, you have to reboot to apply your previous changes, run <command>transactional-update</command> again to install the forgotten package, and reboot again. You cannot run the <command>transactional-update</command> command multiple times without rebooting to add more changes to the snapshot, because that creates separate independent snapshots that do not include changes from the previous snapshots.</para>
                        <para>Use the <command>--continue</command> option to make as many changes as you want without rebooting. A separate snapshot is made each time, and each snapshot contains all the changes you made in the previous snapshots, plus your new changes. Repeat this process as many times as you want, and when the final snapshot includes everything you want reboot the system, and your final snapshot becomes the new root file system.</para>
                        <para>Another useful feature of the <command>--continue</command> option is you may select any existing snapshot as the base for your new snapshot. The following example demonstrates running <command>transactional-update</command> to install a new package in a snapshot based on snapshot 13, and then running it again to install another package:</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update pkg install <replaceable>package_1</replaceable></command></screen>
                        <screen><prompt role="root">#</prompt><command>transactional-update --continue 13 pkg install <replaceable>package_2</replaceable></command></screen>
                        <para>The <command>--continue [num]</command> option calls <command>snapper create --from</command>, see <xref linkend="sec-snapper-manage-create"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>cleanup</literal>
                     </term>
                     <listitem>
                        <para>If the current root file system is identical to the active root file system (after a reboot, before <command>transactional-update</command> creates a new snapshot with updates), all old snapshots without a cleanup algorithm get a cleanup algorithm set. This ensures that old snapshots are deleted by Snapper. (See the section about cleanup algorithms in snapper(8).) This also removes all unreferenced (and thus unused) <filename>/etc</filename> overlay directories in <filename>/var/lib/overlay</filename>:</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update cleanup</command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>pkg in/install</literal>
                     </term>
                     <listitem>
                        <para>Installs individual packages from the available channels using the <command>zypper install</command> command. This command can also be used to install Program Temporary Fix (PTF) RPM files.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update pkg install <replaceable>package_name</replaceable></command></screen>
                        <para>or</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update pkg install <replaceable>rpm1 rpm2</replaceable></command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>pkg rm/remove</literal>
                     </term>
                     <listitem>
                        <para>Removes individual packages from the active snapshot using the <command>zypper remove</command> command. This command can also be used to remove PTF RPM files.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update pkg remove <replaceable>package_name</replaceable></command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>pkg up/update</literal>
                     </term>
                     <listitem>
                        <para>Updates individual packages from the active snapshot using the <command>zypper update</command> command. Only packages that are part of the snapshot of the base file system can be updated.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update pkg update <replaceable>package_name</replaceable></command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>up/update</literal>
                     </term>
                     <listitem>
                        <para>If there are new updates available, a new snapshot is created and <command>zypper up/update</command> updates the snapshot.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update up</command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>dup</literal>
                     </term>
                     <listitem>
                        <para>If there are new updates available, a new snapshot is created and <command>zypper dup –no-allow-vendor-change</command> updates the snapshot. The snapshot is activated afterwards and becomes the new root file system after reboot.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update dup</command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>patch</literal>
                     </term>
                     <listitem>
                        <para>If there are new updates available, a new snapshot is created and <command>zypper patch</command> updates the snapshot.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update patch</command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>rollback</literal>
                     </term>
                     <listitem>
                        <para>This sets the default subvolume. On systems with a read-write file system <command>snapper rollback</command> is called. On a read-only file system and without any argument, the current system is set to a new default root file system. If you specify a number, that snapshot is used as the default root file system. On a read-only file system, it does not create any additional snapshots.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update rollback <replaceable>snapshot_number</replaceable></command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>grub.cfg</literal>
                     </term>
                     <listitem>
                        <para>This creates a new GRUB2 configuration. Sometimes it is necessary to adjust the boot configuration, for example, adding additional kernel parameters. Edit <replaceable>/etc/default/grub</replaceable>, run <command>transactional-update grub.cfg</command>, and then reboot to activate the change. You must immediately reboot, or the new GRUB2 configuration gets overwritten with the default by the next <command>transactional-update</command> run.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update grub.cfg</command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>reboot</literal>
                     </term>
                     <listitem>
                        <para>This parameter triggers a reboot after the action is completed.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update <replaceable>dup</replaceable> reboot</command></screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <literal>--help</literal>
                     </term>
                     <listitem>
                        <para>This prints a help screen with options and subcommands.</para>
                        <screen><prompt role="root">#</prompt><command>transactional-update --help</command></screen>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="sec-tu-troubleshooting">
               <title>Troubleshooting</title>
               <para>If the upgrade fails, run <command>supportconfig</command> to collect log data. Provide the resulting files, including <filename>/var/log/transactional-update.log</filename> to SUSE Support.</para>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-vnc"><?file vnc.xml?>
            <title>Remote graphical sessions with VNC</title>
            <info>
               <abstract>
                  <para>Virtual Network Computing (VNC) enables you to access a remote computer via a graphical desktop, and run remote graphical applications. VNC is platform-independent and accesses the remote machine from any operating system. This chapter describes how to connect to a VNC server with the desktop clients vncviewer and Remmina, and how to operate a VNC server.</para>
                  <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> supports two different kinds of VNC sessions: one-time sessions that <quote>live</quote> While the VNC connection from the client is kept up, and persistent sessions that <quote>live</quote> until they are explicitly terminated.</para>
                  <para>A VNC server can offer both kinds of sessions simultaneously on different ports, but an open session cannot be converted from one type to the other.</para>
               </abstract>
            </info>
            <sect1 xml:id="sec-vnc-viewer">
               <title>The <command>vncviewer</command> client</title>
               <para>To connect to a VNC service provided by a server, a client is needed. The default in <phrase role="productname">SUSE Linux Enterprise Server</phrase> is <command>vncviewer</command>, provided by the <systemitem class="resource">tigervnc</systemitem> package.</para>
               <sect2 xml:id="sec-vnc-viewer-connectcli">
                  <title>Connecting using the vncviewer CLI</title>
                  <para>To start your VNC viewer and initiate a session with the server, use the command:</para>
                  <screen><prompt>&gt;</prompt>vncviewer jupiter.example.com:1</screen>
                  <para>Instead of the VNC display number you can also specify the port number with two colons:</para>
                  <screen><prompt>&gt;</prompt>vncviewer jupiter.example.com::5901</screen>
                  <note>
                     <title>Display and port number</title>
                     <para>The actual display or port number you specify in the VNC client must be the same as the display or port number selected when configuring a VNC server on the target machine. See <xref linkend="sec-vnc-persistent"/> for further info.</para>
                  </note>
               </sect2>
               <sect2 xml:id="sec-vnc-viewer-connectgui">
                  <title>Connecting using the vncviewer GUI</title>
                  <para>When running <command>vncviewer</command> without specifying <command>--listen</command> or a host to connect to, it shows a window asking for connection details. Enter the host into the <guimenu>VNC server</guimenu> field like in <xref linkend="sec-vnc-viewer-connectcli"/> and click <guimenu>Connect</guimenu>.</para>
                  <figure xml:id="fig-vnc-viewer-connectgui">
                     <title>vncviewer</title>
                     <mediaobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/vnc_connect.png"/>
                        </imageobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/vnc_connect.png"/>
                        </imageobject>
                     </mediaobject>
                  </figure>
               </sect2>
               <sect2 xml:id="sec-vnc-viewer-encrypt">
                  <title>Notification of unencrypted connections</title>
                  <para>The VNC protocol supports different kinds of encrypted connections, not to be confused with password authentication. If a connection does not use TLS, the text <quote>(Connection not encrypted!)</quote> can be seen in the window title of the VNC viewer.</para>
               </sect2>
            </sect1>
            <sect1 xml:id="vnc-remmina">
               <title>Remmina: the remote desktop client</title>
               <para>Remmina is a modern and feature-rich remote desktop client. It supports several access methods, for example, VNC, SSH, RDP and Spice.</para>
               <sect2 xml:id="vnc-remmina-install">
                  <title>Installation</title>
                  <para>To use Remmina, verify whether the <package>remmina</package> package is installed on your system, and install it if not. Remember to install the VNC plug-in for Remmina as well:</para>
                  <screen><prompt role="root">#</prompt>zypper in remmina remmina-plugin-vnc
</screen>
               </sect2>
               <sect2 xml:id="vnc-remmina-usage">
                  <title>Main window</title>
                  <para>Run Remmina by entering the <command>remmina</command> command.</para>
                  <figure>
                     <title>Remmina's main window</title>
                     <mediaobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/remmina.png" width="46%"/>
                        </imageobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/remmina.png" width="46%"/>
                        </imageobject>
                     </mediaobject>
                  </figure>
                  <para>The main application window shows the list of stored remote sessions. Here you can add and save a new remote session, quick-start a new session without saving it, start a previously saved session, or set Remmina's global preferences.</para>
               </sect2>
               <sect2 xml:id="vnc-remmina-addnew">
                  <title>Adding remote sessions</title>
                  <para>To add and save a new remote session, click <inlinemediaobject><imageobject outputformat="print"><imagedata fileref="media/remmina_plus.png" width="4mm" format="PNG"/></imageobject><imageobject outputformat="screen"><imagedata fileref="media/remmina_plus.png" width="4mm" format="PNG"/></imageobject></inlinemediaobject> in the top left of the main window. The <guimenu>Remote Desktop Preference</guimenu> window opens.</para>
                  <figure>
                     <title>Remote desktop preference</title>
                     <mediaobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/remmina_session_details.png" width="73%"/>
                        </imageobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/remmina_session_details.png" width="73%"/>
                        </imageobject>
                     </mediaobject>
                  </figure>
                  <para>Complete the fields that specify your newly added remote session profile. The most important are:</para>
                  <variablelist>
                     <varlistentry>
                        <term>Name</term>
                        <listitem>
                           <para>Name of the profile. It will be listed in the main window.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Protocol</term>
                        <listitem>
                           <para>The protocol to use when connecting to the remote session, for example, VNC.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Server</term>
                        <listitem>
                           <para>The IP or DNS address and display number of the remote server.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>User name, password</term>
                        <listitem>
                           <para>Credentials to use for remote authentication. Leave empty for no authentication.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Color depth, quality</term>
                        <listitem>
                           <para>Select the best options according to your connection speed and quality.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>Select the <guimenu>Advanced</guimenu> tab to enter more specific settings.</para>
                  <tip>
                     <title>Disable encryption</title>
                     <para>If the communication between the client and the remote server is not encrypted, activate <guimenu>Disable encryption</guimenu>, otherwise the connection fails.</para>
                  </tip>
                  <para>Select the <guimenu>SSH</guimenu> tab for advanced SSH tunneling and authentication options.</para>
                  <para>Confirm with <guimenu>Save</guimenu>. Your new profile is now listed in the main window.</para>
               </sect2>
               <sect2 xml:id="vnc-remmina-start">
                  <title>Starting remote sessions</title>
                  <para>You can either start a previously saved session, or quick-start a remote session without saving the connection details.</para>
                  <sect3 xml:id="vnc-remmina-quickstart">
                     <title>Quick-starting remote sessions</title>
                     <para>To start a remote session quickly without adding and saving connection details, use the drop-down box and text box at the top of the main window.</para>
                     <figure>
                        <title>Quick-starting</title>
                        <mediaobject>
                           <imageobject outputformat="print">
                              <imagedata fileref="media/remmina_quickstart.png" width="36%"/>
                           </imageobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/remmina_quickstart.png" width="36%"/>
                           </imageobject>
                        </mediaobject>
                     </figure>
                     <para>Select the communication protocol from the drop-down list, for example, <quote>VNC</quote>, then enter the VNC server DNS or IP address followed by a colon and a display number, and confirm with <keycap function="enter"/>.</para>
                  </sect3>
                  <sect3>
                     <title>Opening saved remote sessions</title>
                     <para>To open a specific remote session, double-click it from the list of sessions.</para>
                  </sect3>
                  <sect3>
                     <title>Remote sessions window</title>
                     <para>Remote sessions are opened in tabs of a separate window. Each tab hosts one session. The toolbar on the left of the window helps you manage the windows/sessions. For example, toggle full-screen mode, resize the window to match the display size of the session, send specific keystrokes to the session, take screenshots of the session, or set the image quality.</para>
                     <figure>
                        <title>Remmina viewing remote session</title>
                        <mediaobject>
                           <imageobject outputformat="print">
                              <imagedata fileref="media/remmina_sle15inside.png" width="73%"/>
                           </imageobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/remmina_sle15inside.png" width="73%"/>
                           </imageobject>
                        </mediaobject>
                     </figure>
                  </sect3>
               </sect2>
               <sect2 xml:id="vnc-remmina-edit-delete-clone">
                  <title>Editing, copying, and deleting saved sessions</title>
                  <para>To <emphasis>edit</emphasis> a saved remote session, right-click its name in Remmina's main window and select <guimenu>Edit</guimenu>. Refer to <xref linkend="vnc-remmina-addnew"/> for the description of the relevant fields.</para>
                  <para>To <emphasis>copy</emphasis> a saved remote session, right-click its name in Remmina's main window and select <guimenu>Copy</guimenu>. In the <guimenu>Remote Desktop Preference</guimenu> window, change the name of the profile, optionally adjust relevant options, and confirm with <guimenu>Save</guimenu>.</para>
                  <para>To <emphasis>Delete</emphasis> a saved remote session, right-click its name in Remmina's main window and select <guimenu>Delete</guimenu>. Confirm with <guimenu>Yes</guimenu> in the next dialog.</para>
               </sect2>
               <sect2 xml:id="vnc-remmina-cmdline">
                  <title>Running remote sessions from the command line</title>
                  <para>If you need to open a remote session from the command line or from a batch file without first opening the main application window, use the following syntax:</para>
                  <screen><prompt>&gt;</prompt>remmina -c <replaceable>profile_name</replaceable>.remmina
</screen>
                  <para>Remmina's profile files are stored in the <filename>.local/share/remmina/</filename> directory in your home directory. To determine which profile file belongs to the session you want to open, run Remmina, click the session name in the main window, and read the path to the profile file in the window's status line at the bottom.</para>
                  <figure>
                     <title>Reading path to the profile file</title>
                     <mediaobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/remmina_status.png" width="46%"/>
                        </imageobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/remmina_status.png" width="46%"/>
                        </imageobject>
                     </mediaobject>
                  </figure>
                  <para>While Remmina is not running, you can rename the profile file to a more reasonable file name, such as <filename>sle15.remmina</filename>. You can even copy the profile file to your custom directory and run it using the <command>remmina -c</command> command from there.</para>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-vnc-one-time">
               <title>Configuring one-time sessions on the VNC server</title>
               <para>A one-time session is initiated by the remote client. It starts a graphical login screen on the server. This way you can choose the user which starts the session and, if supported by the login manager, the desktop environment. When you cancel the client connection to such a VNC session, all applications started within that session are terminated, too. One-time VNC sessions cannot be shared, but it is possible to have multiple sessions on a single host at the same time.</para>
               <procedure xml:id="pro-vnc-one-time-activate">
                  <title>Enabling one-time VNC sessions</title>
                  <step>
                     <para>Start <menuchoice><guimenu>YaST</guimenu><guimenu>Network Services</guimenu><guimenu>Remote Administration (VNC)</guimenu></menuchoice>.</para>
                  </step>
                  <step>
                     <para>Check <guimenu>Allow Remote Administration Without Session Management</guimenu>.</para>
                  </step>
                  <step>
                     <para>Activate <guimenu>Enable access using a web browser</guimenu> if you plan to access the VNC session in a Web browser window.</para>
                  </step>
                  <step>
                     <para>If necessary, also check <guimenu>Open Port in Firewall</guimenu> (for example, when your network interface is configured to be in the External Zone). If you have more than one network interface, restrict opening the firewall ports to a specific interface via <guimenu>Firewall Details</guimenu>.</para>
                  </step>
                  <step>
                     <para>Confirm your settings with <guimenu>Next</guimenu>.</para>
                  </step>
                  <step>
                     <para>In case not all needed packages are available yet, you need to approve the installation of missing packages.</para>
                     <tip>
                        <title>Restart the display manager</title>
                        <para>YaST makes changes to the display manager settings. You need to log out of your current graphical session and restart the display manager for the changes to take effect.</para>
                     </tip>
                  </step>
               </procedure>
               <figure>
                  <title>Remote administration</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/vnc_nosession.png" width="64%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/vnc_nosession.png" width="64%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
               <sect2 xml:id="sec-vnc-one-time-configs">
                  <title>Available configurations</title>
                  <para>The default configuration on <phrase role="productname">SUSE Linux Enterprise Server</phrase> serves sessions with a resolution of 1024x768 pixels at a color depth of 16-bit. The sessions are available on ports <systemitem class="resource">5901</systemitem> for <quote>regular</quote> VNC viewers (equivalent to VNC display <literal>1</literal>) and on port <systemitem class="resource">5801</systemitem> for Web browsers.</para>
                  <para>Other configurations can be made available on different ports, see <xref linkend="sec-vnc-one-time-config"/>.</para>
                  <para>VNC display numbers and X display numbers are independent in one-time sessions. A VNC display number is manually assigned to every configuration that the server supports (:1 in the example above). Whenever a VNC session is initiated with one of the configurations, it automatically gets a free X display number.</para>
                  <para>By default, both the VNC client and server try to communicate securely via a self-signed SSL certificate, which is generated after installation. You can either use the default one, or replace it with your own. When using the self-signed certificate, you need to confirm its signature before the first connection—both in the VNC viewer and the Web browser.</para>
                  <tip>
                     <para>Certain VNC clients refuse to establish a secure connection via the default self-signed certificate. For example, the Vinagre client verifies the certification against the GnuTLS global trust store and fails if the certificate is self-signed. In such a case, either use an encryption method other than <literal>x509</literal>, or generate a properly signed certificate for the VNC server and import it to the client's system trust store.</para>
                  </tip>
               </sect2>
               <sect2 xml:id="sec-vnc-one-time-connect">
                  <title>Initiating a one-time VNC session</title>
                  <para>To connect to a one-time VNC session, a VNC viewer must be installed, see also <xref linkend="sec-vnc-viewer"/>. Alternatively use a JavaScript-capable Web browser to view the VNC session by entering the following URL: <literal>http://jupiter.example.com:5801</literal></para>
               </sect2>
               <sect2 xml:id="sec-vnc-one-time-config">
                  <title>Configuring one-time VNC sessions</title>
                  <para>You can skip this section, if you do not need or want to modify the default configuration.</para>
                  <para>One-time VNC sessions are started via the <systemitem class="daemon">systemd</systemitem> socket <systemitem>xvnc.socket</systemitem>. By default it offers six configuration blocks: three for VNC viewers (<literal>vnc1</literal> to <literal>vnc3</literal>), and three serving a JavaScript client (<literal>vnchttpd1</literal> to <literal>vnchttpd3</literal>). By default only <literal>vnc1</literal> and <literal>vnchttpd1</literal> are active.</para>
                  <para>To activate the VNC server socket at boot time, run the following command:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command>  systemctl enable xvnc.socket</screen>
                  <para>To start the socket immediately, run:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command>  systemctl start xvnc.socket</screen>
                  <para>The <command>Xvnc</command> server can be configured via the <literal>server_args</literal> option. For a list of options, see <command>Xvnc --help</command>.</para>
                  <para>When adding custom configurations, make sure they are not using ports that are already in use by other configurations, other services, or existing persistent VNC sessions on the same host.</para>
                  <para>Activate configuration changes by entering the following command:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> systemctl reload xvnc.socket</screen>
                  <important>
                     <title>Firewall and VNC ports</title>
                     <para>When activating Remote Administration as described in <xref linkend="pro-vnc-one-time-activate"/>, the ports <systemitem class="resource">5801</systemitem> and <systemitem class="resource">5901</systemitem> are opened in the firewall. If the network interface serving the VNC sessions is protected by a firewall, you need to manually open the respective ports when activating additional ports for VNC sessions. See <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Security and Hardening Guide</quote>, </phrase><xref linkend="cha-security-firewall" xrefstyle="%label &#34;%c&#34;"/> for instructions.</para>
                  </important>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-vnc-persistent">
               <title>Configuring persistent VNC server sessions</title>
               <para>A persistent session can be accessed from multiple clients simultaneously. This is ideal for demonstration purposes where one client has full access and all other clients have view-only access. Another use case are training sessions where the trainer may need access to the trainee's desktop.</para>
               <tip xml:id="sec-vnc-persistent-connect">
                  <title>Connecting to a persistent VNC session</title>
                  <para>To connect to a persistent VNC session, a VNC viewer must be installed. Refer to <xref linkend="sec-vnc-viewer"/> for more details. Alternatively, use a JavaScript-capable Web browser to view the VNC session by entering the following URL: <literal>http://jupiter.example.com:5801</literal>.</para>
               </tip>
               <sect2 xml:id="vnc-persistent-vncmanager">
                  <title>VNC session initiated using <systemitem>vncmanager</systemitem>
                  </title>
                  <procedure xml:id="vnc-persistent-vncmanager-enable">
                     <title>Enabling persistent VNC sessions</title>
                     <step>
                        <para>Start <menuchoice><guimenu>YaST</guimenu><guimenu>Network Services</guimenu><guimenu>Remote Administration (VNC)</guimenu></menuchoice>.</para>
                     </step>
                     <step>
                        <para>Activate <guimenu>Allow Remote Administration With Session Management</guimenu>.</para>
                     </step>
                     <step>
                        <para>Activate <guimenu>Enable access using a web browser</guimenu> if you plan to access the VNC session in a Web browser window.</para>
                     </step>
                     <step>
                        <para>If necessary, also check <guimenu>Open Port in Firewall</guimenu> (for example, when your network interface is configured to be in the External Zone). If you have more than one network interface, restrict opening the firewall ports to a specific interface via <guimenu>Firewall Details</guimenu>.</para>
                     </step>
                     <step>
                        <para>Confirm your settings with <guimenu>Next</guimenu>.</para>
                     </step>
                     <step>
                        <para>In case not all needed packages are available yet, you need to approve the installation of missing packages.</para>
                        <tip>
                           <title>Restart the display manager</title>
                           <para>YaST makes changes to the display manager settings. You need to log out of your current graphical session and restart the display manager for the changes to take effect.</para>
                        </tip>
                     </step>
                  </procedure>
                  <sect3 xml:id="vnc-persistent-vncmanager-configure">
                     <title>Configuring persistent VNC sessions</title>
                     <para>After you enable the VNC session management as described in <xref linkend="vnc-persistent-vncmanager-enable"/>, you can normally connect to the remote session with your favorite VNC viewer, such as <command>vncviewer</command> or Remmina. After you log in, the <quote>VNC</quote> icon appears in the system tray of your desktop environment. Click the icon to open the <guimenu>VNC Session</guimenu> window. If your desktop environment does not support icons in the system tray, run <command>vncmanager-controller</command> manually.</para>
                     <figure>
                        <title>VNC session settings</title>
                        <mediaobject>
                           <imageobject outputformat="print">
                              <imagedata fileref="media/vncmanager_session.png" width="78%"/>
                           </imageobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/vncmanager_session.png" width="78%"/>
                           </imageobject>
                        </mediaobject>
                     </figure>
                     <para>There are several settings that influence the VNC session's behavior:</para>
                     <variablelist>
                        <varlistentry>
                           <term>
                              <guimenu>Non-persistent, private</guimenu>
                           </term>
                           <listitem>
                              <para>This is equivalent to a one-time session. It is not visible to others and is terminated after you disconnect from it. Refer to <xref linkend="sec-vnc-one-time"/> for more information.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <guimenu>Persistent, visible</guimenu>
                           </term>
                           <listitem>
                              <para>The session is visible to other users and keeps running even after you disconnect from it.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <guimenu>Session name</guimenu>
                           </term>
                           <listitem>
                              <para>Specify the name of the persistent session so that it is easily identified when reconnecting.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <guimenu>No password required</guimenu>
                           </term>
                           <listitem>
                              <para>The session is freely accessible without having to log in under user credentials.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <guimenu>Require user login</guimenu>
                           </term>
                           <listitem>
                              <para>You need to log in with a valid user name and password to access the session. Lists the valid user names in the <guimenu>Allowed users</guimenu> text box.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <guimenu>Allow one client at a time</guimenu>
                           </term>
                           <listitem>
                              <para>Prevents multiple users from joining the session at the same time.</para>
                           </listitem>
                        </varlistentry>
                        <varlistentry>
                           <term>
                              <guimenu>Allow multiple clients at a time</guimenu>
                           </term>
                           <listitem>
                              <para>Allows multiple users to join the persistent session at the same time. Useful for remote presentations or training sessions.</para>
                           </listitem>
                        </varlistentry>
                     </variablelist>
                     <para>Confirm with <guimenu>OK</guimenu>.</para>
                  </sect3>
                  <sect3 xml:id="vnc-persistent-vncmanager-join">
                     <title>Joining persistent VNC sessions</title>
                     <para>After you set up a persistent VNC session as described in <xref linkend="vnc-persistent-vncmanager-configure"/>, you can join it with your VNC viewer. After your VNC client connects to the server, you are prompted to choose whether you want to create a new session or join the existing one:</para>
                     <figure>
                        <title>Joining a persistent VNC session</title>
                        <mediaobject>
                           <imageobject outputformat="print">
                              <imagedata fileref="media/vncmanager_whether.png" width="73%"/>
                           </imageobject>
                           <imageobject outputformat="screen">
                              <imagedata fileref="media/vncmanager_whether.png" width="73%"/>
                           </imageobject>
                        </mediaobject>
                     </figure>
                     <para>After you click the name of the existing session, you may be asked for login credentials, depending on the persistent session settings.</para>
                  </sect3>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-vnc-encrypt">
               <title>Configuring encryption on the VNC server</title>
               <para>If the VNC server is set up properly, all communication between the VNC server and the client is encrypted. The authentication happens at the beginning of the session; the actual data transfer only begins afterward.</para>
               <para>Whether for a one-time or a persistent VNC session, security options are configured via the <option>-securitytypes</option> parameter of the <command>/usr/bin/Xvnc</command> command located on the <literal>server_args</literal> line. The <option>-securitytypes</option> parameter selects both authentication method and encryption. It has the following options:</para>
               <variablelist>
                  <title>Authentications</title>
                  <varlistentry>
                     <term>None, TLSNone, x509None</term>
                     <listitem>
                        <para>No authentication.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>VncAuth, TLSVnc, x509Vnc</term>
                     <listitem>
                        <para>Authentication using custom password.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Plain, TLSPlain, x509Plain</term>
                     <listitem>
                        <para>Authentication using PAM to verify user's password.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <variablelist>
                  <title>Encryptions</title>
                  <varlistentry>
                     <term>None, vncAuth, plain</term>
                     <listitem>
                        <para>No encryption.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>TLSNone, TLSVnc, TLSPlain</term>
                     <listitem>
                        <para>Anonymous TLS encryption. Everything is encrypted, but there is no verification of the remote host. So you are protected against passive attackers, but not against man-in-the-middle attackers.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>X509None, x509Vnc, x509Plain</term>
                     <listitem>
                        <para>TLS encryption with certificate. If you use a self-signed certificate, you will be asked to verify it on the first connection. On subsequent connections you will be warned only if the certificate changed. So you are protected against everything except man-in-the-middle on the first connection (similar to typical SSH usage). If you use a certificate signed by a certificate authority matching the machine name, then you get full security (similar to typical HTTPS usage).</para>
                        <tip>
                           <para>Certain VNC clients refuse to establish a secure connection via the default self-signed certificate. For example, the Vinagre client verifies the certification against the GnuTLS global trust store and fails if the certificate is self-signed. In such a case, either use an encryption method other than <literal>x509</literal>, or generate a properly signed certificate for the VNC server and import it to the client's system trust store.</para>
                        </tip>
                        <tip>
                           <title>Path to certificate and key</title>
                           <para>With X509 based encryption, you need to specify the path to the X509 certificate and the key with <option>-X509Cert</option> and <option>-X509Key</option> options.</para>
                        </tip>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>If you select multiple security types separated by comma, the first one supported and allowed by both client and server is used. That way, you can configure opportunistic encryption on the server. This is useful if you need to support VNC clients that do not support encryption.</para>
               <para>On the client, you can also specify the allowed security types to prevent a downgrade attack if you are connecting to a server which you know has encryption enabled (although our vncviewer warns you with the <literal>Connection not encrypted!</literal> message in that case).</para>
            </sect1>
            <sect1 xml:id="sec-vnc-wayland">
               <title>Compatibility with Wayland</title>
               <para>The Remote Administration (VNC) feature relies on X11 and may result in an empty screen if Wayland is enabled. The display manager must be configured to use X11 instead of Wayland. For <package>gdm</package>, edit <filename>/etc/gdm/custom.conf</filename>. In the <literal>[daemon]</literal> section, add <literal>WaylandEnable=false</literal> to the configuration file. When logging in, the user must choose an X11-compatible session as well. If you wish to remove the Wayland option for GNOME, you can remove and lock the <package>gnome-session-wayland</package> package.</para>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-net-rsync"><?file net_sync.xml?>
            <title>File copying with RSync</title>
            <info>
               <abstract>
                  <para>Today, a typical user has several computers: home and workplace machines, a laptop, a smartphone or a tablet. This makes the task of keeping files and documents in synchronization across multiple devices all the more important.</para>
               </abstract>
            </info>
            <warning>
               <title>Risk of data loss</title>
               <para>Before you start using a synchronization tool, you should familiarize yourself with its features and functionality. Make sure to back up your important files.</para>
            </warning>
            <sect1 xml:id="sec-net-rsync-overview">
               <title>Conceptual overview</title>
               <para>For synchronizing a large amount of data over a slow network connection, Rsync offers a reliable method of transmitting only changes within files. This applies not only to text files but also binary files. To detect the differences between files, Rsync subdivides the files into blocks and computes check sums over them.</para>
               <para>Detecting changes requires certain computing power. So make sure that machines on both ends have enough resources, including RAM.</para>
               <para>Rsync can be particularly useful when large amounts of data containing only minor changes need to be transmitted regularly. This is often the case when working with backups. Rsync can also be useful for mirroring staging servers that store complete directory trees of Web servers to a Web server in a DMZ.</para>
               <para>Despite its name, Rsync is not a synchronization tool. Rsync is a tool that copies data only in one direction at a time. It does not and cannot do the reverse. If you need a bidirectional tool which can synchronize both source and destination, use Csync.</para>
               <!-- Use cases and properties of Rsync? -->
            </sect1>
            <sect1 xml:id="sec-net-rsync-syntax">
               <title>Basic syntax</title>
               <para>Rsync is a command-line tool that has the following basic syntax:</para>
               <screen>rsync [OPTION] SOURCE [SOURCE]... DEST</screen>
               <para>You can use Rsync on any local or remote machine, provided you have access and write permissions. It is possible to have multiple <replaceable>SOURCE</replaceable> entries. The <replaceable>SOURCE</replaceable> and <replaceable>DEST</replaceable> placeholders can be paths, URLs or both.</para>
               <para>Below are the most common Rsync options:</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <option>-v</option>
                     </term>
                     <listitem>
                        <para>Outputs more verbose text</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <option>-a</option>
                     </term>
                     <listitem>
                        <para>Archive mode; copies files recursively and preserves time stamps, user/group ownership, file permissions, and symbolic links</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <option>-z</option>
                     </term>
                     <listitem>
                        <para>Compresses the transmitted data</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <note>
                  <title>Trailing slashes count</title>
                  <para>When working with Rsync, you should pay particular attention to trailing slashes. A trailing slash after the directory denotes the <emphasis>content</emphasis> of the directory. No trailing slash denotes the <emphasis>directory itself</emphasis>.</para>
               </note>
            </sect1>
            <sect1 xml:id="sec-net-rsync-local-copy">
               <title>Copying files and directories locally</title>
               <para>The following description assumes that the current user has write permissions to the directory <filename>/var/backup</filename>. To copy a single file from one directory on your machine to another path, use the following command:</para>
               <screen><prompt>&gt;</prompt><command>rsync</command> -avz backup.tar.xz /var/backup/</screen>
               <para>The file <filename>backup.tar.xz</filename> is copied to <filename>/var/backup/</filename>; the absolute path is <filename>/var/backup/backup.tar.xz</filename>.</para>
               <para>Do not forget to add the <emphasis>trailing slash</emphasis> after the <filename>/var/backup/</filename> directory. If you do not insert the slash, the file <filename>backup.tar.xz</filename> is copied to <filename>/var/backup</filename> (file) <emphasis>not</emphasis> inside the directory <filename>/var/backup/</filename>!</para>
               <para>Copying a directory is similar to copying a single file. The following example copies the directory <filename>tux/</filename> and its content into the directory <filename>/var/backup/</filename>:</para>
               <screen><prompt>&gt;</prompt><command>rsync</command> -avz tux /var/backup/</screen>
               <para>Find the copy in the absolute path <filename>/var/backup/tux/</filename>.</para>
            </sect1>
            <sect1 xml:id="sec-net-rsync-remote-copy">
               <title>Copying files and directories remotely</title>
               <para>The Rsync tool is required on both machines. To copy files from or to remote directories requires an IP address or a domain name. A user name is optional if your current user names on the local and remote machine are the same.</para>
               <para>To copy the file <filename>file.tar.xz</filename> from your local host to the remote host <systemitem class="ipaddress">192.168.1.1</systemitem> with same users (being local and remote), use the following command:</para>
               <screen><prompt>&gt;</prompt><command>rsync</command> -avz file.tar.xz  tux@192.168.1.1:</screen>
               <para>Depending on what you prefer, these commands are also possible and equivalent:</para>
               <screen><prompt>&gt;</prompt><command>rsync</command> -avz file.tar.xz 192.168.1.1:~
<prompt>&gt;</prompt><command>rsync</command> -avz file.tar.xz 192.168.1.1:/home/tux</screen>
               <para>In all cases with standard configuration, you are prompted to enter your passphrase of the remote user. This command copies <filename>file.tar.xz</filename> to the home directory of user <systemitem class="username">tux</systemitem> (normally <filename>/home/tux</filename>).</para>
               <para>Copying a directory remotely is similar to copying a directory locally. The following example copies the directory <filename>tux/</filename> and its content into the remote directory <filename>/var/backup/</filename> on the <systemitem class="ipaddress">192.168.1.1</systemitem> host:</para>
               <screen><prompt>&gt;</prompt><command>rsync</command> -avz tux 192.168.1.1:/var/backup/</screen>
               <para>Assuming you have write permissions on the host <systemitem class="ipaddress">192.168.1.1</systemitem>, you can find the copy in the absolute path <filename>/var/backup/tux</filename>.</para>
            </sect1>
            <sect1 xml:id="sec-net-rsync-server">
               <title>Configuring and using an rsync server</title>
               <para>Rsync can run as a daemon (<systemitem class="daemon">rsyncd</systemitem>) listening on default port 873 for incoming connections. This daemon can receive <quote>copying targets</quote>.</para>
               <para>The following description explains how to create an Rsync server on a <systemitem>jupiter</systemitem> host with a <emphasis>backup</emphasis> target. This target can be used to store your backups. To create an Rsync server, do the following:</para>
               <procedure>
                  <title>Setting up an rsync server</title>
                  <step xml:id="st-rsync-server-mkdir">
                     <para>On jupiter, create a directory to store all your backup files. In this example, we use <filename>/var/backup</filename>:</para>
                     <screen><prompt role="root">#</prompt><command>mkdir</command> /var/backup</screen>
                  </step>
                  <step>
                     <para>Specify ownership. In this case, the directory is owned by user <systemitem class="username">tux</systemitem> in group <systemitem class="groupname">users</systemitem>:</para>
                     <screen><prompt role="root">#</prompt><command>chown</command> tux.users /var/backup</screen>
                  </step>
                  <step>
                     <para>Configure the rsyncd daemon.</para>
                     <para>We separate the configuration file into a main file and certain <quote>modules</quote> which hold your backup target. This makes it easier to add additional targets later. Global values can be stored in <filename>/etc/rsyncd.d/*.inc</filename> files, whereas your modules are placed in <filename>/etc/rsyncd.d/*.conf</filename> files:</para>
                     <substeps>
                        <step>
                           <para>Create a directory <filename>/etc/rsyncd.d/</filename>:</para>
                           <screen><prompt role="root">#</prompt><command>mkdir</command> /etc/rsyncd.d/</screen>
                        </step>
                        <step>
                           <para>In the main configuration file <filename>/etc/rsyncd.conf</filename>, add the following lines:</para>
                           <screen># rsyncd.conf main configuration file
log file = /var/log/rsync.log
pid file = /var/lock/rsync.lock

&amp;merge /etc/rsyncd.d <co xml:id="co-rsync-conf-merge"/>
&amp;include /etc/rsyncd.d <co xml:id="co-rsync-conf-include"/></screen>
                           <calloutlist>
                              <callout arearefs="co-rsync-conf-merge">
                                 <para>Merges global values from <filename>/etc/rsyncd.d/*.inc</filename> files into the main configuration file.</para>
                              </callout>
                              <callout arearefs="co-rsync-conf-include">
                                 <para>Loads any modules (or targets) from <filename>/etc/rsyncd.d/*.conf</filename> files. These files should not contain any references to global values.</para>
                              </callout>
                           </calloutlist>
                        </step>
                        <step>
                           <para>Create your module (your backup target) in the file <filename>/etc/rsyncd.d/backup.conf</filename> with the following lines:</para>
                           <screen># backup.conf: backup module
[backup] <co xml:id="co-rsync-conf-target"/>
   uid = tux <co xml:id="co-rsync-conf-uid-gid"/>
   gid = users <coref linkend="co-rsync-conf-uid-gid"/>
   path = /var/backup <co xml:id="co-rsync-conf-path"/>
   auth users = tux  <co xml:id="co-rsync-conf-authusers"/>
   secrets file = /etc/rsyncd.secrets <co xml:id="co-rsync-conf-secretfiles"/>
   comment = Our backup target</screen>
                           <calloutlist>
                              <callout arearefs="co-rsync-conf-target">
                                 <para>The <emphasis>backup</emphasis> target. You can use any name you like. However, it is a good idea to name a target according to its purpose and use the same name in your <filename>*.conf</filename> file.</para>
                              </callout>
                              <callout arearefs="co-rsync-conf-uid-gid">
                                 <para>Specifies the user name or group name that is used when the file transfer takes place.</para>
                              </callout>
                              <callout arearefs="co-rsync-conf-path">
                                 <para>Defines the path to store your backups (from <xref linkend="st-rsync-server-mkdir"/>).</para>
                              </callout>
                              <callout arearefs="co-rsync-conf-authusers">
                                 <para>Specifies a comma-separated list of allowed users. In its simplest form, it contains the user names that are allowed to connect to this module. In our case, only user <systemitem class="username">tux</systemitem> is allowed.</para>
                              </callout>
                              <callout arearefs="co-rsync-conf-secretfiles">
                                 <para>Specifies the path of a file that contains lines with user names and plain passwords.</para>
                              </callout>
                           </calloutlist>
                        </step>
                        <step>
                           <para>Create the <filename>/etc/rsyncd.secrets</filename> file with the following content and replace <replaceable>PASSPHRASE</replaceable>:</para>
                           <screen># user:passwd
tux:<replaceable>PASSPHRASE</replaceable></screen>
                        </step>
                        <step>
                           <para>Make sure the file is only readable by <systemitem class="username">root</systemitem>:</para>
                           <screen><prompt role="root">#</prompt><command>chmod</command> 0600 /etc/rsyncd.secrets</screen>
                        </step>
                     </substeps>
                  </step>
                  <step>
                     <para>Start and enable the rsyncd daemon with:</para>
                     <screen><prompt role="root">#</prompt><command>systemctl</command> enable rsyncd
<prompt role="root">#</prompt><command>systemctl</command> start rsyncd</screen>
                  </step>
                  <step>
                     <para>Test the access to your Rsync server:</para>
                     <screen><prompt>&gt;</prompt><command>rsync</command> jupiter::</screen>
                     <para>You should see a response that looks like this:</para>
                     <screen>backup          Our backup target</screen>
                     <para>Otherwise, check your configuration file, firewall and network settings.</para>
                  </step>
               </procedure>
               <para>The above steps create an Rsync server that can now be used to store backups. The example also creates a log file listing all connections. This file is stored in <filename>/var/log/rsyncd.log</filename>. This is useful to debug your transfers.</para>
               <para>To list the content of your backup target, use the following command:</para>
               <screen><prompt>&gt;</prompt>rsync -avz jupiter::backup</screen>
               <para>This command lists all files present in the directory <filename>/var/backup</filename> on the server. This request is also logged in the log file <filename>/var/log/rsyncd.log</filename>. To start an actual transfer, provide a source directory. Use <literal>.</literal> for the current directory. For example, the following command copies the current directory to your Rsync backup server:</para>
               <screen><prompt>&gt;</prompt>rsync -avz . jupiter::backup</screen>
               <para>By default, Rsync does not delete files and directories when it runs. To enable deletion, the additional option <option>--delete</option> must be stated. To ensure that no newer files are deleted, the option <option>--update</option> can be used instead. Any conflicts that arise must be resolved manually.</para>
            </sect1>
            <sect1 xml:id="sec-net-rsync-summary">
               <title>More information</title>
               <variablelist>
                  <varlistentry>
                     <term>Csync</term>
                     <listitem>
                        <para>Bidirectional file synchronization tool, see <link xlink:href="https://csync.org/"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>RSnapshot</term>
                     <listitem>
                        <para>Creates incremental backups, see <link xlink:href="https://rsnapshot.org"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Unison</term>
                     <listitem>
                        <para>A file synchronization tool similar to CSync but with a graphical interface, see <link xlink:href="https://github.com/bcpierce00/unison"/>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Rear</term>
                     <listitem>
                        <para>A disaster recovery framework, see the <link xlink:href="https://documentation.suse.com/sle-ha/15/html/SLE-HA-all/cha-ha-rear.html"><citetitle>Administration Guide</citetitle> of the SUSE Linux Enterprise High Availability, chapter <citetitle>Disaster Recovery with Rear (Relax-and-Recover)</citetitle></link>.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
         </chapter>
      </part>
      <!-- ===================================================================== -->
      <!-- Part: Booting a Linux System                                                          -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- Part: System                                                          -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- Part: Hardware Configuration                                          -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- Part: Services                                                        -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- Part: Troubleshooting                                                 -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- Appendix                                                              -->
      <!-- ===================================================================== -->
      <appendix version="5.2" xml:id="app-nwscheme"><?file network_scheme.xml?>
         <title>An example network</title>
         <info>
            <mediaobject>
               <imageobject outputformat="screen">
                  <imagedata fileref="media/network_schema.png" width="92%"/>
               </imageobject>
               <imageobject role="pdf">
                  <imagedata fileref="media/network_schema.svg" width="92%"/>
               </imageobject>
            </mediaobject>
         </info>
         <para>This example network is used across all network-related chapters of the <phrase role="productname">SUSE® Linux Enterprise Server</phrase> documentation.</para>
         <informalfigure>
            <mediaobject>
               <imageobject outputformat="screen">
                  <imagedata fileref="media/network_schema.png" width="92%"/>
               </imageobject>
               <imageobject role="pdf">
                  <imagedata fileref="media/network_schema.svg" width="92%"/>
               </imageobject>
            </mediaobject>
         </informalfigure>
      </appendix>
      <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
      <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
      <appendix version="5.2" role="legal"><?file common_legal.xml?>
         <title>GNU licenses</title>
         <info/>
         <para>This appendix contains the GNU Free Documentation License version 1.2.</para>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 version="5.2" role="legal"><?file common_license_gfdl1.2.xml?>
            <title>GNU Free Documentation License</title>
            <info/>
            <para>Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA. Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</para>
            <bridgehead renderas="sect4">0. PREAMBLE</bridgehead>
            <para>The purpose of this License is to make a manual, textbook, or other functional and useful document "free" in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or non-commercially. Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</para>
            <para>This License is a kind of "copyleft", which means that derivative works of the document must themselves be free in the same sense. It complements the GNU General Public License, which is a copyleft license designed for free software.</para>
            <para>We have designed this License to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does. But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book. We recommend this License principally for works whose purpose is instruction or reference.</para>
            <bridgehead renderas="sect4">1. APPLICABILITY AND DEFINITIONS</bridgehead>
            <para>This License applies to any manual or other work, in any medium, that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License. Such a notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under the conditions stated herein. The "Document", below, refers to any such manual or work. Any member of the public is a licensee, and is addressed as "you". You accept the license if you copy, modify or distribute the work in a way requiring permission under copyright law.</para>
            <para>A "Modified Version" of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</para>
            <para>A "Secondary Section" is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document's overall subject (or to related matters) and contains nothing that could fall directly within that overall subject. (Thus, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</para>
            <para>The "Invariant Sections" are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License. If a section does not fit the above definition of Secondary then it is not allowed to be designated as Invariant. The Document may contain zero Invariant Sections. If the Document does not identify any Invariant Sections then there are none.</para>
            <para>The "Cover Texts" are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License. A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.</para>
            <para>A "Transparent" copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, that is suitable for revising the document straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters. A copy made in an otherwise Transparent file format whose markup, or absence of markup, has been arranged to thwart or discourage subsequent modification by readers is not Transparent. An image format is not Transparent if used for any substantial amount of text. A copy that is not "Transparent" is called "Opaque".</para>
            <para>Examples of suitable formats for Transparent copies include plain ASCII without markup, Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML, PostScript or PDF designed for human modification. Examples of transparent image formats include PNG, XCF and JPG. Opaque formats include proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML, PostScript or PDF produced by some word processors for output purposes only.</para>
            <para>The "Title Page" means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page. For works in formats which do not have any title page as such, "Title Page" means the text near the most prominent appearance of the work's title, preceding the beginning of the body of the text.</para>
            <para>A section "Entitled XYZ" means a named subunit of the Document whose title either is precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another language. (Here XYZ stands for a specific section name mentioned below, such as "Acknowledgements", "Dedications", "Endorsements", or "History".) To "Preserve the Title" of such a section when you modify the Document means that it remains a section "Entitled XYZ" according to this definition.</para>
            <para>The Document may include Warranty Disclaimers next to the notice which states that this License applies to the Document. These Warranty Disclaimers are considered to be included by reference in this License, but only as regards disclaiming warranties: any other implication that these Warranty Disclaimers may have is void and has no effect on the meaning of this License.</para>
            <bridgehead renderas="sect4">2. VERBATIM COPYING</bridgehead>
            <para>You may copy and distribute the Document in any medium, either commercially or non-commercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License. You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute. However, you may accept compensation in exchange for copies. If you distribute a large enough number of copies you must also follow the conditions in section 3.</para>
            <para>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</para>
            <bridgehead renderas="sect4">3. COPYING IN QUANTITY</bridgehead>
            <para>If you publish printed copies (or copies in media that commonly have printed covers) of the Document, numbering more than 100, and the Document's license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover. Both covers must also clearly and legibly identify you as the publisher of these copies. The front cover must present the full title with all words of the title equally prominent and visible. You may add other material on the covers in addition. Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</para>
            <para>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</para>
            <para>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a computer-network location from which the general network-using public has access to download using public-standard network protocols a complete Transparent copy of the Document, free of added material. If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</para>
            <para>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</para>
            <bridgehead renderas="sect4">4. MODIFICATIONS</bridgehead>
            <para>You may copy and distribute a Modified Version of the Document under the conditions of sections 2 and 3 above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it. In addition, you must do these things in the Modified Version:</para>
            <orderedlist numeration="upperalpha" spacing="normal">
               <listitem>
                  <para>Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission.</para>
               </listitem>
               <listitem>
                  <para>List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has fewer than five), unless they release you from this requirement.</para>
               </listitem>
               <listitem>
                  <para>State on the Title page the name of the publisher of the Modified Version, as the publisher.</para>
               </listitem>
               <listitem>
                  <para>Preserve all the copyright notices of the Document.</para>
               </listitem>
               <listitem>
                  <para>Add an appropriate copyright notice for your modifications adjacent to the other copyright notices.</para>
               </listitem>
               <listitem>
                  <para>Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below.</para>
               </listitem>
               <listitem>
                  <para>Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document's license notice.</para>
               </listitem>
               <listitem>
                  <para>Include an unaltered copy of this License.</para>
               </listitem>
               <listitem>
                  <para>Preserve the section Entitled "History", Preserve its Title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section Entitled "History" in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence.</para>
               </listitem>
               <listitem>
                  <para>Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the "History" section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission.</para>
               </listitem>
               <listitem>
                  <para>For any section Entitled "Acknowledgements" or "Dedications", Preserve the Title of the section, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein.</para>
               </listitem>
               <listitem>
                  <para>Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles.</para>
               </listitem>
               <listitem>
                  <para>Delete any section Entitled "Endorsements". Such a section may not be included in the Modified Version.</para>
               </listitem>
               <listitem>
                  <para>Do not retitle any existing section to be Entitled "Endorsements" or to conflict in title with any Invariant Section.</para>
               </listitem>
               <listitem>
                  <para>Preserve any Warranty Disclaimers.</para>
               </listitem>
            </orderedlist>
            <para>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant. To do this, add their titles to the list of Invariant Sections in the Modified Version's license notice. These titles must be distinct from any other section titles.</para>
            <para>You may add a section Entitled "Endorsements", provided it contains nothing but endorsements of your Modified Version by various parties--for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</para>
            <para>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version. Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity. If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</para>
            <para>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</para>
            <bridgehead renderas="sect4">5. COMBINING DOCUMENTS</bridgehead>
            <para>You may combine the Document with other documents released under this License, under the terms defined in section 4 above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice, and that you preserve all their Warranty Disclaimers.</para>
            <para>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy. If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number. Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</para>
            <para>In the combination, you must combine any sections Entitled "History" in the various original documents, forming one section Entitled "History"; likewise combine any sections Entitled "Acknowledgements", and any sections Entitled "Dedications". You must delete all sections Entitled "Endorsements".</para>
            <bridgehead renderas="sect4">6. COLLECTIONS OF DOCUMENTS</bridgehead>
            <para>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</para>
            <para>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</para>
            <bridgehead renderas="sect4">7. AGGREGATION WITH INDEPENDENT WORKS</bridgehead>
            <para>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, is called an "aggregate" if the copyright resulting from the compilation is not used to limit the legal rights of the compilation's users beyond what the individual works permit. When the Document is included in an aggregate, this License does not apply to the other works in the aggregate which are not themselves derivative works of the Document.</para>
            <para>If the Cover Text requirement of section 3 is applicable to these copies of the Document, then if the Document is less than one half of the entire aggregate, the Document's Cover Texts may be placed on covers that bracket the Document within the aggregate, or the electronic equivalent of covers if the Document is in electronic form. Otherwise they must appear on printed covers that bracket the whole aggregate.</para>
            <bridgehead renderas="sect4">8. TRANSLATION</bridgehead>
            <para>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of section 4. Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections. You may include a translation of this License, and all the license notices in the Document, and any Warranty Disclaimers, provided that you also include the original English version of this License and the original versions of those notices and disclaimers. In case of a disagreement between the translation and the original version of this License or a notice or disclaimer, the original version will prevail.</para>
            <para>If a section in the Document is Entitled "Acknowledgements", "Dedications", or "History", the requirement (section 4) to Preserve its Title (section 1) will typically require changing the actual title.</para>
            <bridgehead renderas="sect4">9. TERMINATION</bridgehead>
            <para>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License. Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License. However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</para>
            <bridgehead renderas="sect4">10. FUTURE REVISIONS OF THIS LICENSE</bridgehead>
            <para>The Free Software Foundation may publish new, revised versions of the GNU Free Documentation License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns. See <link xlink:href="https://www.gnu.org/copyleft/"/>.</para>
            <para>Each version of the License is given a distinguishing version number. If the Document specifies that a particular numbered version of this License "or any later version" applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation. If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</para>
            <bridgehead renderas="sect4">ADDENDUM: How to use this License for your documents</bridgehead>
            <screen>Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</screen>
            <para>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts, replace the “with...Texts.” line with this:</para>
            <screen>with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
            <para>If you have Invariant Sections without Cover Texts, or some other combination of the three, merge those two alternatives to suit the situation.</para>
            <para>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the GNU General Public License, to permit their use in free software.</para>
         </sect1>
      </appendix>
   </book>
   <!-- Deployment Guide -->
   <!-- ##################################################################### -->
   <!-- SLE Deployment Guide                                                  -->
   <!-- ##################################################################### -->
   <!-- Deployment Guide -->
   <!-- ##################################################################### -->
   <!-- SLE Deployment Guide                                                  -->
   <!-- ##################################################################### -->
   <!-- GNOME User Guide -->
   <!-- ##################################################################### -->
   <!-- GNOME  User Guide                                                     -->
   <!-- ##################################################################### -->
   <!-- AutoYaST Guide -->
   <!-- Security Guide -->
   <!-- ##################################################################### -->
   <!-- Security Guide                                                        -->
   <!-- ##################################################################### -->
   <!-- System Analysis and Tuning Guide -->
   <!-- ##################################################################### -->
   <!-- SLE System Analysis and Tuning Guide                                  -->
   <!-- ##################################################################### -->
   <!-- RMT -->
   <!--                                                                       -->
   <!--                                                                       -->
   <!-- ##################################################################### -->
   <!-- SLES Books                                                            -->
   <!--                                                                       -->
   <!-- Storage -->
   <!-- ##################################################################### -->
   <!-- SLES Storage Guide                                                    -->
   <!-- ##################################################################### -->
   <!-- Virtualization -->
   <!-- ##################################################################### -->
   <!-- Virtualization                                                        -->
   <!-- ##################################################################### -->
   <book version="5.2" xml:lang="en" xml:id="book-virtualization"><?file book_virtualization.xml?>
      <info>
         <title>Virtualization Guide</title>
         <productname>
            <phrase role="productname">SUSE Linux Enterprise Server</phrase>
         </productname>
         <productnumber>
            <phrase role="productnumber">15 SP7</phrase>
         </productnumber>
         <date><?dbtimestamp format="B d, Y"?></date>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <legalnotice xml:lang="en" version="5.2"><?include common_copyright_gfdl.xml?>
            <info/>
            <para>Copyright © 2006–<?dbtimestamp format="Y"?> SUSE LLC and contributors. All rights reserved.</para>
            <para>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.2 or (at your option) version 1.3; with the Invariant Section being this copyright notice and license. A copy of the license version 1.2 is included in the section entitled <quote>GNU Free Documentation License</quote>.</para>
            <para>For SUSE trademarks, see <link xlink:href="https://www.suse.com/company/legal/"/>. All third-party trademarks are the property of their respective owners. Trademark symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates. Asterisks (*) denote third-party trademarks.</para>
            <para>All information found in this book has been compiled with utmost attention to detail. However, this does not guarantee complete accuracy. Neither SUSE LLC, its affiliates, the authors nor the translators shall be held liable for possible errors or the consequences thereof.</para>
         </legalnotice>
         <abstract>
            <para>This guide describes virtualization technology in general. It introduces libvirt—the unified interface to virtualization—and provides detailed information on specific hypervisors.</para>
         </abstract>
         <meta name="title">Virtualization Guide</meta>
         <meta name="series">Products &amp; Solutions</meta>
         <meta name="description">How to manage virtual machines on <phrase role="productname">SUSE Linux Enterprise Server</phrase>
         </meta>
         <meta name="social-descr">Learn all about virtualization and VM management</meta>
         <meta name="task">Virtualization</meta>
         <revhistory xml:id="rh-book-virtualization">
            <revision>
               <date>2025-06-17</date>
               <revdescription>
                  <para>Updated for the initial release of <phrase role="productname">SUSE Linux Enterprise Server</phrase><phrase role="productnumber">15 SP7</phrase>.</para>
               </revdescription>
            </revision>
         </revhistory>
      </info>
      <!-- ===================================================================== -->
      <!-- Introduction                                                          -->
      <!-- ===================================================================== -->
      <preface version="5.2" xml:id="cha-kvm"><?file kvm_intro.xml?>
         <title>Preface</title>
         <info/>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?include common_intro_available_doc.xml?>
            <title>Available documentation</title>
            <info/>
            <variablelist>
               <varlistentry>
                  <term>Online documentation</term>
                  <listitem>
                     <para>Our documentation is available online at <link xlink:href="https://documentation.suse.com"/>. Browse or download the documentation in various formats.</para>
                     <note>
                        <title>Latest updates</title>
                        <para>The latest updates are usually available in the English-language version of this documentation.</para>
                     </note>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>SUSE Knowledgebase</term>
                  <!--based on 'Support Resources' listed at https://www.suse.com/support/kb/-->
                  <listitem>
                     <para>If you run into an issue, check out the Technical Information Documents (TIDs) that are available online at <link xlink:href="https://www.suse.com/support/kb/"/>. Search the SUSE Knowledgebase for known solutions driven by customer need.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Release notes</term>
                  <listitem>
                     <para>For release notes, see <link xlink:href="https://www.suse.com/releasenotes/"/>.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>In your system</term>
                  <listitem>
                     <para>For offline use, the release notes are also available under <filename>/usr/share/doc/release-notes</filename> on your system. The documentation for individual packages is available at <filename>/usr/share/doc/packages</filename>.</para>
                     <para>Many commands are also described in their <emphasis>manual pages</emphasis>. To view them, run <command>man</command>, followed by a specific command name. If the <command>man</command> command is not installed on your system, install it with <command>sudo zypper install man</command>.</para>
                  </listitem>
               </varlistentry>
            </variablelist>
         </sect1>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?include common_intro_feedback.xml?>
            <title>Improving the documentation</title>
            <info/>
            <para>Your feedback and contributions to this documentation are welcome. The following channels for giving feedback are available:</para>
            <variablelist>
               <varlistentry>
                  <term>Service requests and support</term>
                  <listitem>
                     <para>For services and support options available for your product, see <link xlink:href="https://www.suse.com/support/"/>.</para>
                     <para>To open a service request, you need a SUSE subscription registered at SUSE Customer Center. Go to <link xlink:href="https://scc.suse.com/support/requests"/>, log in, and click <guimenu>Create New</guimenu>.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Bug reports</term>
                  <listitem>
                     <para>Report issues with the documentation at <link xlink:href="https://bugzilla.suse.com/"/>.</para>
                     <para>To simplify this process, click the <guimenu>Report an issue</guimenu> icon next to a headline in the HTML version of this document. This preselects the right product and category in Bugzilla and adds a link to the current section. You can start typing your bug report right away.</para>
                     <para>A Bugzilla account is required.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Contributions</term>
                  <listitem>
                     <para>To contribute to this documentation, click the <guimenu>Edit source document</guimenu> icon next to a headline in the HTML version of this document. This will take you to the source code on GitHub, where you can open a pull request.</para>
                     <para>A GitHub account is required.</para>
                     <note>
                        <title>
                           <guimenu>Edit source document</guimenu> only available for English</title>
                        <para>The <guimenu>Edit source document</guimenu> icons are only available for the English version of each document. For all other languages, use the <guimenu>Report an issue</guimenu> icons instead.</para>
                     </note>
                     <para>For more information about the documentation environment used for this documentation, see the repository's README.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Mail</term>
                  <listitem>
                     <para>You can also report errors and send feedback concerning the documentation to <email>doc-team@suse.com</email>. Include the document title, the product version, and the publication date of the document. Additionally, include the relevant section number and title (or provide the URL) and provide a concise description of the problem.</para>
                  </listitem>
               </varlistentry>
            </variablelist>
         </sect1>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?include common_intro_convention.xml?>
            <title>Documentation conventions</title>
            <info/>
            <para>The following notices and typographic conventions are used in this document:</para>
            <itemizedlist>
               <listitem>
                  <para><filename>/etc/passwd</filename>: Directory names and file names</para>
               </listitem>
               <listitem>
                  <para><replaceable>PLACEHOLDER</replaceable>: Replace <replaceable>PLACEHOLDER</replaceable> with the actual value</para>
               </listitem>
               <listitem>
                  <para><envar>PATH</envar>: An environment variable</para>
               </listitem>
               <listitem>
                  <para><command>ls</command>, <option>--help</option>: Commands, options, and parameters</para>
               </listitem>
               <listitem>
                  <para><systemitem class="username">user</systemitem>: The name of a user or group</para>
               </listitem>
               <listitem>
                  <para><package>package_name</package>: The name of a software package</para>
               </listitem>
               <listitem>
                  <para><keycap function="alt"/>, <keycombo><keycap function="alt"/><keycap>F1</keycap></keycombo>: A key to press or a key combination. Keys are shown in uppercase as on a keyboard.</para>
               </listitem>
               <listitem>
                  <para><guimenu>File</guimenu>, <menuchoice><guimenu>File</guimenu><guimenu>Save As</guimenu></menuchoice>: menu items, buttons</para>
               </listitem>
               <listitem>
                  <para arch="x86_64"><phrase role="arch-start">x86_64 ▶</phrase>This paragraph is only relevant for the AMD64/Intel 64 architectures. The arrows mark the beginning and the end of the text block.<phrase role="arch-end">◀</phrase></para>
                  <para arch="zseries;power"><phrase role="arch-start">zseries;power ▶</phrase>This paragraph is only relevant for the architectures <literal>IBM Z</literal> and <literal>POWER</literal>. The arrows mark the beginning and the end of the text block.<phrase role="arch-end">◀</phrase></para>
               </listitem>
               <listitem>
                  <para><citetitle>Chapter 1, <quote>Example chapter</quote></citetitle>: A cross-reference to another chapter in this guide.</para>
               </listitem>
               <listitem>
                  <para>Commands that must be run with <systemitem class="username">root</systemitem> privileges. You can also prefix these commands with the <command>sudo</command> command to run them as a non-privileged user:</para>
                  <screen><prompt role="root">#</prompt><command>command</command><prompt>&gt;</prompt><command>sudo</command><command>command</command></screen>
               </listitem>
               <listitem>
                  <para>Commands that can be run by non-privileged users:</para>
                  <screen><prompt>&gt;</prompt><command>command</command></screen>
               </listitem>
               <listitem>
                  <para>Commands can be split into two or multiple lines by a backslash character (<literal>\</literal>) at the end of a line. The backslash informs the shell that the command invocation will continue after the end of the line:</para>
                  <screen><prompt>&gt;</prompt><command>echo</command> a b \
c d</screen>
               </listitem>
               <listitem>
                  <para>A code block that shows both the command (preceded by a prompt) and the respective output returned by the shell:</para>
                  <screen><prompt>&gt;</prompt><command>command</command>
output</screen>
               </listitem>
               <listitem>
                  <para>Notices</para>
                  <warning>
                     <title>Warning notice</title>
                     <para>Vital information you must be aware of before proceeding. Warns you about security issues, potential loss of data, damage to hardware, or physical hazards.</para>
                  </warning>
                  <important>
                     <title>Important notice</title>
                     <para>Important information you should be aware of before proceeding.</para>
                  </important>
                  <note>
                     <title>Note notice</title>
                     <para>Additional information, for example about differences in software versions.</para>
                  </note>
                  <tip>
                     <title>Tip notice</title>
                     <para>Helpful information, like a guideline or a piece of practical advice.</para>
                  </tip>
               </listitem>
               <listitem>
                  <para>Compact Notices</para>
                  <note role="compact">
                     <para>Additional information, for example about differences in software versions.</para>
                  </note>
                  <tip role="compact">
                     <para>Helpful information, like a guideline or a piece of practical advice.</para>
                  </tip>
               </listitem>
            </itemizedlist>
         </sect1>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 xml:lang="en" version="5.2"><?include common_intro_support.xml?>
            <title>Support</title>
            <info/>
            <para>Find the support statement for <phrase role="productname">SUSE Linux Enterprise Server</phrase> and general information about technology previews below. For details about the product lifecycle, see <link xlink:href="https://www.suse.com/lifecycle"/>. <!-- 2024-05-23 tbazant: resolves bsc#1221920 --></para>
            <para>If you are entitled to support, find details on how to collect information for a support ticket at <link xlink:href="https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html"/>.</para>
            <sect2>
               <title>Support statement for <phrase role="productname">SUSE Linux Enterprise Server</phrase>
               </title>
               <para>To receive support, you need an appropriate subscription with SUSE. To view the specific support offers available to you, go to <link xlink:href="https://www.suse.com/support/"/> and select your product.</para>
               <para>The support levels are defined as follows:</para>
               <variablelist>
                  <varlistentry>
                     <term>L1</term>
                     <listitem>
                        <para>Problem determination, which means technical support designed to provide compatibility information, usage support, ongoing maintenance, information gathering and basic troubleshooting using available documentation.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>L2</term>
                     <listitem>
                        <para>Problem isolation, which means technical support designed to analyze data, reproduce customer problems, isolate a problem area and provide a resolution for problems not resolved by Level 1 or prepare for Level 3.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>L3</term>
                     <listitem>
                        <para>Problem resolution, which means technical support designed to resolve problems by engaging engineering to resolve product defects which have been identified by Level 2 Support.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>For contracted customers and partners, <phrase role="productname">SUSE Linux Enterprise Server</phrase> is delivered with L3 support for all packages, except for the following:</para>
               <itemizedlist>
                  <listitem>
                     <para>Technology previews.</para>
                  </listitem>
                  <listitem>
                     <para>Sound, graphics, fonts, and artwork.</para>
                  </listitem>
                  <listitem>
                     <para>Packages that require an additional customer contract.</para>
                  </listitem>
                  <listitem>
                     <para>Some packages shipped as part of the module <emphasis>Workstation Extension</emphasis> are L2-supported only.</para>
                  </listitem>
                  <listitem>
                     <para>Packages with names ending in <package>-devel</package> (containing header files and similar developer resources) will only be supported together with their main packages.</para>
                  </listitem>
               </itemizedlist>
               <para>SUSE will only support the usage of original packages. That is, packages that are unchanged and not recompiled.</para>
            </sect2>
            <sect2>
               <title>Technology previews</title>
               <para>Technology previews are packages, stacks, or features delivered by SUSE to provide glimpses into upcoming innovations. Technology previews are included for your convenience to give you a chance to test new technologies within your environment. We would appreciate your feedback. If you test a technology preview, please contact your SUSE representative and let them know about your experience and use cases. Your input is helpful for future development.</para>
               <para>Technology previews have the following limitations:</para>
               <itemizedlist>
                  <listitem>
                     <para>Technology previews are still in development. Therefore, they may be functionally incomplete, unstable, or otherwise <emphasis>not</emphasis> suitable for production use.</para>
                  </listitem>
                  <listitem>
                     <para>Technology previews are <emphasis>not</emphasis> supported.</para>
                  </listitem>
                  <listitem>
                     <para>Technology previews may only be available for specific hardware architectures.</para>
                  </listitem>
                  <listitem>
                     <para>Details and functionality of technology previews are subject to change. As a result, upgrading to subsequent releases of a technology preview may be impossible and require a fresh installation.</para>
                  </listitem>
                  <listitem>
                     <para>SUSE may discover that a preview does not meet customer or market needs, or does not comply with enterprise standards. Technology previews can be removed from a product at any time. SUSE does not commit to providing a supported version of such technologies in the future.</para>
                  </listitem>
               </itemizedlist>
               <para>For an overview of technology previews shipped with your product, see the release notes at <link xlink:href="https://www.suse.com/releasenotes"/>.</para>
            </sect2>
         </sect1>
      </preface>
      <part xml:id="part-virt-intro">
         <title>Introduction</title>
         <chapter version="5.2" xml:id="chap-virtualization-introduction"><?file vt_introduction.xml?><!-- I/O virtualization -->
            <title>Virtualization technology</title>
            <info>
               <abstract>
                  <para>Virtualization is a technology that provides a way for a machine (Host) to run another operating system (guest virtual machines) on top of the host operating system.</para>
               </abstract>
            </info>
            <sect1 xml:id="sec-virtualization-introduction-overview">
               <title>Overview</title>
               <!-- import from White papers -->
               <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> includes the latest open source virtualization technologies, Xen and KVM. With these hypervisors, <phrase role="productname">SUSE Linux Enterprise Server</phrase> can be used to provision, de-provision, install, monitor and manage multiple virtual machines (VM Guests) on a single physical system (for more information see <xref linkend="gloss-vt-hypervisor"/>). <phrase role="productname">SUSE Linux Enterprise Server</phrase> can create virtual machines running both modified, highly tuned, paravirtualized operating systems and fully virtualized unmodified operating systems.</para>
               <para>The primary component of the operating system that enables virtualization is a hypervisor (or virtual machine manager), which is a layer of software that runs directly on server hardware. It controls platform resources, sharing them among multiple VM Guests and their operating systems by presenting virtualized hardware interfaces to each VM Guest.</para>
               <para>SUSE Linux Enterprise is an enterprise-class Linux server operating system that offers two types of hypervisors: Xen and KVM.</para>
               <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> with Xen or KVM acts as a virtualization host server (<xref linkend="gloss-vt-vhs"/>) that supports VM Guests with its own guest operating systems. The SUSE VM Guest architecture consists of a hypervisor and management components that constitute the VHS, which runs many application-hosting VM Guests.</para>
               <para>In Xen, the management components run in a privileged VM Guest often called <xref linkend="gloss-vt-dom0"/>. In KVM, where the Linux kernel acts as the hypervisor, the management components run directly on the VHS.</para>
            </sect1>
            <sect1 xml:id="sec-virtualization-introduction-benefits">
               <title>Virtualization benefits</title>
               <para>Virtualization brings a lot of advantages while providing the same service as a hardware server.</para>
               <para>First, it reduces the cost of your infrastructure. Servers are mainly used to provide a service to a customer, and a virtualized operating system can provide the same service, with:</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <para>Less hardware: you can run several operating systems on a single host, therefore all hardware maintenance is reduced.</para>
                  </listitem>
                  <listitem>
                     <para>Less power/cooling: less hardware means you do not need to invest more in electric power, backup power, and cooling if you need more service.</para>
                  </listitem>
                  <listitem>
                     <para>Save space: your data center space is saved because you do not need more hardware servers (less servers than service running).</para>
                  </listitem>
                  <listitem>
                     <para>Less management: using a VM Guest simplifies the administration of your infrastructure.</para>
                  </listitem>
                  <listitem>
                     <para>Agility and productivity: Virtualization provides <emphasis>migration</emphasis> capabilities, <emphasis>live migration</emphasis> and <emphasis>snapshots</emphasis>. These features reduce downtime, and bring an easy way to move your service from one place to another without any service interruption.</para>
                  </listitem>
               </itemizedlist>
            </sect1>
            <sect1 xml:id="sec-virtualization-introduction-fvpv">
               <title>Virtualization modes</title>
               <para>Guest operating systems are hosted on virtual machines in either full virtualization (FV) mode or paravirtual (PV) mode. Each virtualization mode has advantages and disadvantages.</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <para>Full virtualization mode lets virtual machines run unmodified operating systems, such as Windows* Server 2003. It can use either Binary Translation or <xref linkend="gloss-vt-hwassisted"/> virtualization technology, such as AMD* Virtualization or Intel* Virtualization Technology. Using hardware assistance allows for better performance on processors that support it.</para>
                     <para>Certain guest operating systems hosted in full virtualization mode can be configured to use drivers from the SUSE Virtual Machine Drivers Pack (VMDP) instead of drivers originating from the operating system. Running virtual machine drivers improves performance dramatically on guest operating systems, such as Windows Server 2003. For more information, see <xref linkend="app-vmdp-driver"/>.</para>
                  </listitem>
                  <listitem>
                     <para>To be able to run under paravirtual mode, guest operating systems normally need to be modified for the virtualization environment. However, operating systems running in paravirtual mode have better performance than those running under full virtualization.</para>
                     <para>Operating systems currently modified to run in paravirtual mode are called <emphasis>paravirtualized operating systems</emphasis> and include <phrase role="productname">SUSE Linux Enterprise Server</phrase>.</para>
                  </listitem>
               </itemizedlist>
            </sect1>
            <!-- I/O virtualization -->
            <sect1 version="5.2" xml:id="sec-vt-io"><?file vt_io.xml?>
               <title>I/O virtualization</title>
               <info/>
               <para>VM Guests not only share CPU and memory resources of the host system, but also the I/O subsystem. Because software I/O virtualization techniques deliver less performance than bare metal, hardware solutions that deliver almost <quote>native</quote> performance have been developed recently. <phrase role="productname">SUSE Linux Enterprise Server</phrase> supports the following I/O virtualization techniques:</para>
               <variablelist>
                  <varlistentry xml:id="vt-io-fullv">
                     <term>Full virtualization</term>
                     <listitem>
                        <para>Fully Virtualized (FV) drivers emulate widely supported real devices, which can be used with an existing driver in the VM Guest. The guest is also called <emphasis>Hardware Virtual Machine</emphasis> (HVM). Since the physical device on the VM Host Server may differ from the emulated one, the hypervisor needs to process all I/O operations before handing them over to the physical device. Therefore all I/O operations need to traverse two software layers, a process that not only significantly impacts I/O performance, but also consumes CPU time.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry xml:id="vt-io-parav">
                     <term>Paravirtualization</term>
                     <listitem>
                        <para>Paravirtualization (PV) allows direct communication between the hypervisor and the VM Guest. With less overhead involved, performance is much better than with full virtualization. However, paravirtualization requires either the guest operating system to be modified to support the paravirtualization API or paravirtualized drivers. See <xref linkend="sec-kvm-requires-guests-virt-drivers"/> for a list of guest operating systems supporting paravirtualization.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry xml:id="vt-io-pvhvm">
                     <term>PVHVM</term>
                     <listitem>
                        <para>This type of virtualization enhances HVM (see <xref linkend="vt-io-fullv"/>) with paravirtualized (PV) drivers, and PV interrupt and timer handling.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry xml:id="vt-io-vfio">
                     <term>VFIO</term>
                     <listitem>
                        <para>VFIO stands for <emphasis>Virtual Function I/O</emphasis> and is a new user-level driver framework for Linux. It replaces the traditional KVM PCI Pass-Through device assignment. The VFIO driver exposes direct device access to user space in a secure memory (<xref linkend="gloss-vt-acronym-iommu"/>) protected environment. With VFIO, a VM Guest can directly access hardware devices on the VM Host Server (pass-through), avoiding performance issues caused by emulation in performance critical paths. This method does not allow to share devices—each device can only be assigned to a single VM Guest. VFIO needs to be supported by the VM Host Server CPU, chipset and the BIOS/EFI.</para>
                        <para>Compared to the legacy KVM PCI device assignment, VFIO has the following advantages:</para>
                        <itemizedlist mark="bullet" spacing="normal">
                           <listitem>
                              <para>Resource access is compatible with UEFI Secure Boot.</para>
                           </listitem>
                           <listitem>
                              <para>Device is isolated and its memory access protected.</para>
                           </listitem>
                           <listitem>
                              <para>Offers a user space device driver with more flexible device ownership model.</para>
                           </listitem>
                           <listitem>
                              <para>Is independent of KVM technology, and not bound to x86 architecture only.</para>
                           </listitem>
                        </itemizedlist>
                        <para>In <phrase role="productname">SUSE Linux Enterprise Server</phrase> the USB and PCI pass-through methods of device assignment are considered deprecated and are superseded by the VFIO model.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry xml:id="vt-io-sriov">
                     <term>SR-IOV</term>
                     <listitem>
                        <para>The latest I/O virtualization technique, Single Root I/O Virtualization SR-IOV combines the benefits of the aforementioned techniques—performance and the ability to share a device with several VM Guests. SR-IOV requires special I/O devices, that are capable of replicating resources so they appear as multiple separate devices. Each such <quote>pseudo</quote> device can be directly used by a single guest. However, for network cards for example the number of concurrent queues that can be used is limited, potentially reducing performance for the VM Guest compared to paravirtualized drivers. On the VM Host Server, SR-IOV must be supported by the I/O device, the CPU and chipset, the BIOS/EFI and the hypervisor—for setup instructions see <xref linkend="sec-libvirt-config-pci"/>. <!-- fs 2014-02-21: no list available
     ATM &productname; supports the SRV-IOV capable network cards listed below
     --></para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <important xml:id="ann-vt-io-require">
                  <title>Requirements for VFIO and SR-IOV</title>
                  <para>To be able to use the VFIO and SR-IOV features, the VM Host Server needs to fulfill the following requirements:</para>
                  <itemizedlist>
                     <listitem>
                        <para>IOMMU needs to be enabled in the BIOS/EFI.</para>
                     </listitem>
                     <listitem>
                        <para>For Intel CPUs, the kernel parameter <literal>intel_iommu=on</literal> needs to be provided on the kernel command line. For more information, see <link xlink:href="https://github.com/torvalds/linux/blob/master/Documentation/admin-guide/kernel-parameters.txt#L1951"/>.</para>
                     </listitem>
                     <listitem>
                        <para>The VFIO infrastructure needs to be available. This can be achieved by loading the kernel module <systemitem class="resource">vfio_pci</systemitem>. For more information, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Administration Guide</quote>, </phrase><xref linkend="sec-boot-systemd-advanced-kernel-modules" xrefstyle="%label &#34;%c&#34;"/>.</para>
                     </listitem>
                  </itemizedlist>
               </important>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-virtualization-scenarios"><?file vt_scenarios.xml?><!-- I/O virtualization -->
            <title>Virtualization scenarios</title>
            <info/>
            <para>Virtualization provides several useful capabilities to your organization, for example:</para>
            <itemizedlist>
               <listitem>
                  <para>more efficient hardware usage</para>
               </listitem>
               <listitem>
                  <para>support for legacy software</para>
               </listitem>
               <listitem>
                  <para>operating system isolation</para>
               </listitem>
               <listitem>
                  <para>live migration</para>
               </listitem>
               <listitem>
                  <para>disaster recovery</para>
               </listitem>
               <listitem>
                  <para>load balancing</para>
               </listitem>
            </itemizedlist>
            <sect1 xml:id="sec-virtualization-scenarios-capabilities">
               <title>Server consolidation</title>
               <para>Many servers can be replaced by one big physical server, so that hardware is consolidated, and guest operating systems are converted to virtual machines. This also supports running legacy software on new hardware. <!-- reduce cost --></para>
               <itemizedlist>
                  <listitem>
                     <para>Better usage of resources that were not running at 100%</para>
                  </listitem>
                  <listitem>
                     <para>Fewer server locations needed</para>
                  </listitem>
                  <listitem>
                     <para>More efficient use of computer resources: multiple workloads on the same server</para>
                  </listitem>
                  <listitem>
                     <para>Simplification of data center infrastructure</para>
                  </listitem>
                  <listitem>
                     <para>Simplifies moving workloads to other hosts, avoiding service downtime</para>
                  </listitem>
                  <listitem>
                     <para>Faster and agile virtual machine provisioning</para>
                  </listitem>
                  <listitem>
                     <para>Multiple guest operating systems can run on a single host</para>
                  </listitem>
               </itemizedlist>
               <important>
                  <para>Server consolidation requires special attention to the following points:</para>
                  <itemizedlist>
                     <listitem>
                        <para>Maintenance windows should be carefully planned</para>
                     </listitem>
                     <listitem>
                        <para>Storage is key: it must be able to support migration and growing disk usage</para>
                     </listitem>
                     <listitem>
                        <para>You must verify that your servers can support the additional workloads</para>
                     </listitem>
                  </itemizedlist>
               </important>
            </sect1>
            <sect1>
               <title>Isolation</title>
               <para>Guest operating systems are fully isolated from the host running them. Therefore, if there are problems inside virtual machines, the host is not harmed. Also, problems inside one VM do not affect other VMs. No data is shared between VMs.</para>
               <itemizedlist>
                  <listitem>
                     <para>UEFI Secure Boot can be used for VMs.</para>
                  </listitem>
                  <listitem>
                     <para>KSM should be avoided. For more details on KSM, refer to <xref linkend="gloss-vt-acronym-ksm"/>.</para>
                  </listitem>
                  <listitem>
                     <para>Individual CPU cores can be assigned to VMs.</para>
                  </listitem>
                  <listitem>
                     <para>Hyper-threading (HT) should be disabled to avoid potential security issues.</para>
                  </listitem>
                  <listitem>
                     <para>VM should not share network, storage, or network hardware.</para>
                  </listitem>
                  <listitem>
                     <para>Use of advanced hypervisor features such as PCI pass-through or NUMA adversely affects VM migration capabilities.</para>
                  </listitem>
                  <listitem>
                     <para>Use of paravirtualization and <literal>virtio</literal> drivers improves VM performance and efficiency.</para>
                  </listitem>
               </itemizedlist>
               <para>AMD provides specific features regarding the security of virtualization. <!-- link to the SEV doc? --></para>
               <!-- REMOVE IT FROM NOW. PM WOULD LIKE TO DISCUSS ABOUT THIS
      <itemizedlist>
      <listitem>
      <para>
      AMD Secure Memory Encryption (SME):
      Uses a single key to encrypt system memory. The key is generated by the AMD Secure Processor at boot. SME requires enablement in the system BIOS or operating system. When enabled in the BIOS, memory encryption is transparent and can be run with any operating system.
      </para>
      </listitem>
      <listitem>
      <para>
      AMD Secure Encrypted Virtualization (SEV):
      Uses one key per virtual machine to isolate guests and the hypervisor from one another. The keys are managed by the AMD Secure Processor. SEV requires enablement in the guest operating system and hypervisor. The guest changes allow the VM to indicate which pages in memory should be encrypted. The hypervisor changes use hardware virtualization instructions and communication with the AMD Secure processor to manage the appropriate keys in the memory controller.
      </para>
      </listitem>
      <listitem>
      <para>
      AMD Secure Encrypted Virtualization-Encrypted State (SEV-ES):
      Since SEV only operates when a VM is running, the additional SEV-ES feature encrypts
      all CPU register contents when a VM stops running. This prevents the leakage of information
      in VMs' CPU registers to the hypervisor. SEV-ES can also detect malicious modifications to
      a CPU's register state.
      </para>
      </listitem>
      </itemizedlist>
      -->
            </sect1>
            <!-- MIGRATION IS A VT FEATURE NOT A SCENARIO
    <sect1>
    <title>Migration</title>
    <para>
    Migration is a process to move a running virtual machine to another
    physical machine. Live migration is an extended feature that allows
    this move without disconnection of the client or the application.
    </para>
    </sect1>
    -->
            <sect1>
               <title>Disaster recovery</title>
               <para>The hypervisor can make snapshots of VMs, enabling restoration to a known good state, or to any desired earlier state. Since <xref linkend="gloss-vt-virtualized"/> OSes are less dependent on hardware configuration than those running directly on bare metal, these snapshots can be restored onto different server hardware so long as it is running the same hypervisor.</para>
               <!--
      use storage replication like drbd, cluster-md, SES product
      system snapshot 
      overlay images and backing images
      recover to any other host
      run workloads on unused hardware
      easily copy data to other sites
      -->
            </sect1>
            <sect1>
               <title>Dynamic load balancing</title>
               <para>Live migration provides a simple way to load-balance your services across your infrastructure, by moving VMs from busy hosts to those with spare capacity, on demand.</para>
               <!--    HA
      The cluster resource manager in SLE HA can recognize, monitor, and manage services running within virtual servers and services running in physical servers. Guest systems can be managed as services by the cluster.
      -->
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-xen-basics"><?file xen_virtualization_basics.xml?>
            <title>Introduction to Xen virtualization</title>
            <info/>
            <para>This chapter introduces and explains the components and technologies you need to understand to set up and manage a Xen-based virtualization environment.</para>
            <sect1 xml:id="sec-xen-basics-components">
               <title>Basic components</title>
               <para>The basic components of a Xen-based virtualization environment are the following:</para>
               <itemizedlist>
                  <listitem>
                     <para>Xen hypervisor</para>
                  </listitem>
                  <listitem>
                     <para>Dom0</para>
                  </listitem>
                  <listitem>
                     <para>any number of other VM Guests</para>
                  </listitem>
                  <listitem>
                     <para>tools, commands and configuration files to manage virtualization</para>
                  </listitem>
               </itemizedlist>
               <para>Collectively, the physical computer running all these components is called a <emphasis>VM Host Server</emphasis> because together these components form a platform for hosting virtual machines.</para>
               <variablelist>
                  <varlistentry>
                     <term>The Xen hypervisor</term>
                     <listitem>
                        <para>The Xen hypervisor, sometimes simply called a virtual machine monitor, is an open source software program that coordinates the low-level interaction between virtual machines and physical hardware.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>The Dom0</term>
                     <listitem>
                        <para>The virtual machine host environment, also called <emphasis>Dom0</emphasis> or controlling domain, is composed of several components, such as:</para>
                        <itemizedlist mark="bullet" spacing="normal">
                           <listitem>
                              <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> provides a graphical and a command line environment to manage the virtual machine host components and its virtual machines.</para>
                              <note>
                                 <para>The term <quote>Dom0</quote> refers to a special domain that provides the management environment. This may be run either in graphical or in command line mode.</para>
                              </note>
                           </listitem>
                           <listitem>
                              <para>The xl tool stack based on the xenlight library (libxl). Use it to manage Xen guest domains.</para>
                           </listitem>
                           <listitem>
                              <para>QEMU—an open source software that emulates a full computer system, including a processor and multiple peripherals. It provides the ability to host operating systems in both full virtualization or paravirtualization mode.</para>
                           </listitem>
                        </itemizedlist>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Xen-based virtual machines</term>
                     <listitem>
                        <para>A Xen-based virtual machine, also called a <replaceable>VM Guest</replaceable> or <replaceable>DomU</replaceable>, consists of the following components:</para>
                        <itemizedlist mark="bullet" spacing="normal">
                           <listitem>
                              <para>At least one virtual disk that contains a bootable operating system. The virtual disk can be based on a file, partition, volume, or other type of block device.</para>
                           </listitem>
                           <listitem>
                              <para>A configuration file for each guest domain. It is a text file following the syntax described in the man page <command>man 5 xl.conf</command>.</para>
                           </listitem>
                           <listitem>
                              <para>Several network devices, connected to the virtual network provided by the controlling domain.</para>
                           </listitem>
                        </itemizedlist>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>Management tools, commands, and configuration files</term>
                     <listitem>
                        <para>There is a combination of GUI tools, commands and configuration files to help you manage and customize your virtualization environment.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="sec-xen-basics-arch">
               <title>Xen virtualization architecture</title>
               <para>The following graphic depicts a virtual machine host with four virtual machines. The Xen hypervisor is shown as running directly on the physical hardware platform. The controlling domain is also a virtual machine, although it has several additional management tasks compared to all the other virtual machines.</para>
               <figure xml:id="fig-xen-basics-arch">
                  <title>Xen virtualization architecture</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/xen_master_fong_a.png" width="92%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/xen_master_fong_a.png" width="92%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
               <para>On the left, the virtual machine host’s Dom0 is shown running the <phrase role="productname">SUSE Linux Enterprise Server</phrase> operating system. The two virtual machines shown in the middle are running paravirtualized operating systems. The virtual machine on the right shows a fully virtual machine running an unmodified operating system, such as the latest version of Microsoft Windows/Server.</para>
            </sect1>
            <!-- aginies 2014-06-17 this part is not mandatory, VHS is explained in
    glossary
    <sect1 id="sec-xen-basics-vhost">
    <title>The virtual machine host</title>
    <para>
    After you install the virtualization components and reboot the computer,
    the &grub; boot loader menu displays a &xen; menu option. Selecting the
    &xen; menu option loads the &xen; hypervisor and starts the &dom0;
    running the &suselinux; operating system.
    </para>
    <para>
    Running on &dom0;, the &suselinux; operating system displays the
    installed text console or desktop environment, such as &gnome;. The
    terminals of &vmguest; systems are displayed in their own window inside
    the controlling &dom0; when opened.
    </para>
    <figure pgwide="0" id="fig-xen-basics-vhost">
    <title>Desktop showing virtual machine manager and virtual machines</title>
    <mediaobject>
    <imageobject role="fo">
    <imagedata fileref="xen_fullscreen.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
    <imagedata fileref="xen_fullscreen.png" width="100%"/>
    </imageobject>
    </mediaobject>
    </figure>
    </sect1>
    -->
         </chapter>
         <chapter version="5.2" xml:id="cha-kvm-intro"><?file kvm_virtualization_basics.xml?>
            <title>Introduction to KVM virtualization</title>
            <info/>
            <sect1 xml:id="sec-kvm-intro">
               <title>Basic components</title>
               <para>KVM is a full virtualization solution for hardware architectures that support hardware virtualization (refer to <xref linkend="sec-architecture-support"/> for more details on supported architectures).</para>
               <para>VM Guests (virtual machines), virtual storage and virtual networks can be managed with QEMU tools directly or with the <systemitem class="library">libvirt</systemitem>-based stack. The QEMU tools include <command>qemu-system-ARCH</command>, the QEMU monitor, <command>qemu-img</command>, and <command>qemu-ndb</command>. A <systemitem class="library">libvirt</systemitem>-based stack includes <systemitem class="library">libvirt</systemitem> itself, along with <systemitem class="library">libvirt</systemitem>-based applications such as <command>virsh</command>, <command>virt-manager</command>, <command>virt-install</command>, and <command>virt-viewer</command>.</para>
            </sect1>
            <sect1 xml:id="sec-kvm-intro-arch">
               <title>KVM virtualization architecture</title>
               <para>This full virtualization solution consists of two main components:</para>
               <itemizedlist>
                  <listitem>
                     <para>A set of kernel modules (<systemitem>kvm.ko</systemitem>, <systemitem>kvm-intel.ko</systemitem>, and <systemitem>kvm-amd.ko</systemitem>) that provides the core virtualization infrastructure and processor-specific drivers.</para>
                  </listitem>
                  <listitem>
                     <para>A user space program (<systemitem class="resource">qemu-system-ARCH</systemitem>) that provides emulation for virtual devices and control mechanisms to manage VM Guests (virtual machines).</para>
                  </listitem>
               </itemizedlist>
               <para>The term KVM more properly refers to the kernel level virtualization functionality, but is in practice more commonly used to refer to the user space component.</para>
               <figure xml:id="fig-kvm-basics-arch">
                  <title>KVM virtualization architecture</title>
                  <mediaobject>
                     <imageobject outputformat="print">
                        <imagedata fileref="media/kvm_qemu.png" width="92%"/>
                     </imageobject>
                     <imageobject outputformat="screen">
                        <imagedata fileref="media/kvm_qemu.png" width="92%"/>
                     </imageobject>
                  </mediaobject>
               </figure>
               <!-- QEMU CAN DO A LOT OF THINGS, WE DO NOT RECOMMEND
      TO EXPOSE THIS FEATURE IN THE OFFICIAL DOC AS WE DONT SUPPORT
      THEM
      <note>
      <title>Hyper-V emulation support</title>
      <para>
      QEMU can provide certain Hyper-V hypercalls for Windows* guests
      to partly emulate a Hyper-V environment. This can be used to achieve
      better behavior for Windows* guests that are Hyper-V enabled.
      </para>
      </note>
      -->
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-tools-intro"><?file vt_tools.xml?>
            <title>Virtualization tools</title>
            <info>
               <abstract>
                  <para><systemitem class="library">libvirt</systemitem> is a library that provides a common API for managing popular virtualization solutions, among them KVM and Xen. The library provides a normalized management API for these virtualization solutions, allowing a stable, cross-hypervisor interface for higher-level management tools. The library also provides APIs for management of virtual networks and storage on the VM Host Server. The configuration of each VM Guest is stored in an XML file.</para>
                  <para>With <systemitem class="library">libvirt</systemitem>, you can also manage your VM Guests remotely. It supports TLS encryption, x509 certificates and authentication with SASL. This enables managing VM Host Servers centrally from a single workstation, alleviating the need to access each VM Host Server individually.</para>
                  <para>Using the <systemitem class="library">libvirt</systemitem>-based tools is the recommended way of managing VM Guests. Interoperability between <systemitem class="library">libvirt</systemitem> and <systemitem class="library">libvirt</systemitem>-based applications has been tested and is an essential part of SUSE's support stance.</para>
               </abstract>
            </info>
            <sect1 xml:id="sec-tools-intro-console">
               <title>Virtualization console tools</title>
               <para><systemitem class="library">libvirt</systemitem> includes several command-line utilities to manage virtual machines. The most important ones are:</para>
               <variablelist>
                  <varlistentry>
                     <term>
                        <command>virsh</command> (Package: <package>libvirt-client</package>)</term>
                     <listitem>
                        <para>A command-line tool to manage VM Guests with similar functionality as the Virtual Machine Manager. <command>virsh</command> allows you to change a VM Guest's status, set up new guests and devices, or edit existing configurations. <command>virsh</command> is also useful to script VM Guest management operations.</para>
                        <para><command>virsh</command> takes the first argument as a command and further arguments as options to this command:</para>
                        <screen>virsh [-c <replaceable>URI</replaceable>] <replaceable>COMMAND</replaceable><replaceable>DOMAIN-ID</replaceable> [OPTIONS]</screen>
                        <para>Like <command>zypper</command>, <command>virsh</command> can also be called without a command. In this case, it starts a shell waiting for your commands. This mode is useful when having to run subsequent commands:</para>
                        <screen>~&gt; virsh -c qemu+ssh://wilber@mercury.example.com/system
Enter passphrase for key '/home/wilber/.ssh/id_rsa':
Welcome to virsh, the virtualization interactive terminal.

Type:  'help' for help with commands
       'quit' to quit

virsh # hostname
mercury.example.com</screen>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <command>virt-install</command> (Package: <package>virt-install</package>)</term>
                     <listitem>
                        <para>A command-line tool for creating new VM Guests using the <systemitem class="library">libvirt</systemitem> library. It supports graphical installations via VNC or <xref linkend="gloss-vt-acronym-spice"/> protocols. Given suitable command-line arguments, <command>virt-install</command> can run unattended. This allows for easy automation of guest installs. <command>virt-install</command> is the default installation tool used by the Virtual Machine Manager.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <command>remote-viewer</command> (Package: <package>virt-viewer</package>)</term>
                     <listitem>
                        <para>A simple viewer of a remote desktop. It supports SPICE and VNC protocols.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <command>virt-clone</command> (Package: <package>virt-install</package>)</term>
                     <listitem>
                        <para>A tool for cloning existing virtual machine images using the <systemitem class="library">libvirt</systemitem> hypervisor management library.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <command>virt-host-validate</command> (Package: <package>libvirt-client</package>)</term>
                     <listitem>
                        <para>A tool that validates whether the host is configured in a suitable way to run <systemitem class="library">libvirt</systemitem> hypervisor drivers.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
            <sect1 xml:id="sec-tools-intro-gui">
               <title>Virtualization GUI tools</title>
               <para>The following libvirt-based graphical tools are available on <phrase role="productname">SUSE Linux Enterprise Server</phrase>. All tools are provided by packages carrying the tool's name.</para>
               <variablelist>
                  <varlistentry>
                     <term>Virtual Machine Manager (package: <package>virt-manager</package>)</term>
                     <listitem>
                        <para>The Virtual Machine Manager is a desktop tool for managing VM Guests. It provides the ability to control the lifecycle of existing machines (start/shutdown, pause/resume, save/restore) and create new VM Guests. It allows managing multiple types of storage and virtual networks. It provides access to the graphical console of VM Guests with a built-in VNC viewer and can be used to view performance statistics. <command>virt-manager</command> supports connecting to a local <systemitem class="daemon">libvirtd</systemitem>, managing a local VM Host Server, or a remote <systemitem class="daemon">libvirtd</systemitem> managing a remote VM Host Server.</para>
                        <informalfigure>
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/virt_virt-manager.png" width="73%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/virt_virt-manager.png" width="73%"/>
                              </imageobject>
                           </mediaobject>
                        </informalfigure>
                        <para>To start the Virtual Machine Manager, enter <command>virt-manager</command> at the command prompt.</para>
                        <note>
                           <para>To disable automatic USB device redirection for VM Guest using spice, either launch <command>virt-manager</command> with the <option>--spice-disable-auto-usbredir</option> parameter or run the following command to persistently change the default behavior:</para>
                           <screen><prompt>&gt;</prompt>dconf write /org/virt-manager/virt-manager/console/auto-redirect false</screen>
                        </note>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <command>virt-viewer</command> (Package: <package>virt-viewer</package>)</term>
                     <listitem>
                        <para>A viewer for the graphical console of a VM Guest. It uses SPICE (configured by default on the VM Guest) or VNC protocols and supports TLS and x509 certificates. VM Guests can be accessed by name, ID or UUID. If the guest is not already running, the viewer can be told to wait until the guest starts, before attempting to connect to the console. <command>virt-viewer</command> is not installed by default and is available after installing the package <systemitem class="resource">virt-viewer</systemitem>.</para>
                        <note>
                           <para>To disable automatic USB device redirection for VM Guest using spice, add an empty filter using the <option>--spice-usbredir-auto-redirect-filter=''</option> parameter.</para>
                        </note>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>
                        <command>yast2 vm</command> (Package: <package>yast2-vm</package>)</term>
                     <listitem>
                        <para>A YaST module that simplifies the installation of virtualization tools and can set up a network bridge:</para>
                        <informalfigure pgwide="0">
                           <mediaobject>
                              <imageobject outputformat="print">
                                 <imagedata fileref="media/yast2_vm.png" width="51%"/>
                              </imageobject>
                              <imageobject outputformat="screen">
                                 <imagedata fileref="media/yast2_vm.png" width="51%"/>
                              </imageobject>
                           </mediaobject>
                        </informalfigure>
                     </listitem>
                  </varlistentry>
               </variablelist>
            </sect1>
         </chapter>
         <chapter version="5.2" xml:id="cha-vt-installation"><?file vt_installation.xml?>
            <title>Installation of virtualization components</title>
            <info/>
            <sect1 xml:id="introduction-install-virtualization-components">
               <title>Introduction</title>
               <para>To run a virtualization server (VM Host Server) that can host one or more guest systems (VM Guests), you need to install required virtualization components on the server. These components vary depending on which virtualization technology you want to use.</para>
            </sect1>
            <sect1 xml:id="install-virtualization-components">
               <title>Installing virtualization components</title>
               <para>You can install the virtualization tools required to run a VM Host Server in one of the following ways:</para>
               <itemizedlist>
                  <listitem>
                     <para>By selecting a specific system role during <phrase role="productname">SUSE Linux Enterprise Server</phrase> installation on the VM Host Server</para>
                  </listitem>
                  <listitem>
                     <para>By running the <emphasis>YaST Virtualization</emphasis> module on an already installed and running <phrase role="productname">SUSE Linux Enterprise Server</phrase>.</para>
                  </listitem>
                  <listitem>
                     <para>By installing specific installation patterns on an already installed and running <phrase role="productname">SUSE Linux Enterprise Server</phrase>.</para>
                  </listitem>
               </itemizedlist>
               <sect2 xml:id="install-virtualization-components-system-role">
                  <title>Specifying a system role</title>
                  <para>You can install all the tools required for virtualization during the installation of <phrase role="productname">SUSE Linux Enterprise Server</phrase> on the VM Host Server. During the installation, you are presented with the <guimenu>System Role</guimenu> screen.</para>
                  <figure>
                     <title>System Role screen</title>
                     <mediaobject>
                        <imageobject outputformat="print">
                           <imagedata fileref="media/virt-system-roles.png" width="69%"/>
                        </imageobject>
                        <imageobject outputformat="screen">
                           <imagedata fileref="media/virt-system-roles.png" width="69%"/>
                        </imageobject>
                     </mediaobject>
                  </figure>
                  <para>Here you can select either the <guimenu>KVM Virtualization Host</guimenu> or the <guimenu>Xen Virtualization Host</guimenu> roles. The appropriate software selection and setup is automatically performed during <phrase role="productname">SUSE Linux Enterprise Server</phrase> installation.</para>
                  <tip>
                     <para>Both virtualization system roles create a dedicated <filename>/var/lib/libvirt</filename> partition, and enable the <systemitem class="daemon">firewalld</systemitem> and Kdump services.</para>
                  </tip>
               </sect2>
               <sect2 xml:id="install-virtualization-components-yast">
                  <title>Running the <emphasis>YaST Virtualization</emphasis> module</title>
                  <para>Depending on the scope of <phrase role="productname">SUSE Linux Enterprise Server</phrase> installation on the VM Host Server, none of the virtualization tools may be installed on your system. They are automatically installed when configuring the hypervisor with the <emphasis>YaST Virtualization</emphasis> module.</para>
                  <tip>
                     <para>The <emphasis>YaST Virtualization</emphasis> module is included in the <package>yast2-vm</package> package. Verify it is installed on the VM Host Server before installing virtualization components.</para>
                  </tip>
                  <procedure>
                     <title>Installing the KVM environment</title>
                     <para>To install the KVM virtualization environment and related tools, proceed as follows:</para>
                     <step>
                        <para>Start YaST and select <menuchoice><guimenu>Virtualization</guimenu><guimenu>Install Hypervisor and Tools</guimenu></menuchoice>.</para>
                     </step>
                     <step>
                        <para>Select <guimenu>KVM server</guimenu> for a minimal installation of QEMU and KVM environment. Select <guimenu>KVM tools</guimenu> to use the <systemitem class="library">libvirt</systemitem>-based management stack as well. Confirm with <guimenu>Accept</guimenu>.</para>
                     </step>
                     <step>
                        <para>YaST offers to automatically configure a network bridge on the VM Host Server. It ensures proper networking capabilities of the VM Guest. Agree to do so by selecting <guimenu>Yes</guimenu>, otherwise choose <guimenu>No</guimenu>.</para>
                     </step>
                     <step>
                        <para>After the setup has been finished, you can start creating and configuring VM Guests. Rebooting the VM Host Server is not required.</para>
                     </step>
                  </procedure>
                  <procedure>
                     <title>Installing the Xen environment</title>
                     <para>To install the Xen virtualization environment, proceed as follows:</para>
                     <step>
                        <para>Start YaST and select<menuchoice><guimenu>Virtualization</guimenu><guimenu>Install Hypervisor and Tools</guimenu></menuchoice>.</para>
                     </step>
                     <step>
                        <para>Select <guimenu>Xen server</guimenu> for a minimal installation of Xen environment. Select <guimenu>Xen tools</guimenu> to use the <systemitem class="library">libvirt</systemitem>-based management stack as well. Confirm with <guimenu>Accept</guimenu>.</para>
                     </step>
                     <step>
                        <para>YaST offers to automatically configure a network bridge on the VM Host Server. It ensures proper networking capabilities of the VM Guest. Agree to do so by selecting <guimenu>Yes</guimenu>, otherwise choose <guimenu>No</guimenu>.</para>
                     </step>
                     <step>
                        <para>After the setup has been finished, you need to reboot the machine with the <emphasis>Xen kernel</emphasis>.</para>
                        <tip>
                           <title>Default boot kernel</title>
                           <para>If everything works as expected, change the default boot kernel with YaST and make the Xen-enabled kernel the default. For more information about changing the default kernel, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Administration Guide</quote>, </phrase><xref linkend="sec-grub2-yast2-config" xrefstyle="%label &#34;%c&#34;"/>.</para>
                        </tip>
                     </step>
                  </procedure>
               </sect2>
               <sect2 xml:id="install-virtualization-components-pattern">
                  <title>Installing specific installation patterns</title>
                  <para>Related software packages from <phrase role="productname">SUSE Linux Enterprise Server</phrase> software repositories are organized into <emphasis>installation patterns</emphasis>. You can use these patterns to install specific virtualization components on an already running <phrase role="productname">SUSE Linux Enterprise Server</phrase>. Use <command>zypper</command> to install them:</para>
                  <screen>zypper install -t pattern <replaceable>PATTERN_NAME</replaceable></screen>
                  <para>To install the KVM environment, consider the following patterns:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>kvm_server</literal>
                        </term>
                        <listitem>
                           <para>Installs basic VM Host Server with the KVM and QEMU environments.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>kvm_tools</literal>
                        </term>
                        <listitem>
                           <para>Installs <systemitem class="library">libvirt</systemitem> tools for managing and monitoring VM Guests in KVM environment.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
                  <para>To install the Xen environment, consider the following patterns:</para>
                  <variablelist>
                     <varlistentry>
                        <term>
                           <literal>xen_server</literal>
                        </term>
                        <listitem>
                           <para>Installs a basic Xen VM Host Server.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>
                           <literal>xen_tools</literal>
                        </term>
                        <listitem>
                           <para>Installs <systemitem class="library">libvirt</systemitem> tools for managing and monitoring VM Guests in Xen environment.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
            </sect1>
            <sect1 xml:id="sec-vt-installation-nested-vms">
               <title>Enable nested virtualization in KVM</title>
               <important>
                  <title>Technology preview</title>
                  <para>KVM's nested virtualization is still a technology preview. It is provided for testing purposes and is not supported.</para>
               </important>
               <para>Nested guests are KVM guests run in a KVM guest. When describing nested guests, we use the following virtualization layers:</para>
               <variablelist>
                  <varlistentry>
                     <term>L0</term>
                     <listitem>
                        <para>A bare metal host running KVM.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>L1</term>
                     <listitem>
                        <para>A virtual machine running on L0. Because it can run another KVM, it is called a <emphasis>guest hypervisor</emphasis>.</para>
                     </listitem>
                  </varlistentry>
                  <varlistentry>
                     <term>L2</term>
                     <listitem>
                        <para>A virtual machine running on L1. It is called a <emphasis>nested guest</emphasis>.</para>
                     </listitem>
                  </varlistentry>
               </variablelist>
               <para>Nested virtualization has many advantages. You can benefit from it in the following scenarios:</para>
               <itemizedlist>
                  <listitem>
                     <para>Manage your own virtual machines directly with your hypervisor of choice in cloud environments.</para>
                  </listitem>
                  <listitem>
                     <para>Enable the live migration of hypervisors and their guest virtual machines as a single entity.</para>
                     <note>
                        <para>Live migration of a nested VM Guest is not supported.</para>
                     </note>
                  </listitem>
                  <listitem>
                     <para>Use it for software development and testing.</para>
                  </listitem>
               </itemizedlist>
               <para>To enable nesting temporarily, remove the module and reload it with the <option>nested</option> KVM module parameter:</para>
               <itemizedlist>
                  <listitem>
                     <para>For Intel CPUs, run:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> modprobe -r kvm_intel &amp;&amp; modprobe kvm_intel nested=1
</screen>
                  </listitem>
                  <listitem>
                     <para>For AMD CPUs, run:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> modprobe -r kvm_amd &amp;&amp; modprobe kvm_amd nested=1
</screen>
                  </listitem>
               </itemizedlist>
               <para>To enable nesting permanently, enable the <option>nested</option> KVM module parameter in the <filename>/etc/modprobe.d/kvm_*.conf</filename> file, depending on your CPU:</para>
               <itemizedlist>
                  <listitem>
                     <para>For Intel CPUs, edit <filename>/etc/modprobe.d/kvm_intel.conf</filename> and add the following line:</para>
                     <screen>options kvm_intel nested=1</screen>
                  </listitem>
                  <listitem>
                     <para>For AMD CPUs, edit <filename>/etc/modprobe.d/kvm_amd.conf</filename> and add the following line:</para>
                     <screen>options kvm_amd nested=1</screen>
                  </listitem>
               </itemizedlist>
               <para>When your L0 host is capable of nesting, you can start an L1 guest in one of the following ways:</para>
               <itemizedlist>
                  <listitem>
                     <para>Use the <option>-cpu host</option> QEMU command line option.</para>
                  </listitem>
                  <listitem>
                     <para>Add the <literal>vmx</literal> (for Intel CPUs) or the <literal>svm</literal> (for AMD CPUs) CPU feature to the <option>-cpu</option> QEMU command line option, which enables virtualization for the virtual CPU.</para>
                  </listitem>
               </itemizedlist>
               <sect2 xml:id="sec-vt-installation-nested-vms-esxi">
                  <title>VMware ESX as a guest hypervisor</title>
                  <para>If you use VMware ESX as a guest hypervisor on top of a KVM bare metal hypervisor, you may experience unstable network communication. This problem occurs especially between nested KVM guests and the KVM bare metal hypervisor or external network. The following default CPU configuration of the nested KVM guest is causing the problem:</para>
                  <screen>&lt;cpu mode='host-model' check='partial'/&gt;</screen>
                  <para>To fix it, modify the CPU configuration as follow:</para>
                  <screen>
[...]
&lt;cpu mode='host-passthrough' check='none'&gt;
 &lt;cache mode='passthrough'/&gt;
&lt;/cpu&gt;
[...]
</screen>
               </sect2>
            </sect1>
         </chapter>
         <!-- aginies: Supported Virtualization limits are only in RN now (since SLE 12) -->
         <chapter version="5.2" xml:id="cha-virt-support"><?file virt_support.xml?>
            <title>Virtualization limits and support</title>
            <info/>
            <important>
               <para>QEMU is only supported when used for virtualization together with the KVM or Xen hypervisors. The TCG accelerator is not supported, even when it is distributed within SUSE products. Users must not rely on QEMU TCG to provide guest isolation, or for any security guarantees. See also <link xlink:href="https://qemu-project.gitlab.io/qemu/system/security.html"/>.</para>
            </important>
            <sect1 xml:id="sec-architecture-support">
               <title>Architecture support</title>
               <sect2 xml:id="sec-kvm-requires-hardware">
                  <title>KVM hardware requirements</title>
                  <para>SUSE supports KVM full virtualization on AMD64/Intel 64, AArch64, IBM Z and IBM LinuxONE hosts.</para>
                  <itemizedlist>
                     <listitem>
                        <para>On the AMD64/Intel 64 architecture, KVM is designed around hardware virtualization features included in AMD* (AMD-V) and Intel* (VT-x) CPUs. It supports virtualization features of chipsets and PCI devices, such as an I/O Memory Mapping Unit (<xref linkend="gloss-vt-acronym-iommu"/>) and Single Root I/O Virtualization (<xref linkend="vt-io-sriov"/>). You can test whether your CPU supports hardware virtualization with the following command:</para>
                        <screen><prompt>&gt;</prompt>egrep '(vmx|svm)' /proc/cpuinfo</screen>
                        <para>If this command returns no output, your processor either does not support hardware virtualization, or this feature has been disabled in the BIOS or firmware.</para>
                        <para>The following Web sites identify AMD64/Intel 64 processors that support hardware virtualization: <link xlink:href="https://ark.intel.com/Products/VirtualizationTechnology"/> (for Intel CPUs), and <link xlink:href="https://products.amd.com/"/> (for AMD CPUs).</para>
                     </listitem>
                     <listitem>
                        <para>On the Arm architecture, Armv8-A processors include support for virtualization.</para>
                     </listitem>
                     <listitem>
                        <para>On the Arm architecture, we only support running QEMU/KVM via the CPU model <literal>host</literal> (it is named <literal>host-passthrough</literal> in Virtual Machine Manager or <systemitem class="library">libvirt</systemitem>).</para>
                     </listitem>
                  </itemizedlist>
                  <note>
                     <title>KVM kernel modules not loading</title>
                     <para>The KVM kernel modules only load if the CPU hardware virtualization features are available.</para>
                  </note>
                  <para>The general minimum hardware requirements for the VM Host Server are the same as outlined in <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Deployment Guide</quote>, </phrase><xref linkend="sec-x86-requirements" xrefstyle="%label &#34;%c&#34;"/>. However, additional RAM for each virtualized guest is needed. It should at least be the same amount that is needed for a physical installation. It is also strongly recommended to have at least one processor core or hyper-thread for each running guest.</para>
                  <note>
                     <title>AArch64</title>
                     <para>AArch64 is a continuously evolving platform. It does not have a traditional standards and compliance certification program to enable interoperability with operating systems and hypervisors. Ask your vendor for the support statement on SUSE Linux Enterprise Server.</para>
                  </note>
                  <note>
                     <title>POWER</title>
                     <para>Running KVM or Xen hypervisors on the POWER platform is not supported.</para>
                  </note>
               </sect2>
               <sect2 xml:id="sec-xen-requires-hardware">
                  <title>Xen hardware requirements</title>
                  <para>SUSE supports Xen on AMD64/Intel 64.</para>
               </sect2>
            </sect1>
            <sect1 xml:id="virt-hypervisors-limits">
               <title>Hypervisor limits</title>
               <para>New features and virtualization limits for Xen and KVM are outlined in the <link xlink:href="https://www.suse.com/releasenotes/">Release Notes</link> for each Service Pack (SP).</para>
               <para>Only packages that are part of the official repositories for SUSE Linux Enterprise Server are supported. Conversely, all optional subpackages and plug-ins (for QEMU, <systemitem class="library">libvirt</systemitem>) provided at <link xlink:href="https://packagehub.suse.com/">packagehub</link> are not supported.</para>
               <para>For the maximum total virtual CPUs per host, see <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Quick Start Guides</quote>, </phrase><xref linkend="sec-vt-best-perf-cpu-assign" xrefstyle="%label &#34;%c&#34;"/>. The total number of virtual CPUs should be proportional to the number of available physical CPUs.</para>
               <note>
                  <title>32-bit hypervisor</title>
                  <para>With <phrase role="productname">SUSE Linux Enterprise Server</phrase> 11 SP2, we removed virtualization host facilities from 32-bit editions. 32-bit guests are not affected and are fully supported using the provided 64-bit hypervisor.</para>
               </note>
               <sect2 xml:id="virt-kvm-limits">
                  <title>KVM limits</title>
                  <para>Supported (and tested) virtualization limits of a <phrase role="productname">SUSE Linux Enterprise Server</phrase><phrase role="productnumber">15 SP7</phrase> host running Linux guests on AMD64/Intel 64. For other operating systems, refer to the specific vendor.</para>
                  <table>
                     <title>KVM VM limits</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1"/>
                        <colspec colnum="2" colname="2"/>
                        <tbody>
                           <row>
                              <entry><para>Maximum virtual CPUs per VM</para></entry>
                              <entry><para>768</para></entry>
                           </row>
                           <row>
                              <entry><para>Maximum memory per VM</para></entry>
                              <entry><para>4 TiB</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <note>
                     <para>KVM host limits are identical to SUSE Linux Enterprise Server (see the corresponding section of release notes), except for:</para>
                     <itemizedlist>
                        <listitem>
                           <para><emphasis>Maximum virtual CPUs per VM</emphasis>: see recommendations in the <citetitle>Virtualization Best Practices Guide</citetitle> regarding over-commitment of physical CPUs at <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Quick Start Guides</quote>, </phrase><xref linkend="sec-vt-best-perf-cpu-assign" xrefstyle="%label &#34;%c&#34;"/>. The total virtual CPUs should be proportional to the available physical CPUs.</para>
                        </listitem>
                     </itemizedlist>
                  </note>
               </sect2>
               <sect2 xml:id="virt-xen-limits">
                  <title>Xen limits</title>
                  <table>
                     <title>Xen VM limits</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1"/>
                        <colspec colnum="2" colname="2"/>
                        <tbody>
                           <row>
                              <entry><para>Maximum virtual CPUs per VM</para></entry>
                              <entry><para>64 (HVM Windows guest), 128 (trusted HVMs), or 512 (PV)</para></entry>
                           </row>
                           <row>
                              <entry><para>Maximum memory per VM</para></entry>
                              <entry><para>2 TiB (64-bit guest), 16 GiB (32-bit guest with PAE)</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table>
                     <title>Xen host limits</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1"/>
                        <colspec colnum="2" colname="2"/>
                        <tbody>
                           <row>
                              <entry><para>Maximum total physical CPUs</para></entry>
                              <entry><para>1024</para></entry>
                           </row>
                           <row>
                              <entry><para>Maximum total virtual CPUs per host</para></entry>
                              <entry><para>See recommendations in the Virtualization Best Practices Guide regarding over-commitment of physical CPUs in <link xlink:href="sec-vt-best-perf-cpu-assign"/>. The total virtual CPUs should be proportional to the available physical CPUs.</para></entry>
                           </row>
                           <row>
                              <entry><para>Maximum physical memory</para></entry>
                              <entry><para>16 TiB</para></entry>
                           </row>
                           <row>
                              <entry><para>Suspend and hibernate modes</para></entry>
                              <entry><para>Not supported.</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect2>
            </sect1>
            <sect1 xml:id="virt-support-hosts">
               <title>Supported host environments (hypervisors)</title>
               <para>This section describes the support status of <phrase role="productname">SUSE Linux Enterprise Server</phrase><phrase role="productnumber">15 SP7</phrase> running as a guest operating system on top of different virtualization hosts (hypervisors).</para>
               <table>
                  <title>The following SUSE host environments are supported</title>
                  <tgroup cols="2">
                     <colspec colnum="1" colname="1"/>
                     <colspec colnum="2" colname="2"/>
                     <thead>
                        <row>
                           <entry><para>SUSE Linux Enterprise Server</para></entry>
                           <entry><para>Hypervisors</para></entry>
                        </row>
                     </thead>
                     <tbody>
                        <row>
                           <entry><para>SUSE Linux Enterprise Server 12 SP5</para></entry>
                           <entry><para>Xen and KVM (SUSE Linux Enterprise Server 15 SP6 guest must use UEFI boot)</para></entry>
                        </row>
                        <row>
                           <entry><para>SUSE Linux Enterprise Server 15 SP3 to SP7</para></entry>
                           <entry><para>Xen and KVM</para></entry>
                        </row>
                     </tbody>
                  </tgroup>
               </table>
               <itemizedlist>
                  <title>The following third-party host environments are supported</title>
                  <!-- better refer to the appropriate website instead of providing the exact version which is always moving... -->
                  <listitem>
                     <para><link xlink:href="https://www.citrix.com/products/citrix-hypervisor/">Citrix XenServer</link></para>
                  </listitem>
                  <!--
      <listitem>
        <para>
          <link xlink:href="https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/supported-suse-virtual-machines-on-hyper-v">Hyper-V</link>
        </para>
      </listitem>
      -->
                  <listitem>
                     <para><link xlink:href="https://portal.nutanix.com/page/documents/compatibility-matrix/guestos">Nutanix Acropolis Hypervisor with AOS</link></para>
                  </listitem>
                  <listitem>
                     <para><link xlink:href="https://www.oracle.com/fr/virtualization/virtualbox/">Oracle VM Server 3.4</link></para>
                  </listitem>
                  <listitem>
                     <para><link xlink:href="https://www.oracle.com/linux/">Oracle Linux KVM 7, 8</link></para>
                  </listitem>
                  <listitem>
                     <para><link xlink:href="https://www.vmware.com/products/esxi-and-esx.html">VMware ESXi 6.7, 7.0</link></para>
                  </listitem>
                  <listitem>
                     <para>Windows Server 2016, 2019, 2022</para>
                  </listitem>
               </itemizedlist>
               <para>You can also search in the <link xlink:href="https://www.suse.com/yessearch/Search.jsp">SUSE YES certification database</link>.</para>
               <itemizedlist>
                  <title>The level of support is as follows</title>
                  <listitem>
                     <para>Support for SUSE host operating systems is full L3 (both for the guest and host), according to the respective <link xlink:href="https://www.suse.com/lifecycle/">product lifecycle</link>.</para>
                  </listitem>
                  <listitem>
                     <para>SUSE provides full L3 support for <phrase role="productname">SUSE Linux Enterprise Server</phrase> guests within third-party host environments.</para>
                  </listitem>
                  <listitem>
                     <para>Support for the host and cooperation with <phrase role="productname">SUSE Linux Enterprise Server</phrase> guests must be provided by the host system's vendor.</para>
                  </listitem>
               </itemizedlist>
            </sect1>
            <sect1 xml:id="virt-support-guests">
               <title>Supported guest operating systems</title>
               <para>This section lists the support status for guest operating systems virtualized on top of <phrase role="productname">SUSE Linux Enterprise Server</phrase><phrase role="productnumber">15 SP7</phrase> for KVM and Xen hypervisors.</para>
               <important>
                  <para>Microsoft Windows guests can be rebooted by <systemitem class="library">libvirt</systemitem>/<command>virsh</command> only if paravirtualized drivers are installed in the guest. Refer to <link xlink:href="https://www.suse.com/products/vmdriverpack/"/> for more details on downloading and installing PV drivers.</para>
               </important>
               <itemizedlist>
                  <title>The following guest operating systems are fully supported (L3):</title>
                  <listitem>
                     <para>SUSE Linux Enterprise Server 12 SP5</para>
                  </listitem>
                  <listitem>
                     <para>SUSE Linux Enterprise Server 15 SP2, 15 SP3, 15 SP4, 15 SP5, 15 SP6</para>
                  </listitem>
                  <listitem>
                     <para>SUSE Linux Enterprise Micro 5.1, 5.2, 5.3, 5.4, 5.5, 6.0</para>
                  </listitem>
                  <listitem>
                     <para>Windows Server 2016, 2019</para>
                  </listitem>
                  <!--
      <listitem>
        <para>
          <link xlink:href="https://www.windowsservercatalog.com/results.aspx?text=suse&amp;bCatID=1282&amp;avc=10&amp;ava=0&amp;OR=5">Microsoft
          Windows Server Catalog</link>
        </para>
      </listitem>
      -->
                  <listitem>
                     <para>Oracle Linux 6, 7, 8 (KVM hypervisor only)</para>
                  </listitem>
               </itemizedlist>
               <itemizedlist>
                  <title>The following guest operating systems are supported as a technology preview (L2, fixes if reasonable):</title>
                  <listitem>
                     <para>SLED 15 SP3</para>
                  </listitem>
                  <listitem>
                     <para>Windows 10 / 11</para>
                  </listitem>
               </itemizedlist>
               <itemizedlist>
                  <title>Red Hat and CentOS guest operating systems are fully supported (L3) if the customer has purchased SUSE Liberty Linux.</title>
                  <listitem>
                     <para>Refer to the SUSE Liberty Linux documentation at <link xlink:href="https://documentation.suse.com/liberty"/> for the list of available combinations and supported releases. In other cases, they are supported on a limited basis (L2, fixes if reasonable).</para>
                  </listitem>
               </itemizedlist>
               <note>
                  <title>RHEL PV drivers</title>
                  <para>Starting from RHEL 7.2, Red Hat removed Xen PV drivers.</para>
               </note>
               <itemizedlist>
                  <title>All other guest operating systems</title>
                  <listitem>
                     <para>In other combinations, L2 support is provided but fixes are available only if feasible. SUSE fully supports the host OS (hypervisor). The guest OS issues need to be supported by the respective OS vendor. If an issue fix involves both the host and guest environments, the customer needs to approach both SUSE and the guest VM OS vendor.</para>
                  </listitem>
                  <listitem>
                     <para>All guest operating systems are supported both fully virtualized and paravirtualized. The exception is Windows systems, which are only supported fully virtualized (but they can use PV drivers: <link xlink:href="https://www.suse.com/products/vmdriverpack/"/>), and OES operating systems, which are supported only paravirtualized.</para>
                  </listitem>
                  <listitem>
                     <para>All guest operating systems are supported both in 32-bit and 64-bit environments, unless stated otherwise.</para>
                  </listitem>
               </itemizedlist>
               <sect2 xml:id="sec-kvm-requires-guests-virt-drivers">
                  <title>Availability of paravirtualized drivers</title>
                  <para>To improve the performance of the guest operating system, paravirtualized drivers are provided when available. Although they are not required, it is strongly recommended to use them.</para>
                  <para>Starting with SUSE Linux Enterprise Server 12 SP2, we switched to a PVops kernel. We are no longer using a dedicated <package>kernel-xen</package> package:</para>
                  <itemizedlist>
                     <listitem>
                        <para>The <package>kernel-default+kernel-xen</package> on dom0 was replaced by the <package>kernel-default</package> package.</para>
                     </listitem>
                     <listitem>
                        <para>The <package>kernel-xen</package> package on PV domU was replaced by the <package>kernel-default</package> package.</para>
                     </listitem>
                     <listitem>
                        <para>The <package>kernel-default+xen-kmp</package> on HVM domU was replaced by <package>kernel-default</package>.</para>
                     </listitem>
                  </itemizedlist>
                  <para>For SUSE Linux Enterprise Server 12 SP1 and older (down to 10 SP4), the paravirtualized drivers are included in a dedicated <package>kernel-xen</package> package.</para>
                  <para>The paravirtualized drivers are available as follows:</para>
                  <variablelist>
                     <varlistentry>
                        <term>SUSE Linux Enterprise Server 12 / 12 SP1 / 12 SP2</term>
                        <listitem>
                           <para>Included in kernel</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>SUSE Linux Enterprise Server 11 / 11 SP1 / 11 SP2 / 11 SP3 / 11 SP4</term>
                        <listitem>
                           <para>Included in kernel</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>SUSE Linux Enterprise Server 10 SP4</term>
                        <listitem>
                           <para>Included in kernel</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Red Hat</term>
                        <listitem>
                           <para>Available since Red Hat Enterprise Linux 5.4. Starting from Red Hat Enterprise Linux 7.2, Red Hat removed the PV drivers.</para>
                        </listitem>
                     </varlistentry>
                     <varlistentry>
                        <term>Windows</term>
                        <listitem>
                           <para>SUSE has developed virtio-based drivers for Windows, which are available in the Virtual Machine Driver Pack (VMDP). For more information, see <link xlink:href="https://www.suse.com/products/vmdriverpack/"/>.</para>
                        </listitem>
                     </varlistentry>
                  </variablelist>
               </sect2>
            </sect1>
            <sect1 xml:id="virt-migration-support">
               <title>Supported VM migration scenarios</title>
               <para><phrase role="productname">SUSE Linux Enterprise Server</phrase> supports migrating a virtual machine from one physical host to another.</para>
               <sect2 xml:id="virt-migration-offline">
                  <title>Offline migration scenarios</title>
                  <para>SUSE supports offline migration, powering off a guest VM, then moving it to a host running a different SLE product, from SLE 12 to SLE 15 SP<replaceable>X</replaceable>. The following host operating system combinations are fully supported (L3) for migrating guests from one host to another:</para>
                  <table>
                     <title>Supported offline migration guests</title>
                     <tgroup cols="11">
                        <colspec colname="c1" align="center" colwidth="3*"/>
                        <colspec colname="c2" align="center"/>
                        <colspec colname="c3" align="center"/>
                        <colspec colname="c4" align="center"/>
                        <colspec colname="c5" align="center"/>
                        <colspec colname="c6" align="center"/>
                        <colspec colname="c7" align="center"/>
                        <colspec colname="c8" align="center"/>
                        <colspec colname="c9" align="center"/>
                        <colspec colname="c10" align="center"/>
                        <colspec colname="c11" align="center"/>
                        <thead>
                           <row valign="middle">
                              <entry align="right">Target SLES host</entry>
                              <entry morerows="1">12 SP3</entry>
                              <entry morerows="1">12 SP4</entry>
                              <entry morerows="1">12 SP5</entry>
                              <entry morerows="1">15 GA</entry>
                              <entry morerows="1">15 SP1</entry>
                              <entry morerows="1">15 SP2</entry>
                              <entry morerows="1">15 SP3</entry>
                              <entry morerows="1">15 SP4</entry>
                              <entry morerows="1">15 SP5</entry>
                              <entry morerows="1">15 SP6</entry>
                           </row>
                           <row>
                              <entry align="left">Source SLES host</entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><emphasis role="bold">12 SP3</emphasis></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">12 SP4</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase><superscript>1</superscript></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">12 SP5</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 GA</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP1</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP2</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP3</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP4</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP5</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP6</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <informaltable frame="none" rowsep="0" colsep="0">
                     <tgroup cols="2" align="left"><!-- FST: changed from '.5in', '100%' -->
                        <colspec colwidth="15mm"/>
                        <colspec colwidth="155mm"/>
                        <tbody>
                           <row>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><para>Fully compatible and fully supported</para></entry>
                           </row>
                           <row>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase><superscript>1</superscript></entry>
                              <entry><para>Supported for KVM hypervisor only</para></entry>
                           </row>
                           <row>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><para>Not supported</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
               </sect2>
               <sect2 xml:id="virt-migration-live">
                  <title>Live migration scenarios</title>
                  <para>This section lists support status of live migration scenarios when running virtualized on top of SLES. Also, refer to the supported <xref linkend="libvirt-admin-live-migration-requirements"/>. The following host operating system combinations are fully supported (L3 according to the respective <link xlink:href="https://www.suse.com/lifecycle">product life cycle</link>).</para>
                  <note>
                     <title>Live migration</title>
                     <itemizedlist>
                        <listitem>
                           <para>SUSE always supports live migration of virtual machines between hosts running SLES with successive service pack numbers. For example, from SLES 15 SP4 to 15 SP5.</para>
                        </listitem>
                        <listitem>
                           <para>SUSE strives to support live migration of virtual machines from a host running a service pack under LTSS to a host running a newer service pack, within the same major version of SUSE Linux Enterprise Server. For example, virtual machine migration from a SLES 12 SP2 host to a SLES 12 SP5 host. SUSE only performs minimal testing of LTSS-to-newer migration scenarios and recommends thorough on-site testing before attempting to migrate critical virtual machines.</para>
                        </listitem>
                     </itemizedlist>
                  </note>
                  <important>
                     <title>Xen live migration</title>
                     <para>Live migration between SLE 11 and SLE 12 is not supported because of the different tool stack, see the <link xlink:href="https://www.suse.com/releasenotes/x86_64/SUSE-SLES/12/#fate-317306">Release notes</link> for more details.</para>
                  </important>
                  <important>
                     <title>Confidential Computing</title>
                     <para>SLES 15 SP6 and newer include kernel patches and tooling to enable AMD and Intel Confidential Computing technology in the product. As this technology is not yet fully ready for a production environment, it is provided as a technology preview.</para>
                  </important>
                  <table>
                     <title>Supported live migration guests</title>
                     <tgroup cols="11">
                        <colspec colname="c1" align="center" colwidth="3*"/>
                        <colspec colname="c2" align="center"/>
                        <colspec colname="c3" align="center"/>
                        <colspec colname="c4" align="center"/>
                        <colspec colname="c5" align="center"/>
                        <colspec colname="c6" align="center"/>
                        <colspec colname="c7" align="center"/>
                        <colspec colname="c8" align="center"/>
                        <colspec colname="c9" align="center"/>
                        <colspec colname="c10" align="center"/>
                        <colspec colname="c11" align="center"/>
                        <thead>
                           <row valign="middle">
                              <entry align="right">Target SLES host</entry>
                              <entry morerows="1">12 SP4</entry>
                              <entry morerows="1">12 SP5</entry>
                              <entry morerows="1">15 GA</entry>
                              <entry morerows="1">15 SP1</entry>
                              <entry morerows="1">15 SP2</entry>
                              <entry morerows="1">15 SP3</entry>
                              <entry morerows="1">15 SP4</entry>
                              <entry morerows="1">15 SP5</entry>
                              <entry morerows="1">15 SP6</entry>
                              <entry morerows="1">15 SP7</entry>
                           </row>
                           <row>
                              <entry align="left">Source SLES host</entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><emphasis role="bold">12 SP3</emphasis></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">12 SP4</emphasis></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓<superscript>1</superscript></phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">12 SP5</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 GA</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP1</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP2</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP3</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP4</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP5</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry><emphasis role="bold">15 SP6</emphasis></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓<superscript>2</superscript></phrase></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <informaltable frame="none" rowsep="0" colsep="0">
                     <tgroup cols="2" align="left"><!-- FST: changed from '.5in', '100%' -->
                        <colspec colwidth="15mm"/>
                        <colspec colwidth="155mm"/>
                        <tbody>
                           <row>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><para>Fully compatible and fully supported</para></entry>
                           </row>
                           <row>
                              <entry><phrase role="color:suse-jungle-green">✓<superscript>1</superscript></phrase></entry>
                              <entry><para>Supported for KVM hypervisor only</para></entry>
                           </row>
                           <row>
                              <entry><phrase role="color:suse-jungle-green">✓<superscript>2</superscript></phrase></entry>
                              <entry><para>When available</para></entry>
                           </row>
                           <row>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><para>Not supported</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
               </sect2>
            </sect1>
            <sect1 xml:id="virt-support-feature-support">
               <title>Feature support</title>
               <important>
                  <title>Nested virtualization: tech preview</title>
                  <para>Nested virtualization allows you to run a virtual machine inside another VM while still using hardware acceleration from the host. It has low performance and adds more complexity while debugging. Nested virtualization is normally used for testing purposes. In SUSE Linux Enterprise Server, nested virtualization is a technology preview. It is only provided for testing and is not supported. Bugs can be reported, but they are treated with low priority. Any attempt to live migrate or to save or restore VMs in the presence of nested virtualization is also explicitly unsupported.</para>
               </important>
               <important>
                  <title>Post-copy live migration: tech preview</title>
                  <para>Post-copy is a method to live migrate virtual machines that is intended to get VMs running as soon as possible on the destination host, and have the VM RAM transferred gradually in the background over time as needed. Under certain conditions, this can be an optimization compared to the traditional pre-copy method. However, this comes with a major drawback: An error occurring during the migration (especially a network failure) can cause the whole VM RAM contents to be lost. Therefore, we recommend using pre-copy only in production, while post-copy can be used for testing and experimentation in case losing the VM state is not a major concern.</para>
               </important>
               <sect2 xml:id="virt-support-feature-support-host">
                  <title>Xen host (Dom0)</title>
                  <table>
                     <title>Feature support—host (<literal>Dom0</literal>)</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="c1" colwidth="7*"/>
                        <colspec colnum="2" colname="c2" align="center"/>
                        <thead>
                           <row>
                              <entry>Features</entry>
                              <entry>Xen</entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry>Network and block device hotplugging</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Physical <xref linkend="gloss-vt-cpu-hotplug"/></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry>Virtual <xref linkend="gloss-vt-cpu-hotplug"/></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Virtual <xref linkend="gloss-vt-cpu-pinning"/></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Virtual <xref linkend="gloss-vt-cpu-capping"/></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Intel* VT-x2: FlexPriority, FlexMigrate (migration constraints apply to dissimilar CPU architectures)</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Intel* VT-d2 (DMA remapping with interrupt filtering and queued invalidation)</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>AMD* IOMMU (I/O page table with guest-to-host physical address translation)</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <note>
                     <title>Adding or removing physical CPUs at runtime is not supported</title>
                     <para>The addition or removal of physical CPUs at runtime is not supported. However, virtual CPUs can be added or removed for each VM Guest while offline.</para>
                  </note>
               </sect2>
               <sect2 xml:id="virt-support-feature-support-fv">
                  <title>Guest feature support</title>
                  <note>
                     <title>Live migration of Xen PV guests</title>
                     <para>For live migration, both source and target system architectures need to match; that is, the processors (AMD* or Intel*) must be the same. Unless CPU ID masking is used, such as with Intel FlexMigration, the target should feature the same processor revision or a more recent processor revision than the source. If VMs are moved among different systems, the same rules apply for each move. To avoid failing optimized code at runtime or application start-up, source and target CPUs need to expose the same processor extensions. Xen exposes the physical CPU extensions to the VMs transparently. To summarize, guests can be 32-bit or 64-bit, but the <xref linkend="gloss-vt-vhs"/> must be identical.</para>
                  </note>
                  <note>
                     <title>Windows guest</title>
                     <para>Hotplugging of virtual network and virtual block devices, and resizing, shrinking and restoring dynamic virtual memory are supported in Xen and KVM only if PV drivers are being used (<link xlink:href="https://www.suse.com/products/vmdriverpack/">VMDP</link>).</para>
                  </note>
                  <note>
                     <title>Intel FlexMigration</title>
                     <para>For machines that support Intel FlexMigration, CPU-ID masking and faulting allow for more flexibility in cross-CPU migration.</para>
                  </note>
                  <tip>
                     <para>For KVM, a detailed description of supported limits, features, recommended settings and scenarios, and other useful information is maintained in <filename>kvm-supported.txt</filename>. This file is part of the KVM package and can be found in <filename>/usr/share/doc/packages/qemu-kvm</filename>.</para>
                  </tip>
                  <table>
                     <title>Guest feature support for Xen and KVM</title>
                     <tgroup cols="4">
                        <colspec colnum="1" colname="c1" colwidth="2*"/>
                        <colspec colnum="2" colname="c2" align="center"/>
                        <colspec colnum="3" colname="c3" align="center"/>
                        <colspec colnum="4" colname="c4" align="center"/>
                        <thead>
                           <row>
                              <entry>Features</entry>
                              <entry>Xen PV guest (DomU)</entry>
                              <entry>Xen FV guest</entry>
                              <entry>KVM FV guest</entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry>Virtual network and virtual block device hotplugging</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Virtual <xref linkend="gloss-vt-cpu-hotplug"/></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry>Virtual <xref linkend="gloss-vt-cpu-overcommit"/></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Dynamic virtual memory resize</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>VM save and restore</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>VM Live Migration</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase> [1]</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase> [1]</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>VM snapshot</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Advanced debugging with GDBC</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Dom0 metrics visible to VM</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>Memory ballooning</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                           </row>
                           <row>
                              <entry>PCI Pass-Through</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase> [2]</entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                           </row>
                           <row>
                              <entry>AMD SEV</entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase> [3]</entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <informaltable frame="none" rowsep="0" colsep="0">
                     <tgroup cols="2" align="left"><!-- FST: changed from '.5in', '100%' -->
                        <colspec colwidth="15mm"/>
                        <colspec colwidth="155mm"/>
                        <tbody>
                           <row>
                              <entry><phrase role="color:suse-jungle-green">✓</phrase></entry>
                              <entry><para>Fully compatible and fully supported</para></entry>
                           </row>
                           <row>
                              <entry><phrase role="color:red">❌</phrase></entry>
                              <entry><para>Not supported</para></entry>
                           </row>
                           <row>
                              <entry>[1]</entry>
                              <entry>See <xref linkend="libvirt-admin-live-migration-requirements"/>.</entry>
                           </row>
                           <row>
                              <entry>[2]</entry>
                              <entry>NetWare guests are excluded.</entry>
                           </row>
                           <row>
                              <entry>[3]</entry>
                              <entry>See <link xlink:href="https://documentation.suse.com/sles/html/SLES-amd-sev/article-amd-sev.html"/></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
               </sect2>
            </sect1>
            <!-- End X86_64 only -->
         </chapter>
      </part>
      <!-- ===================================================================== -->
      <!-- libvirt part                                                          -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- common not specific to a hypervisor                                   -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- xen part                                                              -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- qemu part                                                             -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- Troubleshooting part                                                             -->
      <!-- ===================================================================== -->
      <!-- ===================================================================== -->
      <!-- LXC part                                                              -->
      <!-- ===================================================================== -->
      <!-- deprecated SLE15SP3
 <part xml:id="part-virt-lxc">
  <title>Managing virtual machines with &lxc;</title>
  <xi:include href="lxc.xml"/>
  <xi:include href="lxc2libvirt.xml"/>
 </part>
 -->
      <!-- ===================================================================== -->
      <!-- Appendices                                                            -->
      <!-- ===================================================================== -->
      <glossary version="5.2" xml:id="gloss-vt-glossary"><?file vt_glossary.xml?><!-- include acronyms -->
         <title>Glossary</title>
         <info/>
         <glossdiv xml:id="gloss-vt-general">
            <title>General</title>
            <glossentry xml:id="gloss-vt-vmm">
               <glossterm>Virtual Machine Manager</glossterm>
               <glossdef>
                  <para>A software program that provides a graphical user interface for creating and managing virtual machines.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-virtualized">
               <glossterm>Virtualized</glossterm>
               <glossdef>
                  <para>A guest operating system or application running on a virtual machine.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-vm">
               <glossterm>Virtual Machine</glossterm>
               <glossdef>
                  <para>A virtualized PC environment (VM) capable of hosting a guest operating system and associated applications. Could be also called a VM Guest.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-vhs">
               <glossterm>VHS</glossterm>
               <glossdef>
                  <para>Virtualization Host Server</para>
                  <para>The physical computer running a SUSE virtualization platform software. The virtualization environment consists of the hypervisor, the host environment, virtual machines and associated tools, commands and configuration files. Other commonly used terms include host, Host Computer, Host Machine (HM), Virtual Server (VS), Virtual Machine Host (VMH), and VM Host Server (VHS).</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-xen">
               <glossterm>Xen</glossterm>
               <glossdef>
                  <para>See <xref linkend="cha-xen-basics"/></para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-kvm">
               <glossterm>KVM</glossterm>
               <glossdef>
                  <para>See <xref linkend="cha-kvm-intro"/></para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-xl">
               <glossterm>xl</glossterm>
               <glossdef>
                  <para>A set of commands for Xen that lets administrators manage virtual machines from a command prompt on the host computer. It replaced the deprecated <command>xm</command> tool stack.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-hwassisted">
               <glossterm>hardware-assisted</glossterm>
               <glossdef>
                  <para>Intel* and AMD* provide virtualization hardware-assisted technology. This reduces the frequency of VM IN/OUT (fewer VM traps), because software is a major source of overhead, and increases the efficiency (the execution is done by the hardware). Moreover, this reduces the memory footprint, provides better resource control, and allows secure assignment of specific I/O devices.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-dom0">
               <glossterm>Dom0</glossterm>
               <glossdef>
                  <para>The term is used in Xen environments, and refers to a virtual machine. The host operating system is a virtual machine running in a privileged domain and can be called Dom0. All other virtual machines on the host run in unprivileged domains and can be called domain U's.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-createvm">
               <glossterm>Create Virtual Machine Wizard</glossterm>
               <glossdef>
                  <para>A software program available in YaST and Virtual Machine Manager that provides a graphical interface to guide you through the steps to create virtual machines. It can also be run in text mode by entering <command>virt-install</command> at a command prompt in the host environment.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-hostenv">
               <glossterm>Host Environment</glossterm>
               <glossdef>
                  <para>The desktop or command line environment that allows interaction with the host computer's environment. It provides a command line environment and can also include a graphical desktop, such as GNOME or IceWM. The host environment runs as a special type of virtual machine that has privileges to control and manage other virtual machines. Other commonly used terms include <xref linkend="gloss-vt-dom0"/>, privileged domain, and host operating system.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-hypervisor">
               <glossterm>Hypervisor</glossterm>
               <glossdef>
                  <para>The software that coordinates the low-level interaction between virtual machines and the underlying physical computer hardware.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-parafb">
               <glossterm>Paravirtualized Frame Buffer</glossterm>
               <glossdef>
                  <para>The video output device that drives a video display from a memory buffer containing a complete frame of data for virtual machine displays running in paravirtual mode.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-virtfs">
               <glossterm>VirtFS</glossterm>
               <glossdef>
                  <para>VirtFS is a new paravirtualized file system interface designed for improving pass-through technologies in the KVM environment. It is based on the VirtIO framework.</para>
               </glossdef>
            </glossentry>
         </glossdiv>
         <glossdiv xml:id="gloss-vt-cpu">
            <title>CPU</title>
            <glossentry xml:id="gloss-vt-cpu-capping">
               <glossterm>CPU capping</glossterm>
               <glossdef>
                  <para>Virtual CPU capping allows you to set vCPU capacity to 1–100 percent of the physical CPU capacity.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-cpu-overcommit">
               <glossterm>CPU over-commitment</glossterm>
               <glossdef>
                  <para>Virtual CPU over-commitment is the ability to assign more virtual CPUs to VMs than the actual number of physical CPUs present in the physical system. This procedure does not increase the overall performance of the system, but may be useful for testing purposes.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-cpu-hotplug">
               <glossterm>CPU hotplugging</glossterm>
               <glossdef>
                  <para>CPU hotplugging is used to describe the functions of replacing/adding/removing a CPU without shutting down the system.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-cpu-pinning">
               <glossterm>CPU pinning</glossterm>
               <glossdef>
                  <para>Processor affinity, or CPU pinning enables the binding and unbinding of a process or a thread to a central processing unit (CPU) or a range of CPUs.</para>
               </glossdef>
            </glossentry>
         </glossdiv>
         <glossdiv xml:id="gloss-vt-network">
            <title>Network</title>
            <glossentry xml:id="gloss-vt-network-bridgenet">
               <glossterm>Bridged Networking</glossterm>
               <glossdef>
                  <para>A type of network connection that lets a virtual machine be identified on an external network as a unique identity that is separate from and unrelated to its host computer.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-network-emptybridge">
               <glossterm>Empty Bridge</glossterm>
               <glossdef>
                  <para>A type of network bridge that has no physical network device or virtual network device provided by the host. This lets virtual machines communicate with other virtual machines on the same host but not with the host or on an external network.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-network-externalnet">
               <glossterm>External Network</glossterm>
               <glossdef>
                  <para>The network outside a host's internal network environment.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-network-internalnetwork">
               <glossterm>Internal Network</glossterm>
               <glossdef>
                  <para>A type of network configuration that restricts virtual machines to their host environment.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-network-localbridge">
               <glossterm>Local Bridge</glossterm>
               <glossdef>
                  <para>A type of network bridge that has a virtual network device but no physical network device provided by the host. This lets virtual machines communicate with the host and other virtual machines on the host. Virtual machines can communicate on an external network through the host.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-network-nat">
               <glossterm>Network Address Translation (NAT)</glossterm>
               <glossdef>
                  <para>A type of network connection that lets a virtual machine use the IP address and MAC address of the host.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-network-nohostbridge">
               <glossterm>No Host Bridge</glossterm>
               <glossdef>
                  <para>A type of network bridge that has a physical network device but no virtual network device provided by the host. This lets virtual machines communicate on an external network but not with the host. This lets you separate virtual machine network communications from the host environment.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-network-traditionalbridge">
               <glossterm>Traditional Bridge</glossterm>
               <glossdef>
                  <para>A type of network bridge that has both a physical network device and a virtual network device provided by the host.</para>
               </glossdef>
            </glossentry>
         </glossdiv>
         <glossdiv xml:id="gloss-vt-storage">
            <title>Storage</title>
            <glossentry xml:id="gloss-vt-storage-ahci">
               <glossterm>AHCI</glossterm>
               <glossdef>
                  <para>The Advanced Host Controller Interface (AHCI) is a technical standard defined by Intel* that specifies the operation of Serial ATA (SATA) host bus adapters in a non-implementation-specific manner.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-storage-bd">
               <glossterm>Block Device</glossterm>
               <glossdef>
                  <para>Data storage devices, such as CD-ROM drives or disk drives, that move data in the form of blocks. Partitions and volumes are also considered block devices.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-storage-fbvd">
               <glossterm>File-Backed Virtual Disk</glossterm>
               <glossdef>
                  <para>A virtual disk based on a file, also called a disk image file.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-storage-rawdisk">
               <glossterm>Raw Disk</glossterm>
               <glossdef>
                  <para>A method of accessing data on a disk at the individual byte level instead of through its file system.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-storage-sparse">
               <glossterm>Sparse image file</glossterm>
               <glossdef>
                  <para>A disk image file that does not reserve its entire amount of disk space but expands as data is written to it.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-storage-xvda">
               <glossterm>xvda</glossterm>
               <glossdef>
                  <para>The drive designation given to the first virtual disk on a paravirtual machine.</para>
               </glossdef>
            </glossentry>
         </glossdiv>
         <!-- 2021-02-19 tbazant: lxc no longer with us
    <glossdiv xml:id="gloss-vt-lxc">
    <title>Linux containers</title>
    <glossentry xml:id="gloss-vt-lxc-cgroups"><glossterm>cgroups</glossterm>
    <glossdef>
    <para>
    Kernel Control Groups (commonly called <quote>cgroups</quote>) are a
    kernel feature that allows aggregating or partitioning tasks (processes)
    and all their children into hierarchical organized groups to isolate
    resources.
    </para>
    <para>
    See also <xref linkend="cha-tuning-cgroups"/>.
    </para>
    </glossdef>
    </glossentry>
    <glossentry xml:id="gloss-vt-lxc-chroot"><glossterm>chroot</glossterm>
    <glossdef>
    <para>
    A <emphasis>change root</emphasis> (chroot, or change root jail) is a
    section in the file system that is isolated from the rest of the file
    system. For this purpose, the <command>chroot</command> or
    <command>pivot_root</command> command is used to change the root of the
    file system. A program that is executed in such a <quote>chroot
    jail</quote> cannot access files outside the designated directory tree.
    </para>
    </glossdef>
    </glossentry>
    <glossentry xml:id="gloss-vt-lxc-container"><glossterm>container</glossterm>
    <glossdef>
    <para>
    Can be seen as a kind of <quote>virtual machine</quote> on the host
    server that can run any Linux system, for example &opensuse;,
    &sled;, or &sls;. The main difference with a normal virtual
    machine is that the container shares its kernel with the host it runs
    on.
    </para>
    </glossdef>
    </glossentry>
    <glossentry xml:id="gloss-vt-lxc-namespaces"><glossterm>Kernel namespaces</glossterm>
    <glossdef>
    <para>
    A kernel feature to isolate some resources like network, users, and
    others for a group of processes.
    </para>
    </glossdef>
    </glossentry>
    </glossdiv>
    -->
         <!-- include acronyms -->
         <glossdiv version="5.2" xml:id="gloss-vt-acronym"><?file vt_acronyms.xml?>
            <title>Acronyms</title>
            <info/>
            <glossentry xml:id="gloss-vt-acpi">
               <glossterm>ACPI</glossterm>
               <glossdef>
                  <para>Advanced Configuration and Power Interface (ACPI) specification provides an open standard for device configuration and power management by the operating system.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-aer">
               <glossterm>AER</glossterm>
               <glossdef>
                  <para>Advanced Error Reporting</para>
                  <para>AER is a capability provided by the PCI Express specification which allows for reporting of PCI errors and recovery from some of them.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-apic">
               <glossterm>APIC</glossterm>
               <glossdef>
                  <para>Advanced Programmable Interrupt Controller (APIC) is a family of interrupt controllers.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-xmtoxl-vt-bdf">
               <glossterm>BDF</glossterm>
               <glossdef>
                  <para>Bus:Device:Function</para>
                  <para>Notation used to succinctly describe PCI and PCIe devices.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-cg">
               <glossterm>CG</glossterm>
               <glossdef>
                  <para>Control Groups</para>
                  <para>Feature to limit, account and isolate resource usage (CPU, memory, disk I/O, etc.).</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-xmtoxl-vt-edf">
               <glossterm>EDF</glossterm>
               <glossdef>
                  <para>Earliest Deadline First</para>
                  <para>This scheduler provides weighted CPU sharing in an intuitive way and uses real-time algorithms to ensure time guarantees.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-ept">
               <glossterm>EPT</glossterm>
               <glossdef>
                  <para>Extended Page Tables</para>
                  <para>Performance in a virtualized environment is close to that in a native environment. Virtualization does create some overheads, however. These come from the virtualization of the CPU, the <xref linkend="gloss-vt-acronym-mmu"/>, and the I/O devices. In some recent x86 processors AMD and Intel have begun to provide hardware extensions to help bridge this performance gap. In 2006, both vendors introduced their first generation hardware support for x86 virtualization with AMD-Virtualization (AMD-V) and Intel® VT-x technologies. Recently Intel introduced its second generation of hardware support that incorporates MMU-virtualization, called Extended Page Tables (EPT). EPT-enabled systems can improve performance compared to using shadow paging for <xref linkend="gloss-vt-acronym-mmu"/> virtualization. EPT increases memory access latencies for a few workloads. This cost can be reduced by effectively using large pages in the guest and the hypervisor.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-xmtoxl-vt-flask">
               <glossterm>FLASK</glossterm>
               <glossdef>
                  <para>Flux Advanced Security Kernel</para>
                  <para>Xen implements a type of mandatory access control via a security architecture called FLASK using a module of the same name.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-hap">
               <glossterm>HAP</glossterm>
               <glossdef>
                  <para>High Assurance Platform</para>
                  <para>HAP combines hardware and software technologies to improve workstation and network security.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-hvm">
               <glossterm>HVM</glossterm>
               <glossdef>
                  <para>Hardware Virtual Machine (commonly called like this by Xen).</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-iommu">
               <glossterm>IOMMU</glossterm>
               <glossdef>
                  <para>Input/Output Memory Management Unit</para>
                  <para>IOMMU (AMD* technology) is a memory management unit (<xref linkend="gloss-vt-acronym-mmu"/>) that connects a direct memory access-capable (DMA-capable) I/O bus to the main memory.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-ksm">
               <glossterm>KSM</glossterm>
               <glossdef>
                  <para>Kernel Same Page Merging</para>
                  <para>KSM allows for automatic sharing of identical memory pages between guests to save host memory. KVM is optimized to use KSM if enabled on the VM Host Server.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-mmu">
               <glossterm>MMU</glossterm>
               <glossdef>
                  <para>Memory Management Unit</para>
                  <para>is a computer hardware component responsible for handling accesses to memory requested by the CPU. Its functions include translation of virtual addresses to physical addresses (that is, virtual memory management), memory protection, cache control, bus arbitration and in simpler computer architectures (especially 8-bit systems) bank switching.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-pae">
               <glossterm>PAE</glossterm>
               <glossdef>
                  <para>Physical Address Extension</para>
                  <para>32-bit x86 operating systems use Physical Address Extension (PAE) mode to enable addressing of more than 4 GB of physical memory. In PAE mode, page table entries (PTEs) are 64 bits in size.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-pcid">
               <glossterm>PCID</glossterm>
               <glossdef>
                  <para>Process-context identifiers</para>
                  <para>These are a facility by which a logical processor may cache information for multiple linear-address spaces so that the processor may retain cached information when software switches to a different linear address space. INVPCID instruction is used for fine-grained <xref linkend="gloss-vt-acronym-tlb"/> flush, which is benefit for kernel.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-pcie">
               <glossterm>PCIe</glossterm>
               <glossdef>
                  <para>Peripheral Component Interconnect Express</para>
                  <para>PCIe was designed to replace older PCI, PCI-X and AGP bus standards. PCIe has numerous improvements including a higher maximum system bus throughput, a lower I/O pin count and smaller physical footprint. Moreover it also has a more detailed error detection and reporting mechanism (<xref linkend="gloss-vt-acronym-aer"/>), and a native hotplug functionality. It is also backward compatible with PCI.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-pse-pse36">
               <glossterm>PSE and PSE36</glossterm>
               <glossdef>
                  <para>Page Size Extended</para>
                  <para>PSE refers to a feature of x86 processors that allows for pages larger than the traditional 4 KiB size. PSE-36 capability offers 4 more bits, in addition to the normal 10 bits, which are used inside a page directory entry pointing to a large page. This allows a large page to be located in 36-bit address space.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-pt">
               <glossterm>PT</glossterm>
               <glossdef>
                  <para>Page Table</para>
                  <para>A page table is the data structure used by a virtual memory system in a computer operating system to store the mapping between virtual addresses and physical addresses. Virtual addresses are those unique to the accessing process. Physical addresses are those unique to the hardware (RAM).</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-qxl">
               <glossterm>QXL</glossterm>
               <glossdef>
                  <para>QXL is a cirrus VGA framebuffer (8M) driver for virtualized environment.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-rvi-npt">
               <glossterm>RVI or NPT</glossterm>
               <glossdef>
                  <para>Rapid Virtualization Indexing, Nested Page Tables</para>
                  <para>An AMD second generation hardware-assisted virtualization technology for the processor memory management unit (<xref linkend="gloss-vt-acronym-mmu"/>).</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-sata">
               <glossterm>SATA</glossterm>
               <glossdef>
                  <para>Serial ATA</para>
                  <para>SATA is a computer bus interface that connects host bus adapters to mass storage devices such as hard disks and optical drives.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-seccomp2-based-sandboxing">
               <glossterm>Seccomp2-based sandboxing</glossterm>
               <glossdef>
                  <para>Sandboxed environment where only predetermined system calls are permitted for added protection against malicious behavior.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-smep">
               <glossterm>SMEP</glossterm>
               <glossdef>
                  <para>Supervisor Mode Execution Protection</para>
                  <para>This prevents the execution of user-mode pages by the Xen hypervisor, making many application-to-hypervisor exploits much harder.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-spice">
               <glossterm>SPICE</glossterm>
               <glossdef>
                  <para>Simple Protocol for Independent Computing Environments</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-xmtoxl-vt-sxp">
               <glossterm>SXP</glossterm>
               <glossdef>
                  <para>An SXP file is a Xen Configuration File.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-tcg">
               <glossterm>TCG</glossterm>
               <glossdef>
                  <para>Tiny Code Generator</para>
                  <para>Instructions are emulated rather than executed by the CPU.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-thp">
               <glossterm>THP</glossterm>
               <glossdef>
                  <para>Transparent Huge Pages</para>
                  <para>This allows CPUs to address memory using pages larger than the default 4 KB. This helps reduce memory consumption and CPU cache usage. KVM is optimized to use THP (via madvise and opportunistic methods) if enabled on the VM Host Server.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-tlb">
               <glossterm>TLB</glossterm>
               <glossdef>
                  <para>Translation Lookaside Buffer</para>
                  <para>TLB is a cache that memory management hardware uses to improve virtual address translation speed. All current desktop, notebook, and server processors use a TLB to map virtual and physical address spaces, and it is nearly always present in any hardware that uses virtual memory.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vcpu">
               <glossterm>VCPU</glossterm>
               <glossdef>
                  <para>A scheduling entity, containing each state for virtualized CPU.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vdi">
               <glossterm>VDI</glossterm>
               <glossdef>
                  <para>Virtual Desktop Infrastructure</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vfio">
               <glossterm>VFIO</glossterm>
               <glossdef>
                  <para>Since kernel v3.6; a new method of accessing PCI devices from user space called VFIO.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vhs">
               <glossterm>VHS</glossterm>
               <glossdef>
                  <para>Virtualization Host Server</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vmcs">
               <glossterm>VMCS</glossterm>
               <glossdef>
                  <para>Virtual Machine Control Structure</para>
                  <para>VMX non-root operation and VMX transitions are controlled by a data structure called a virtual-machine control structure (VMCS). Access to the VMCS is managed through a component of processor state called the VMCS pointer (one per logical processor). The value of the VMCS pointer is the 64-bit address of the VMCS. The VMCS pointer is read and written using the instructions VMPTRST and VMPTRLD. The <xref linkend="gloss-vt-acronym-hypervisor-vmm"/> configures a VMCS using the VMREAD, VMWRITE, and VMCLEAR instructions. A <xref linkend="gloss-vt-acronym-hypervisor-vmm"/> could use a different VMCS for each virtual machine that it supports. For a virtual machine with multiple logical processors (virtual processors), the <xref linkend="gloss-vt-acronym-hypervisor-vmm"/> could use a different VMCS for each virtual processor.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vmdq">
               <glossterm>VMDq</glossterm>
               <glossdef>
                  <para>Virtual Machine Device Queue</para>
                  <para>Multi-queue network adapters exist which support multiple VMs at the hardware level, having separate packet queues associated to the different hosted VMs (by means of the IP addresses of the VMs).</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-hypervisor-vmm">
               <glossterm>VMM</glossterm>
               <glossdef>
                  <para>Virtual Machine Monitor (Hypervisor)</para>
                  <para>When the processor encounters an instruction or event of interest to the Hypervisor (<xref linkend="gloss-vt-acronym-hypervisor-vmm"/>), it exits from guest mode back to the VMM. The VMM emulates the instruction or other event, at a fraction of native speed, and then returns to guest mode. The transitions from guest mode to the VMM and back again are high-latency operations, during which guest execution is completely stalled.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vmroot">
               <glossterm>VM root</glossterm>
               <glossdef>
                  <para><xref linkend="gloss-vt-acronym-hypervisor-vmm"/> will run in <xref linkend="gloss-vt-acronym-vmx"/> root operation and guest software will run in <xref linkend="gloss-vt-acronym-vmx"/> non-root operation. Transitions between <xref linkend="gloss-vt-acronym-vmx"/> root operation and <xref linkend="gloss-vt-acronym-vmx"/> non-root operation are called <xref linkend="gloss-vt-acronym-vmx"/> transitions.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vmx">
               <glossterm>VMX</glossterm>
               <glossdef>
                  <para>Virtual Machine eXtensions</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vpid">
               <glossterm>VPID</glossterm>
               <glossdef>
                  <para>New support for software control of <xref linkend="gloss-vt-acronym-tlb"/> (VPID improves <xref linkend="gloss-vt-acronym-tlb"/> performance with small <xref linkend="gloss-vt-acronym-hypervisor-vmm"/> development effort).</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vtd">
               <glossterm>VT-d</glossterm>
               <glossdef>
                  <para>Virtualization Technology for Directed I/O</para>
                  <para>Like <xref linkend="gloss-vt-acronym-iommu"/> for <link xlink:href="https://software.intel.com/en-us/articles/intel-virtualization-technology-for-directed-io-vt-d-enhancing-intel-platforms-for-efficient-virtualization-of-io-devices">Intel*</link>.</para>
               </glossdef>
            </glossentry>
            <glossentry xml:id="gloss-vt-acronym-vtpm">
               <glossterm>vTPM</glossterm>
               <glossdef>
                  <para>Component to establish end-to-end integrity for guests via Trusted Computing.</para>
               </glossdef>
            </glossentry>
         </glossdiv>
      </glossary>
      <appendix version="5.2" xml:id="app-vmdp-driver"><?file vmdp_drivers.xml?>
         <title>Virtual machine drivers</title>
         <info/>
         <para>Virtualization allows the consolidation of workloads on newer, more powerful, energy-efficient hardware. Paravirtualized operating systems such as <phrase role="productname">SUSE® Linux Enterprise Server</phrase> and other Linux distributions are aware of the underlying virtualization platform, and can therefore interact efficiently with it. Unmodified operating systems such as Microsoft Windows* are unaware of the virtualization platform and expect to interact directly with the hardware. Because this is not possible when consolidating servers, the hardware must be emulated for the operating system. Emulation can be slow, but it is especially troubling for high-throughput disk and network subsystems. Most performance loss occurs in this area.</para>
         <para>The SUSE Linux Enterprise Virtual Machine Driver Pack (VMDP) contains 32-bit and 64-bit paravirtualized network, bus and block drivers for several Microsoft Windows operating systems. These drivers bring many of the performance advantages of paravirtualized operating systems to unmodified operating systems: only the paravirtualized device driver (not the rest of the operating system) is aware of the virtualization platform. For example, a paravirtualized disk device driver appears as a normal, physical disk to the operating system. However, the device driver interacts directly with the virtualization platform (with no emulation). This helps to efficiently deliver disk access, allowing the disk and network subsystems to operate at near native speeds in a virtualized environment, without requiring changes to existing operating systems.</para>
         <para>The SUSE® Linux Enterprise Virtual Machine Driver Pack is available as an add-on product for <phrase role="productname">SUSE Linux Enterprise Server</phrase>. For detailed information refer to <link xlink:href="https://www.suse.com/products/vmdriverpack/"/>.</para>
         <para>For more information, refer to the <link xlink:href="https://documentation.suse.com/sle-vmdp/2.5/html/vmdp/index.html">Official VMDP <citetitle>Installation Guide</citetitle></link>.</para>
      </appendix>
      <appendix version="5.2" xml:id="app-gpu-passthru"><?file gpu_passthru.xml?>
         <info>
            <title>Configuring GPU Pass-Through for NVIDIA cards</title>
         </info>
         <sect1 xml:id="gpu-passthru-intro">
            <title>Introduction</title>
            <para>This article describes how to assign an NVIDIA GPU graphics card on the host machine to a virtualized guest.</para>
         </sect1>
         <sect1 xml:id="gpu-passthru-prerequisites">
            <title>Prerequisites</title>
            <itemizedlist>
               <listitem>
                  <para>GPU pass-through is supported on the AMD64/Intel 64 architecture only.</para>
               </listitem>
               <listitem>
                  <para>The host operating system needs to be SLES 12 SP3 or newer.</para>
               </listitem>
               <listitem>
                  <para>This article deals with a set of instructions based on V100/T1000 NVIDIA cards, and is meant for GPU computation purposes only.</para>
               </listitem>
               <listitem>
                  <para>Verify that you are using an NVIDIA Tesla product—Maxwell, Pascal, or Volta.</para>
               </listitem>
               <listitem>
                  <para>To manage the host system, you need an additional display card on the host that you can use when configuring the GPU pass-through, or a functional SSH environment.</para>
               </listitem>
            </itemizedlist>
         </sect1>
         <sect1 xml:id="gpu-passthru-host">
            <title>Configuring the host</title>
            <sect2 xml:id="gpu-passthru-verify-host">
               <title>Verify the host environment</title>
               <procedure>
                  <step>
                     <para>Verify that the host operating system is SLES 12 SP3 or newer:</para>
                     <screen><prompt>&gt;</prompt>cat /etc/issue
Welcome to SUSE Linux Enterprise Server 15  (x86_64) - Kernel \r (\l).
</screen>
                  </step>
                  <step>
                     <para>Verify that the host supports <xref linkend="gloss-vt-acronym-vtd"/> technology and that it is already enabled in the firmware settings:</para>
                     <screen><prompt>&gt;</prompt>dmesg | grep -e "Directed I/O"
[   12.819760] DMAR: Intel(R) Virtualization Technology for Directed I/O
</screen>
                     <para>If VT-d is not enabled in the firmware, enable it and reboot the host.</para>
                  </step>
                  <step>
                     <para>Verify that the host has an extra GPU or VGA card:</para>
                     <screen><prompt>&gt;</prompt>lspci | grep -i "vga"
07:00.0 VGA compatible controller: Matrox Electronics Systems Ltd. \
  MGA G200e [Pilot] ServerEngines (SEP1) (rev 05)
</screen>
                     <para>With a Tesla V100 card:</para>
                     <screen><prompt>&gt;</prompt>lspci | grep -i nvidia
03:00.0 3D controller: NVIDIA Corporation GV100 [Tesla V100 PCIe] (rev a1)
</screen>
                     <para>With a T1000 Mobile (available on Dell 5540):</para>
                     <screen><prompt>&gt;</prompt>lspci | grep -i nvidia
01:00.0 3D controller: NVIDIA Corporation TU117GLM [Quadro T1000 Mobile] (rev a1)
</screen>
                  </step>
               </procedure>
            </sect2>
            <sect2 xml:id="gpu-passthru-enable-iommu">
               <title>Enable <xref linkend="gloss-vt-acronym-iommu"/>
               </title>
               <para><xref linkend="gloss-vt-acronym-iommu"/> is disabled by default. You need to enable it at boot time in the <filename>/etc/default/grub</filename> configuration file.</para>
               <procedure>
                  <step>
                     <para>For Intel-based hosts:</para>
                     <screen>GRUB_CMDLINE_LINUX="intel_iommu=on iommu=pt rd.driver.pre=vfio-pci"</screen>
                     <para>For AMD-based hosts:</para>
                     <screen>GRUB_CMDLINE_LINUX="iommu=pt amd_iommu=on rd.driver.pre=vfio-pci"</screen>
                  </step>
                  <step>
                     <para>When you save the modified <filename>/etc/default/grub</filename> file, re-generate the main GRUB 2 configuration file <filename>/boot/grub2/grub.cfg</filename>:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> grub2-mkconfig -o /boot/grub2/grub.cfg</screen>
                  </step>
                  <step>
                     <para>Reboot the host and verify that <xref linkend="gloss-vt-acronym-iommu"/> is enabled:</para>
                     <screen><prompt>&gt;</prompt>dmesg |  grep -e DMAR -e IOMMU</screen>
                  </step>
               </procedure>
            </sect2>
            <sect2 xml:id="gpu-passthru-blacklist-nouveau">
               <title>Blacklist the Nouveau driver</title>
               <para>To assign the NVIDIA card to a VM guest, we need to prevent the host OS from loading the built-in <literal>nouveau</literal> driver for NVIDIA GPUs. Create the file <filename>/etc/modprobe.d/60-blacklist-nouveau.conf</filename> with the following content:</para>
               <screen>blacklist nouveau</screen>
            </sect2>
            <sect2 xml:id="gpu-passthru-configure-vfio">
               <title>Configure <xref linkend="gloss-vt-acronym-vfio"/> and isolate the GPU used for pass-through</title>
               <procedure>
                  <step>
                     <para>Find the card vendor and model IDs. Use the bus number identified in <xref linkend="gpu-passthru-verify-host"/>, for example, <literal>03:00.0</literal>:</para>
                     <screen><prompt>&gt;</prompt>lspci -nn | grep 03:00.0
03:00.0 3D controller [0302]: NVIDIA Corporation GV100 [Tesla V100 PCIe] [10de:1db4] (rev a1)
</screen>
                  </step>
                  <step>
                     <para>Create the file <filename>/etc/modprobe.d/vfio.conf</filename> with the following content:</para>
                     <screen>options vfio-pci ids=10de:1db4</screen>
                     <note>
                        <para>Verify that your card does not need an extra <option>ids=</option> parameter. For certain cards, you must specify the audio device too, therefore device's ID must also be added to the list, otherwise you cannot use the card.</para>
                     </note>
                  </step>
               </procedure>
            </sect2>
            <sect2 xml:id="gpu-passthru-load-vfio">
               <title>Load the <xref linkend="gloss-vt-acronym-vfio"/> driver</title>
               <para>There are three ways you can load the <xref linkend="gloss-vt-acronym-vfio"/> driver.</para>
               <sect3 xml:id="gpu-passthru-load-vfio-initrd">
                  <title>Including the driver in the initrd file</title>
                  <procedure>
                     <step>
                        <para>Create the file <filename>/etc/dracut.conf.d/gpu-passthrough.conf</filename> and add the following content (mind the leading whitespace):</para>
                        <screen>add_drivers+=" vfio vfio_iommu_type1 vfio_pci vfio_virqfd"</screen>
                     </step>
                     <step>
                        <para>Re-generate the initrd file:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> dracut --force /boot/initrd $(uname -r)</screen>
                     </step>
                  </procedure>
               </sect3>
               <sect3 xml:id="gpu-passthru-load-vfio-modules">
                  <title>Adding the driver to the list of auto-loaded modules</title>
                  <para>Create the file <filename>/etc/modules-load.d/vfio-pci.conf</filename> and add the following content:</para>
                  <screen>
vfio
vfio_iommu_type1
vfio_pci
kvm
kvm_intel
</screen>
               </sect3>
               <sect3 xml:id="gpu-passthru-load-vfio-manual">
                  <title>Loading the driver manually</title>
                  <para>To load the driver manually at runtime, execute the following command:</para>
                  <screen><prompt>&gt;</prompt><command>sudo</command> modprobe vfio-pci</screen>
               </sect3>
            </sect2>
            <sect2 xml:id="gpu-passthru-disable-msr">
               <title>Disable MSR for Microsoft Windows guests</title>
               <para>For Microsoft Windows guests, we recommend disabling MSR (model-specific register) to avoid the guest crashing. Create the file <filename>/etc/modprobe.d/kvm.conf</filename> and add the following content:</para>
               <screen>options kvm ignore_msrs=1</screen>
            </sect2>
            <sect2 xml:id="gpu-passthru-ovmf">
               <title>Install UEFI firmware</title>
               <para>For proper GPU pass-through functionality, the host needs to boot using UEFI firmware (that is, not using a legacy-style BIOS boot sequence). Install the <package>qemu-ovmf</package> package if not already installed:</para>
               <screen><prompt>&gt;</prompt><command>sudo</command> zypper install qemu-ovmf</screen>
            </sect2>
            <sect2 xml:id="gpu-passthru-reboot">
               <title>Reboot the host machine</title>
               <para>For most of the changes in the above steps to take effect, you need to reboot the host machine:</para>
               <screen><prompt>&gt;</prompt><command>sudo</command> shutdown -r now</screen>
            </sect2>
         </sect1>
         <sect1 xml:id="gpu-passthru-guest">
            <title>Configuring the guest</title>
            <para>This section describes how to configure the guest virtual machine so that it can use the host's NVIDIA GPU. Use Virtual Machine Manager or <command>virt-install</command> to install the guest VM. Find more details in <xref linkend="cha-kvm-inst"/>.</para>
            <sect2 xml:id="gpu-passthru-guest-general">
               <title>Requirements for the guest configuration</title>
               <para>During the guest VM installation, select <guimenu>Customize configuration before install</guimenu> and configure the following devices:</para>
               <itemizedlist>
                  <listitem>
                     <para>Use Q35 chipset if possible.</para>
                  </listitem>
                  <listitem>
                     <para>Install the guest VM using UEFI firmware.</para>
                  </listitem>
                  <listitem>
                     <para>Add the following emulated devices:</para>
                     <para>Graphic: Spice or VNC</para>
                     <para>Device: qxl, VGA or Virtio</para>
                     <para>Find more information in <xref linkend="sec-libvirt-config-video"/>.</para>
                  </listitem>
                  <listitem>
                     <para>Add the host PCI device (<literal>03:00.0</literal> in our example) to the guest. Find more information in <xref linkend="sec-libvirt-config-pci"/>.</para>
                  </listitem>
                  <listitem>
                     <para>For the best performance, we recommend using virtio drivers for the network card and storage.</para>
                  </listitem>
               </itemizedlist>
            </sect2>
            <sect2 xml:id="gpu-passthru-guest-driver">
               <title>Install the graphic card driver</title>
               <sect3 xml:id="gpu-passthru-guest-driver-linux-rpm">
                  <title>Linux guest</title>
                  <procedure>
                     <title>RPM-based distributions</title>
                     <step>
                        <para>Download the driver RPM package from <link xlink:href="https://www.nvidia.com/download/driverResults.aspx/131159/en-us"/>.</para>
                     </step>
                     <step>
                        <para>Install the downloaded RPM package:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> rpm -i nvidia-diag-driver-local-repo-sles123-390.30-1.0-1.x86_64.rpm</screen>
                     </step>
                     <step>
                        <para>Refresh repositories and install <package>cuda-drivers</package>. This step is different for non-SUSE distributions:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> zypper refresh &amp;&amp; zypper install cuda-drivers</screen>
                     </step>
                     <step>
                        <para>Reboot the guest VM:</para>
                        <screen><prompt>&gt;</prompt><command>sudo</command> shutdown -r now</screen>
                     </step>
                  </procedure>
                  <procedure>
                     <title>Generic installer</title>
                     <step>
                        <para>Because the installer needs to compile the NVIDIA driver modules, install the <package>gcc-c++</package> and <package>kernel-devel</package> packages.</para>
                     </step>
                     <step>
                        <para>Disable Secure Boot on the guest, because NVIDIA's driver modules are unsigned. On SUSE distributions, you can use the YaST GRUB 2 module to disable Secure Boot. Find more information in <phrase xmlns:l="http://docbook.org/ns/docbook/l10n" role="document-xref">Book <quote>Administration Guide</quote>, </phrase><xref linkend="sec-uefi-secboot-sle" xrefstyle="%label &#34;%c&#34;"/>.</para>
                     </step>
                     <step>
                        <para>Download the driver installation script from <link xlink:href="https://www.nvidia.com/Download/index.aspx?lang=en-us"/>, make it executable and run it to complete the driver installation:</para>
                        <screen><prompt>&gt;</prompt>chmod +x NVIDIA-Linux-x86_64-460.73.01.run
<prompt>&gt;</prompt><command>sudo</command> ./NVIDIA-Linux-x86_64-460.73.01.run
</screen>
                     </step>
                     <step>
                        <para>Download CUDA drivers from <link xlink:href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=SLES&amp;target_version=15&amp;target_type=rpmlocal"/> and install following the on-screen instructions.</para>
                     </step>
                  </procedure>
                  <note>
                     <title>Display issues</title>
                     <para>After you have installed the NVIDIA drivers, the Virtual Machine Manager display loses its connection to the guest OS. To access the guest VM, you must either login via <command>ssh</command>, change to the console interface, or install a dedicated VNC server in the guest. To avoid a flickering screen, stop and disable the display manager:</para>
                     <screen><prompt>&gt;</prompt><command>sudo</command> systemctl stop display-manager &amp;&amp; systemctl disable display-manager</screen>
                  </note>
                  <procedure>
                     <title>Testing the Linux driver installation</title>
                     <step>
                        <para>Change the directory to the CUDA sample templates:</para>
                        <screen><prompt>&gt;</prompt>cd /usr/local/cuda-9.1/samples/0_Simple/simpleTemplates</screen>
                     </step>
                     <step>
                        <para>Compile and run the <literal>simpleTemplates</literal> file:</para>
                        <screen><prompt>&gt;</prompt>make &amp;&amp; ./simpleTemplates
runTest&lt;float,32&gt;
GPU Device 0: "Tesla V100-PCIE-16GB" with compute capability 7.0
CUDA device [Tesla V100-PCIE-16GB] has 80 Multi-Processors
Processing time: 495.006000 (ms)
Compare OK
runTest&lt;int,64&gt;
GPU Device 0: "Tesla V100-PCIE-16GB" with compute capability 7.0
CUDA device [Tesla V100-PCIE-16GB] has 80 Multi-Processors
Processing time: 0.203000 (ms)
Compare OK
[simpleTemplates] -&gt; Test Results: 0 Failures
</screen>
                     </step>
                  </procedure>
               </sect3>
               <sect3 xml:id="gpu-passthru-guest-driver-windows">
                  <title>Microsoft Windows guest</title>
                  <important>
                     <para>Before you install the NVIDIA drivers, you need to hide the hypervisor from the drivers by using the <literal>&lt;hidden state='on'/&gt;</literal> directive in the guest's <systemitem class="library">libvirt</systemitem> definition, for example:</para>
                     <screen>
&lt;features&gt;
 &lt;acpi/&gt;
 &lt;apic/&gt;
 &lt;kvm&gt;
  &lt;hidden state='on'/&gt;
 &lt;/kvm&gt;
&lt;/features&gt;
</screen>
                  </important>
                  <procedure>
                     <step>
                        <para>Download and install the NVIDIA driver from <link xlink:href="https://www.nvidia.com/Download/index.aspx"/>.</para>
                     </step>
                     <step>
                        <para>Download and install the CUDA toolkit from <link xlink:href="https://developer.nvidia.com/cuda-downloads?target_os=Windows&amp;target_arch=x86_64"/>.</para>
                     </step>
                     <step>
                        <para>Find several NVIDIA demo samples in the directory <filename>Program Files\Nvidia GPU Computing Toolkit\CUDA\v10.2\extras\demo_suite</filename> on the guest.</para>
                     </step>
                  </procedure>
               </sect3>
            </sect2>
         </sect1>
      </appendix>
      <appendix version="5.2" xml:id="cha-xmtoxl"><?file xen_xmtoxl.xml?><!-- xen2libvirt --><!-- xm vs xl --><!-- external ref --><!-- savin xen to xm -->
         <title>XM, XL toolstacks, and the <systemitem class="library">libvirt</systemitem> framework</title>
         <info/>
         <sect1 xml:id="sec-xmtoxl-intro">
            <title>Xen toolstacks</title>
            <para>Since the early Xen 2.x releases, <command>xend</command> has been the de facto toolstack for managing Xen installations. In Xen 4.1, a new toolstack called libxenlight (also known as libxl) was introduced with technology preview status. libxl is a small, low-level library written in C. It has been designed to provide a simple API for all client toolstacks (<link xlink:href="https://wiki.xen.org/wiki/XAPI">XAPI</link>, <systemitem class="library">libvirt</systemitem>, xl). In Xen 4.2, libxl was promoted to supported status and <command>xend</command> was marked deprecated. <command>xend</command> has been included in the Xen 4.3 and 4.4 series to give users enough time to convert their tooling to libxl. It has been removed from the upstream Xen project and is no longer provided starting with the Xen 4.5 series and <phrase role="productname">SUSE Linux Enterprise Server</phrase> 12 SP1.</para>
            <para>Although SLES 11 SP3 contains Xen 4.2, SUSE retained the <command>xend</command> toolstack since making such an invasive change in a service pack would be too disruptive for SUSE Linux Enterprise customers. However, SLES 12 provides a suitable opportunity to move to the new libxl toolstack and remove the deprecated, unmaintained <command>xend</command> stack. Starting with <phrase role="productname">SUSE Linux Enterprise Server</phrase> 12 SP1, <command>xend</command> is no longer supported.</para>
            <para>One of the major differences between <command>xend</command> and libxl is that the former is stateful, while the latter is stateless. With <command>xend</command>, all client applications such as <command>xm</command> and <systemitem class="library">libvirt</systemitem> see the same system state. <command>xend</command> maintains the state for the entire Xen host. In libxl, client applications such as <command>xl</command> or <systemitem class="library">libvirt</systemitem> must maintain state. Thus domains created with <command>xl</command> are not visible or known to other libxl applications such as <systemitem class="library">libvirt</systemitem>. Generally, it is discouraged to mix and match libxl applications and is preferred that a single libxl application be used to manage a Xen host. In <phrase role="productname">SUSE Linux Enterprise Server</phrase>, we recommend using <systemitem class="library">libvirt</systemitem> to manage Xen hosts. This allows management of the Xen system through <systemitem class="library">libvirt</systemitem> applications such as <command>virt-manager</command>, <command>virt-install</command>, <command>virt-viewer</command>, libguestfs, etc. If <command>xl</command> is used to manage the Xen host, any virtual machines under its management are not accessible to <systemitem class="library">libvirt</systemitem>. Hence, they are not accessible to any of the <systemitem class="library">libvirt</systemitem> applications.</para>
            <sect2 xml:id="sec-xmtoxl-upgrade">
               <title>Upgrading from xend/xm to xl/libxl</title>
               <para>The <command>xl</command> application, along with its configuration format (see <command>man xl.cfg</command>), was designed to be backward-compatible with the <command>xm</command> application and its configuration format (see <command>man xm.cfg</command>). Existing <command>xm</command> configuration should be usable with <command>xl</command>. Since libxl is stateless, and <command>xl</command> does not support the notion of managed domains, SUSE recommends using <systemitem class="library">libvirt</systemitem> to manage Xen hosts. SUSE has provided a tool called <command>xen2libvirt</command>, which provides a simple mechanism to import domains previously managed by <command>xend</command> into <systemitem class="library">libvirt</systemitem>. See <xref linkend="xen-xen2libvirt"/> for more information on <command>xen2libvirt</command>.</para>
            </sect2>
            <sect2 xml:id="sec-xmltoxl-design">
               <title>XL design</title>
               <para>The basic structure of every <command>xl</command> command is:</para>
               <screen><command>xl subcommand</command><option>OPTIONS</option><replaceable>DOMAIN</replaceable></screen>
               <para><replaceable>DOMAIN</replaceable> is the numeric domain ID, or the domain name (which is internally translated to the domain ID), and <replaceable>OPTIONS</replaceable> are subcommand specific options.</para>
               <para>Although xl/libxl was designed to be backward-compatible with xm/xend, there are a few differences that should be noted:</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <para>Managed or persistent domains. <systemitem class="library">libvirt</systemitem> now provides this functionality.</para>
                  </listitem>
                  <listitem>
                     <para>xl/libxl does not support Python code in the domain configuration files.</para>
                  </listitem>
                  <listitem>
                     <para>xl/libxl does not support creating domains from SXP format configuration files (<command>xm</command><option>create</option> -F).</para>
                  </listitem>
                  <listitem>
                     <para>xl/libxl does not support sharing storage across DomU's via <command>w!</command> in domain configuration files.</para>
                  </listitem>
               </itemizedlist>
               <para>xl/libxl is new and under heavy development, hence a few features are still missing with regard to the xm/xend toolstack:</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <para>SCSI LUN/Host pass-through (PVSCSI)</para>
                  </listitem>
                  <listitem>
                     <para>USB pass-through (PVUSB)</para>
                  </listitem>
                  <listitem>
                     <para>Direct Kernel Boot for fully virtualized Linux guests for Xen</para>
                  </listitem>
               </itemizedlist>
            </sect2>
            <sect2 xml:id="sec-xmtoxl-checklist">
               <title>Checklist before upgrade</title>
               <para>Before upgrading a SLES 11 SP4 Xen host to SLES 15:</para>
               <itemizedlist mark="bullet" spacing="normal">
                  <listitem>
                     <para>You must remove any Python code from your xm domain configuration files.</para>
                  </listitem>
                  <listitem>
                     <para>It is recommended to capture the libvirt domain XML from all existing virtual machines using <command>virsh</command><option>dumpxml</option><replaceable>DOMAIN_NAME</replaceable><replaceable>DOMAIN_NAME.xml</replaceable>.</para>
                  </listitem>
                  <listitem>
                     <para>It is recommended to do a backup of <filename>/etc/xen/xend-config.sxp</filename> and <filename>/boot/grub/menu.lst</filename> files to keep references of previous parameters used for Xen.</para>
                  </listitem>
               </itemizedlist>
               <note>
                  <para>Currently, live migrating virtual machines running on a SLES 11 SP4 Xen host to a SLES 15 Xen host is not supported. The <command>xend</command> and libxl toolstacks are not runtime-compatible. Virtual machine downtime is required to move the virtual machines.</para>
               </note>
            </sect2>
         </sect1>
         <!-- xen2libvirt -->
         <sect1 version="5.2" xml:id="xen-xen2libvirt"><?file xm_vs_xl_xen2libvirt.xml?>
            <title>Import Xen domain configuration into <systemitem class="library">libvirt</systemitem>
            </title>
            <info/>
            <para><command>xen2libvirt</command> is a command line tool to import legacy Xen domain configuration into the <systemitem class="library">libvirt</systemitem> virtualization library (see The Virtualization book for more information on <systemitem class="library">libvirt</systemitem>). xen2libvirt provides an easy way to import domains managed by the deprecated <command>xm</command>/xend tool stack into the new <systemitem class="library">libvirt</systemitem>/libxl tool stack. Several domains can be imported at once using its <option>--recursive mode</option></para>
            <para><command>xen2libvirt</command> is included in the <systemitem>xen-tools</systemitem> package. If needed, install it with</para>
            <screen><prompt>&gt;</prompt><command>sudo</command> zypper install xen-tools</screen>
            <para><command>xen2libvirt</command> general syntax is</para>
            <screen>xen2libvirt &lt;options&gt; <replaceable>/path/to/domain/config</replaceable></screen>
            <para>where <option>options</option> can be:</para>
            <variablelist>
               <varlistentry>
                  <term>
                     <option>-h</option>, <option>--help</option>
                  </term>
                  <listitem>
                     <para>Prints short information about <command>xen2libvirt</command> usage.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>
                     <option>-c</option>, <option>--convert-only</option>
                  </term>
                  <listitem>
                     <para>Converts the domain configuration to the <systemitem class="library">libvirt</systemitem> XML format, but does not do the import to <systemitem class="library">libvirt</systemitem>.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>
                     <option>-r</option>, <option>--recursive</option>
                  </term>
                  <listitem>
                     <para>Converts and/or imports all domains configuration recursively, starting at the specified path.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>
                     <option>-f</option>, <option>--format</option>
                  </term>
                  <listitem>
                     <para>Specifies the format of the source domain configuration. Can be either <literal>xm</literal>, or <literal>sexpr</literal> (S-expression format).</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>
                     <option>-v</option>, <option>--verbose</option>
                  </term>
                  <listitem>
                     <para>Prints more detailed information about the import process.</para>
                  </listitem>
               </varlistentry>
            </variablelist>
            <example>
               <title>Converting Xen domain configuration to <systemitem class="library">libvirt</systemitem>
               </title>
               <para>Suppose you have a Xen domain managed with <command>xm</command> with the following configuration saved in <filename>/etc/xen/sle12.xm</filename>:</para>
               <screen>kernel = "/boot/vmlinuz-2.6-xenU"
  memory = 128
  name = "SLE12"
  root = "/dev/hda1 ro"
  disk = [ "file:/var/xen/sle12.img,hda1,w" ]</screen>
               <para>Convert it to <systemitem class="library">libvirt</systemitem> XML without importing it, and look at its content:</para>
               <screen><prompt>&gt;</prompt><command>sudo</command> xen2libvirt -f xm -c /etc/xen/sle12.xm &gt; /etc/libvirt/qemu/sles12.xml
  # cat /etc/libvirt/qemu/sles12.xml
  &lt;domain type='xen'&gt;
  &lt;name&gt;SLE12&lt;/name&gt;
  &lt;uuid&gt;43e1863c-8116-469c-a253-83d8be09aa1d&lt;/uuid&gt;
  &lt;memory unit='KiB'&gt;131072&lt;/memory&gt;
  &lt;currentMemory unit='KiB'&gt;131072&lt;/currentMemory&gt;
  &lt;vcpu placement='static'&gt;1&lt;/vcpu&gt;
  &lt;os&gt;
  &lt;type arch='x86_64' machine='xenpv'&gt;linux&lt;/type&gt;
  &lt;kernel&gt;/boot/vmlinuz-2.6-xenU&lt;/kernel&gt;
  &lt;/os&gt;
  &lt;clock offset='utc' adjustment='reset'/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;restart&lt;/on_crash&gt;
  &lt;devices&gt;
  &lt;disk type='file' device='disk'&gt;
  &lt;driver name='file'/&gt;
  &lt;source file='/var/xen/sle12.img'/&gt;
  &lt;target dev='hda1' bus='xen'/&gt;
  &lt;/disk&gt;
  &lt;console type='pty'&gt;
  &lt;target type='xen' port='0'/&gt;
  &lt;/console&gt;
  &lt;/devices&gt;
  &lt;/domain&gt;</screen>
               <para>To import the domain into <systemitem class="library">libvirt</systemitem>, you can either run the same <command>xen2libvirt</command> command without the <option>-c</option> option, or use the exported file <filename>/etc/libvirt/qemu/sles12.xml</filename> and define a new Xen domain using <command>virsh</command>:</para>
               <screen><prompt>&gt;</prompt><command>sudo</command> virsh define /etc/libvirt/qemu/sles12.xml</screen>
            </example>
         </sect1>
         <!-- xm vs xl -->
         <!--
 aginies: 20140824: TODO
 - fill missing help in task column
 - more example could be usefull
 - (-) and (+) are still there: even if table are usefull, this help
   to quickly see if the option was removed or added
-->
         <sect1 version="5.2" xml:id="sec-xmvsxl"><?file xm_vs_xl.xml?>
            <title>Differences between the <command>xm</command> and <command>xl</command> applications</title>
            <info/>
            <para>The purpose of this chapter is to list all differences between <command>xm</command> and <command>xl</command> applications. Generally, <command>xl</command> is designed to be compatible with <command>xm</command>. Replacing <command>xm</command> with <command>xl</command> in custom scripts or tools is usually sufficient.</para>
            <para>You can also use the <systemitem class="library">libvirt</systemitem> framework using the <command>virsh</command> command. In this documentation only the first <replaceable>OPTION</replaceable> for <command>virsh</command> will be shown. To get more help on this option do a:</para>
            <screen><command>virsh</command><option>help</option><replaceable>OPTION</replaceable></screen>
            <sect2 xml:id="sec-xmvsxl-conventions">
               <title>Notation conventions</title>
               <para>To easily understand the difference between <command>xl</command> and <command>xm</command> commands, the following notation is used in this section:</para>
               <table>
                  <title>Notation conventions</title>
                  <tgroup cols="2">
                     <colspec colnum="1" colname="1" colwidth="1*"/>
                     <colspec colnum="2" colname="2" colwidth="1*"/>
                     <thead>
                        <row>
                           <entry><para>Notation</para></entry>
                           <entry><para>Meaning</para></entry>
                        </row>
                     </thead>
                     <tbody>
                        <row>
                           <entry><para>(-) minus</para></entry>
                           <entry><para>Option exists in <command>xm</command>, but <command>xl</command> does not include it.</para></entry>
                        </row>
                        <row>
                           <entry><para>(+) plus</para></entry>
                           <entry><para>Option exists in <command>xl</command>, but <command>xm</command> does not include it.</para></entry>
                        </row>
                     </tbody>
                  </tgroup>
               </table>
            </sect2>
            <sect2 xml:id="sec-xmvsxl-global">
               <title>New global options</title>
               <table>
                  <title>New global options</title>
                  <tgroup cols="2">
                     <colspec colnum="1" colname="1" colwidth="1*"/>
                     <colspec colnum="2" colname="2" colwidth="1*"/>
                     <thead>
                        <row>
                           <entry><para>Options</para></entry>
                           <entry><para>Task</para></entry>
                        </row>
                     </thead>
                     <tbody>
                        <row>
                           <entry><para>(+) <option>-v</option></para></entry>
                           <entry><para>Verbose, increase the verbosity of the output</para></entry>
                        </row>
                        <row>
                           <entry><para>(+) <option>-N</option></para></entry>
                           <entry><para>Dry run, do not actually execute the command</para></entry>
                        </row>
                        <row>
                           <entry><para>(+) <option>-f</option></para></entry>
                           <entry><para>Force execution. <command>xl</command> will refuse to run some commands if it detects that <command>xend</command> is also running, this option will force the execution of those commands, even though it is unsafe</para></entry>
                        </row>
                     </tbody>
                  </tgroup>
               </table>
            </sect2>
            <sect2 xml:id="sec-xmvsxl-common">
               <title>Unchanged options</title>
               <para>List of common options of <command>xl</command> and <command>xm</command>, and their <systemitem class="library">libvirt</systemitem> equivalents.</para>
               <table rowsep="1">
                  <title>Common options</title>
                  <tgroup cols="3">
                     <colspec colnum="1" colname="1" colwidth="1*"/>
                     <colspec colnum="2" colname="2" colwidth="1*"/>
                     <colspec colnum="3" colname="3" colwidth="1*"/>
                     <thead>
                        <row>
                           <entry colname="1"><para>Options</para></entry>
                           <entry colname="2"><para>Task</para></entry>
                           <entry colname="3"><para><systemitem class="library">libvirt</systemitem> equivalent</para></entry>
                        </row>
                     </thead>
                     <tbody>
                        <row>
                           <entry colname="1"><para>destroy <replaceable>DOMAIN</replaceable></para></entry>
                           <entry colname="2"><para>Immediately terminate the domain.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>destroy</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>domid <replaceable>DOMAIN_NAME</replaceable></para></entry>
                           <entry colname="2"><para>Convert a domain name to a <replaceable>DOMAIN_ID</replaceable>.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>domid</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>domname <replaceable>DOMAIN_ID</replaceable></para></entry>
                           <entry colname="2"><para>Convert a <replaceable>DOMAIN_ID</replaceable> to a <replaceable>DOMAIN_NAME</replaceable>.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>domname</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>help</para></entry>
                           <entry colname="2"><para>Display the short help message (that is, common commands).</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>help</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>pause <replaceable>DOMAIN_ID</replaceable></para></entry>
                           <entry colname="2"><para>Pause a domain. When in a paused state, the domain will still consume allocated resources such as memory, but will not be eligible for scheduling by the Xen hypervisor.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>suspend</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>unpause <replaceable>DOMAIN_ID</replaceable></para></entry>
                           <entry colname="2"><para>Move a domain out of the paused state. This will allow a previously paused domain to be eligible for scheduling by the Xen hypervisor.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>resume</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>rename <replaceable>DOMAIN_ID</replaceable><replaceable>NEW_DOMAIN_NAME</replaceable></para></entry>
                           <entry colname="2"><para>Change the domain name of <replaceable>DOMAIN_ID</replaceable> to <replaceable>NEW_DOMAIN_NAME</replaceable>.</para></entry>
                           <entry colname="3"><orderedlist spacing="normal"><listitem><screen><prompt>&gt;</prompt>virsh dumpxml <replaceable>DOMAINNAME</replaceable> &gt;
          <replaceable>DOMXML</replaceable></screen></listitem><listitem><para>modify the domain's name in <replaceable>DOMXML</replaceable></para></listitem><listitem><screen><prompt>&gt;</prompt>virsh undefine <replaceable>DOMAINNAME</replaceable></screen></listitem><listitem><screen><prompt>&gt;</prompt>virsh define <replaceable>DOMAINNAME</replaceable></screen></listitem></orderedlist></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>sysrq <replaceable>DOMAIN</replaceable> &lt;letter&gt;</para></entry>
                           <entry colname="2"><para>Send a Magic System Request to the domain, each type of request is represented by a different letter. It can be used to send SysRq requests to Linux guests, see <link xlink:href="https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html"/> for more information. It requires PV drivers to be installed in your guest OS.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>send-keys</option> can send Magic Sys Req only for KVM</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>vncviewer <replaceable>OPTIONS</replaceable><replaceable>DOMAIN</replaceable></para></entry>
                           <entry colname="2"><para>Attach to domain's VNC server, forking a <command>vncviewer</command> process.</para></entry>
                           <entry colname="3"><para><command>virt-viewer</command><replaceable>DOMAIN_ID</replaceable></para><para><command>virsh</command><replaceable>VNCDISPLAY</replaceable></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><command>vcpu-set</command><replaceable>DOMAIN_ID</replaceable><replaceable>VCPUS</replaceable></para></entry>
                           <entry colname="2"><para>Set the number of virtual CPUs for the domain in question. Like <option>mem-set</option>, this command can only allocate up to the maximum virtual CPU count configured at boot for the domain.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>setvcpus</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>vcpu-list <replaceable>DOMAIN_ID</replaceable></para></entry>
                           <entry colname="2"><para>List VCPU information for a specific domain. If no domain is specified, VCPU information for all domains will be provided.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>vcpuinfo</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>vcpu-pin <replaceable>DOMAIN_ID</replaceable> &lt;VCPU|all&gt; &lt;CPUs|all&gt;</para></entry>
                           <entry colname="2"><para>Pin the VCPU to only run on the specific CPUs. The keyword all can be used to apply the CPU list to all VCPUs in the domain.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>vcpupin</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><command>dmesg</command> [-c]</para></entry>
                           <entry colname="2"><para>Read the Xen message buffer, similar to dmesg on a Linux system. The buffer contains informational, warning, and error messages created during Xen's boot process.</para></entry>
                           <entry colname="3"/>
                        </row>
                        <row>
                           <entry colname="1"><para><command>top</command></para></entry>
                           <entry colname="2"><para>Execute the <command>xentop</command> command, which provides real time monitoring of domains. <command>xentop</command> is a curses interface.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>nodecpustats</option></para><para><command>virsh</command><option>nodememstats</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><command>uptime</command> [-s] <replaceable>DOMAIN</replaceable></para></entry>
                           <entry colname="2"><para>Print the current uptime of the domains running. With the <command>xl</command> command, the <replaceable>DOMAIN</replaceable> argument is mandatory.</para></entry>
                           <entry colname="3"/>
                        </row>
                        <row>
                           <entry colname="1"><para><command>debug-keys</command><replaceable>KEYS</replaceable></para></entry>
                           <entry colname="2"><para>Send debug keys to Xen. It is the same as pressing the Xen <emphasis>conswitch</emphasis> (Ctrl-A by default) three times and then pressing "keys".</para></entry>
                           <entry colname="3"/>
                        </row>
                        <row>
                           <entry colname="1"><para><command>cpupool-migrate</command><replaceable>DOMAIN</replaceable><replaceable>CPU_POOL</replaceable></para></entry>
                           <entry colname="2"><para>Move a domain specified by <replaceable>DOMAIN_ID</replaceable> or <replaceable>DOMAIN</replaceable> into a <replaceable>CPU_POOL</replaceable>.</para></entry>
                           <entry colname="3"/>
                        </row>
                        <row>
                           <entry colname="1"><para><command>cpupool-destroy</command><replaceable>CPU_POOL</replaceable></para></entry>
                           <entry colname="2"><para>Deactivate a cpu pool. This is possible only if no domain is active in the cpu-pool.</para></entry>
                           <entry colname="3"/>
                        </row>
                        <row>
                           <entry colname="1"><para><command>block-detach</command><replaceable>DOMAIN_ID</replaceable><replaceable>DevId</replaceable></para></entry>
                           <entry colname="2"><para>Detach a domain's virtual block device. <emphasis>devid</emphasis> may be the symbolic name or the numeric device id given to the device by Dom0. You will need to run <command>xl</command><option>block-list</option> to determine that number.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>detach-disk</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><command>network-attach</command><replaceable>DOMAIN_ID</replaceable><replaceable>NETWORK_DEVICE</replaceable></para></entry>
                           <entry colname="2"><para>Create a new network device in the domain specified by <replaceable>DOMAIN_ID</replaceable>. network-device describes the device to attach, using the same format as the vif string in the domain configuration file</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>attach-interface</option></para><para><command>virsh</command><option>attach-device</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><command>pci-attach</command><replaceable>DOMAIN</replaceable> &lt;BDF&gt; [Virtual Slot]</para></entry>
                           <entry colname="2"><para>Hotplug a new pass-through PCI device to the specified domain. <xref linkend="gloss-xmtoxl-vt-bdf"/> is the PCI Bus/Device/Function of the physical device to be passed through.</para></entry>
                           <entry colname="3"><para><command>virsh</command><option>attach-device</option></para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><command>pci-list</command><replaceable>DOMAIN_ID</replaceable></para></entry>
                           <entry colname="2"><para>List pass-through PCI devices for a domain</para></entry>
                           <entry colname="3"/>
                        </row>
                        <row>
                           <entry colname="1"><para><command>getenforce</command></para></entry>
                           <entry colname="2"><para>Determine if the <xref linkend="gloss-xmtoxl-vt-flask"/> security module is loaded and enforcing its policy.</para></entry>
                           <entry colname="3"/>
                        </row>
                        <row>
                           <entry colname="1"><para><command>setenforce</command><option>&lt;1|0|Enforcing|Permissive&gt;</option></para></entry>
                           <entry colname="2"><para>Enable or disable enforcing of the <xref linkend="gloss-xmtoxl-vt-flask"/> access controls. The default is permissive and can be changed using the flask_enforcing option on the hypervisor's command line.</para></entry>
                           <entry colname="3"/>
                        </row>
                     </tbody>
                  </tgroup>
               </table>
            </sect2>
            <sect2 xml:id="sec-xmvsxl-removed">
               <title>Removed options</title>
               <para>List of <command>xm</command><option>options</option> which are no more available with the XL tool stack and a replacement solution if available.</para>
               <sect3 xml:id="sec-xmvsxl-removed-domain">
                  <title>Domain management</title>
                  <para>The list of Domain management removed command and their replacement.</para>
                  <table rowsep="1">
                     <title>Domain management removed options</title>
                     <tgroup cols="3">
                        <colspec colnum="1" colname="1" colwidth="1*"/>
                        <colspec colnum="2" colname="2" colwidth="1*"/>
                        <colspec colnum="3" colname="3" colwidth="1*"/>
                        <thead>
                           <row>
                              <entry namest="1" nameend="3"><para>Domain Management Removed Options</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>Options</para></entry>
                              <entry colname="2"><para>Task</para></entry>
                              <entry colname="3"><para>Equivalent</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry colname="1"><para>(-) <option>log</option></para></entry>
                              <entry colname="2"><para>Print the Xend log.</para></entry>
                              <entry colname="3"><para>This log file can be found in <filename>/var/log/xend.log</filename></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>delete</option></para></entry>
                              <entry colname="2"><para>Remove a domain from Xend domain management. The <option>list</option> option shows the domain names</para></entry>
                              <entry colname="3"><para><command>virsh</command><option>undefine</option></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>new</option></para></entry>
                              <entry colname="2"><para>Adds a domain to Xend domain management</para></entry>
                              <entry colname="3"><para><command>virsh</command><option>define</option></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>start</option></para></entry>
                              <entry colname="2"><para>Start a Xend managed domain that was added using the <command>xm</command><option>new</option> command</para></entry>
                              <entry colname="3"><para><command>virsh</command><option>start</option></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>dryrun</option></para></entry>
                              <entry colname="2"><para>Dry run - prints the resulting configuration in <xref linkend="gloss-xmtoxl-vt-sxp"/> but does not create the domain</para></entry>
                              <entry colname="3"><para><command>xl</command><option>-N</option></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>reset</option></para></entry>
                              <entry colname="2"><para>Reset a domain</para></entry>
                              <entry colname="3"><para><command>virsh</command><option>reset</option></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>domstate</option></para></entry>
                              <entry colname="2"><para>Show domain state</para></entry>
                              <entry colname="3"><para><command>virsh</command><option>domstate</option></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>serve</option></para></entry>
                              <entry colname="2"><para>Proxy Xend XMLRPC over stdio</para></entry>
                              <entry colname="3"/>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>resume</option><replaceable>DOMAIN</replaceable><replaceable>OPTIONS</replaceable></para></entry>
                              <entry colname="2"><para>Moves a domain out of the suspended state and back into memory</para></entry>
                              <entry colname="3"><para><command>virsh</command><option>resume</option></para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>suspend</option><replaceable>DOMAIN</replaceable></para></entry>
                              <entry colname="2"><para>Suspend a domain to a state file so that it can be later resumed using the <option>resume</option> subcommand. Similar to the <option>save</option> subcommand although the state file may not be specified</para></entry>
                              <entry colname="3"><para><command>virsh</command><option>managedsave</option></para><para><command>virsh</command><option>suspend</option></para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-removed-devices">
                  <title>USB devices</title>
                  <para>USB <option>options</option> are not available with xl/libxl tool stack. <command>virsh</command> has the <option>attach-device</option> and <option>detach-device</option> options but it does not work yet with <option>USB</option>.</para>
                  <table rowsep="1">
                     <title>USB devices management removed options</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1" colwidth="1*"/>
                        <colspec colnum="2" colname="2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="1" nameend="2"><para>USB Devices Management Removed Options</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>Options</para></entry>
                              <entry colname="2"><para>Task</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-add</option></para></entry>
                              <entry colname="2"><para>Add a new USB physical bus to a domain</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-del</option></para></entry>
                              <entry colname="2"><para>Delete a USB physical bus from a domain</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-attach</option></para></entry>
                              <entry colname="2"><para>Attach a new USB physical bus to domain's virtual port</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-detach</option></para></entry>
                              <entry colname="2"><para>Detach a USB physical bus from domain's virtual port</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-list</option></para></entry>
                              <entry colname="2"><para>List domain's attachment state of all virtual port</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-list-assignable-devices</option></para></entry>
                              <entry colname="2"><para>List all the assignable USB devices</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-hc-create</option></para></entry>
                              <entry colname="2"><para>Create a domain's new virtual USB host controller</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>usb-hc-destroy</option></para></entry>
                              <entry colname="2"><para>Destroy a domain's virtual USB host controller</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-removed-cpu">
                  <title>CPU management</title>
                  <para>CPU management options has changed. New options are available, see: <xref linkend="sec-xmvsxl-changed-cpu"/></para>
                  <table rowsep="1">
                     <title>CPU management removed options</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1" colwidth="1*"/>
                        <colspec colnum="2" colname="2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="1" nameend="2"><para>CPU Management Removed Options</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>Options</para></entry>
                              <entry colname="2"><para>Task</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry colname="1"><para>(-) <option>cpupool-new</option></para></entry>
                              <entry colname="2"><para>Adds a CPU pool to Xend CPU pool management</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>cpupool-start</option></para></entry>
                              <entry colname="2"><para>Starts a Xend CPU pool</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>cpupool-delete</option></para></entry>
                              <entry colname="2"><para>Removes a CPU pool from Xend management</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-removed-others">
                  <title>Other options</title>
                  <table rowsep="1">
                     <title>Other options</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1" colwidth="1*"/>
                        <colspec colnum="2" colname="2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="1" nameend="2"><para>Other Removed Options</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>Options</para></entry>
                              <entry colname="2"><para>Task</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry colname="1"><para>(-) <option>shell</option></para></entry>
                              <entry colname="2"><para>Launch an interactive shell</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>change-vnc-passwd</option></para></entry>
                              <entry colname="2"><para>Change vnc password</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>vtpm-list</option></para></entry>
                              <entry colname="2"><para>List virtual TPM devices</para></entry>
                           </row>
                           <row>
                              <entry colname="1"><para>(-) <option>block-configure</option></para></entry>
                              <entry colname="2"><para>Change block device configuration</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
            </sect2>
            <sect2 xml:id="sec-xmvsxl-changed">
               <title>Changed options</title>
               <sect3 xml:id="sec-xmvsxl-changed-create">
                  <title>
                     <option>create</option>
                  </title>
                  <para><command>xl</command><option>create</option><replaceable>CONFIG_FILE</replaceable><replaceable>OPTIONS</replaceable><replaceable>VARS</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent:</title>
                     <para><command>virsh</command><option>create</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>create</option> Changed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>create</option> Changed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(*) -f=<replaceable>FILE</replaceable>, --defconfig=<replaceable>FILE</replaceable></para></entry>
                              <entry><para>Use the given configuration file</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>create</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>create</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-s</option>, <option>--skipdtd</option></para></entry>
                              <entry><para>Skip DTD checking - skips checks on XML before creating</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-x</option>, <option>--xmldryrun</option></para></entry>
                              <entry><para>XML dry run</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-F=<replaceable>FILE</replaceable>, --config=<replaceable>FILE</replaceable></option></para></entry>
                              <entry><para>Use the given <xref linkend="gloss-xmtoxl-vt-sxp"/> formatted configuration script</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--path</option></para></entry>
                              <entry><para>Search path for configuration scripts</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--help_config</option></para></entry>
                              <entry><para>Print the available configuration variables (vars) for the configuration script</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-n</option>, <option>--dryrun</option></para></entry>
                              <entry><para>Dry run — prints the configuration in <xref linkend="gloss-xmtoxl-vt-sxp"/> but does not create the domain</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-c</option>, <option>--console_autoconnect</option></para></entry>
                              <entry><para>Connect to the console after the domain is created</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-q</option>, <option>--quiet</option></para></entry>
                              <entry><para>Quiet mode</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-p</option>, <option>--paused</option></para></entry>
                              <entry><para>Leave the domain paused after it is created</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>create</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>create</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-V</option>, <option>--vncviewer</option></para></entry>
                              <entry><para>Attach to domain's VNC server, forking a vncviewer process</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-A</option>, <option>--vncviewer-autopass</option></para></entry>
                              <entry><para>Pass VNC password to vncviewer via stdin</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-console">
                  <title>
                     <option>console</option>
                  </title>
                  <para><command>xl</command><option>console</option><replaceable>OPTIONS</replaceable><replaceable>DOMAIN</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>console</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>console</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="20*"/>
                        <colspec colname="c2" colwidth="80*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>console</option> Added Option</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-t</option> [pv|serial]</para></entry>
                              <entry><para>Connect to a PV console or connect to an emulated serial console. PV consoles are the only consoles available for PV domains while HVM domains can have both</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-info">
                  <title>info</title>
                  <para><command>xl</command><option>info</option></para>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>info</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>info</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-n</option>, <option>--numa</option></para></entry>
                              <entry><para>Numa info</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-c</option>, <option>--config</option></para></entry>
                              <entry><para>List Xend configuration parameters</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-dump">
                  <title>
                     <option>dump-core</option>
                  </title>
                  <para><command>xl</command><option>dump-core</option><replaceable>DOMAIN</replaceable><replaceable>FILENAME</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>dump</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>dump-core</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>dump-core</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-L</option>, <option>--live</option></para></entry>
                              <entry><para>Dump core without pausing the domain</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-C</option>, <option>--crash</option></para></entry>
                              <entry><para>Crash domain after dumping core</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-R</option>, <option>--reset</option></para></entry>
                              <entry><para>Reset domain after dumping core</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-list">
                  <title>
                     <option>list</option>
                  </title>
                  <para><command>xl list</command><option>options</option><replaceable>DOMAIN</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>list --all</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>list</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>list</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-l</option>, <option>--long</option></para></entry>
                              <entry><para>The output for <command>xm</command><option>list</option> presents the data in <xref linkend="gloss-xmtoxl-vt-sxp"/> format</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--state==<replaceable>STATE</replaceable></option></para></entry>
                              <entry><para>Output information for VMs in the specified state</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>list</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>list</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-Z</option>, <option>--context</option></para></entry>
                              <entry><para>Also prints the security labels</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-v</option>, <option>--verbose</option></para></entry>
                              <entry><para>Also prints the domain UUIDs, the shutdown reason and security labels</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-mem">
                  <title>
                     <option>mem-*</option>
                  </title>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>setmem</option></para>
                     <para><command>virsh</command><option>setmaxmem</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>mem-*</option> Changed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>mem-*</option> Changed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><option>mem-max</option><replaceable>DOMAIN_ID</replaceable><replaceable>MEM</replaceable></para></entry>
                              <entry><para>Appending <option>t</option> for terabytes, <option>g</option> for gigabytes, <option>m</option> for megabytes,<option>k</option> for kilobytes and <option>b</option> for bytes. Specify the maximum amount of memory the domain can use.</para></entry>
                           </row>
                           <row>
                              <entry><para><option>mem-set</option><replaceable>DOMAIN_ID</replaceable><replaceable>MEM</replaceable></para></entry>
                              <entry><para>Set the domain's used memory using the balloon driver</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-migrate">
                  <title>
                     <option>migrate</option>
                  </title>
                  <para><command>xl</command><option>migrate</option><replaceable>OPTIONS</replaceable><replaceable>DOMAIN</replaceable><replaceable>HOST</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh migrate --live hvm-sles11-qcow2 xen+</command><replaceable>CONNECTOR</replaceable>://<replaceable>USER</replaceable>@<replaceable>IP_ADDRESS</replaceable>/</para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>migrate</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>migrate</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-l</option>, <option>--live</option></para></entry>
                              <entry><para>Use live migration. This will migrate the domain between hosts without shutting down the domain</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-r</option>, <option>--resource</option><replaceable>Mbs</replaceable></para></entry>
                              <entry><para>Set maximum Mbs allowed for migrating the domain</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-c</option>, <option>--change_home_server</option></para></entry>
                              <entry><para>Change home server for managed domains</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--max_iters=</option><replaceable>MAX_ITERS</replaceable></para></entry>
                              <entry><para>Number of iterations before final suspend (default:30)</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--max_factor=</option><replaceable>MAX_FACTOR</replaceable></para></entry>
                              <entry><para>Max amount of memory to transfer before final suspend (default: 3*RAM).</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--min_remaining=</option><replaceable>MIN_REMAINING</replaceable></para></entry>
                              <entry><para>Number of dirty pages before final suspend (default:50)</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--abort_if_busy</option></para></entry>
                              <entry><para>Abort migration instead of doing final suspend</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--log_progress</option></para></entry>
                              <entry><para>Log progress of migration to <filename>xend.log</filename></para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-s</option>, <option>--ssl</option></para></entry>
                              <entry><para>Use ssl connection for migration</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>migrate</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>migrate</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-s</option><replaceable>SSHCOMMAND</replaceable></para></entry>
                              <entry><para>Use &lt;sshcommand&gt; instead of <command>ssh</command></para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-e</option></para></entry>
                              <entry><para>On the new host, do not wait in the background (on &lt;host&gt;) for the death of the domain</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-C</option><replaceable>CONFIG</replaceable></para></entry>
                              <entry><para>Send &lt;config&gt; instead of the configuration file used when creating the domain</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-management">
                  <title>Domain management</title>
                  <para><command>xl</command><option>reboot</option><replaceable>OPTIONS</replaceable><replaceable>DOMAIN</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>reboot</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>reboot</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>reboot</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-a</option>, <option>--all</option></para></entry>
                              <entry><para>Reboot all domains</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-w</option>, <option>--wait</option></para></entry>
                              <entry><para>Wait for reboot to complete before returning. This may take a while, as all services in the domain need to be shut down cleanly</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>reboot</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>reboot</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-F</option></para></entry>
                              <entry><para>Fallback to ACPI reset event for HVM guests with no PV drivers</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para><command>xl</command><option>save</option><replaceable>OPTIONS</replaceable><replaceable>DOMAIN</replaceable><replaceable>CHECK_POINT_FILE</replaceable><replaceable>CONFIG_FILE</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>save</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>save</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>save</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-c</option></para></entry>
                              <entry><para>Leave domain running after creating the snapshot</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para><command>xl</command><option>restore</option><replaceable>OPTIONS</replaceable><replaceable>CONFIG_FILE</replaceable><replaceable>CHECK_POINT_FILE</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>restore</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>restore</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>restore</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-p</option></para></entry>
                              <entry><para>Do not unpause domain after restoring it</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-e</option></para></entry>
                              <entry><para>Do not wait in the background for the death of the domain on the new host</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-d</option></para></entry>
                              <entry><para>Enable debug messages</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-V</option>, <option>--vncviewer</option></para></entry>
                              <entry><para>Attach to domain's VNC server, forking a vncviewer process</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-A</option>, <option>--vncviewer-autopass</option></para></entry>
                              <entry><para>Pass VNC password to vncviewer via stdin</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para><command>xl</command><option>shutdown</option><replaceable>OPTIONS</replaceable><replaceable>DOMAIN</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>shutdown</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>shutdown</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>shutdown</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-w</option>, <option>--wait</option></para></entry>
                              <entry><para>Wait for the domain to complete shutdown before returning</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-a</option></para></entry>
                              <entry><para>Shutdown all guest domains</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-R</option></para></entry>
                              <entry/>
                           </row>
                           <row>
                              <entry><para>(-) <option>-H</option></para></entry>
                              <entry/>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>shutdown</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>shutdown</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-F</option></para></entry>
                              <entry><para>If the guest does not support PV shutdown control then fallback to sending an ACPI power event</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>trigger</option> Changed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>trigger</option> Changed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><option>trigger</option><replaceable>DOMAIN</replaceable> &lt;nmi|reset|init|power|sleep|s3resume&gt; <replaceable>VCPU</replaceable></para></entry>
                              <entry><para>Send a trigger to a domain. Only available for HVM domains</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-sched">
                  <title>
                     <command>xl</command>
                     <option>sched-*</option>
                  </title>
                  <para><command>xl</command><option>sched-credit</option><replaceable>OPTIONS</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>schedinfo</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>sched-credit</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>sched-credit</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><option>-d</option><replaceable>DOMAIN</replaceable>, <option>--domain=</option><replaceable>DOMAIN</replaceable></para></entry>
                              <entry><para>Domain</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-w</option><replaceable>WEIGHT</replaceable>, <option>--weight=</option><replaceable>WEIGHT</replaceable></para></entry>
                              <entry><para>A domain with a weight of 512 will get twice as much CPU as a domain with a weight of 256 on a contended host. Legal weights range from 1 to 65535 and the default is 256</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-c</option><replaceable>CAP</replaceable>, <option>--cap=</option><replaceable>CAP</replaceable></para></entry>
                              <entry><para>The CAP optionally fixes the maximum amount of CPU a domain can consume</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>sched-credit</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>sched-credit</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-p</option><replaceable>CPUPOOL</replaceable>, <option>--cpupool=</option><replaceable>CPUPOOL</replaceable></para></entry>
                              <entry><para>Restrict output to domains in the specified cpupool</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-s</option>, <option>--schedparam</option></para></entry>
                              <entry><para>Specify to list or set pool-wide scheduler parameters</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-t</option><replaceable>TSLICE</replaceable>, <option>--tslice_ms=</option><replaceable>TSLICE</replaceable></para></entry>
                              <entry><para>Timeslice tells the scheduler how long to allow VMs to run before pre-empting</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-r</option><replaceable>RLIMIT</replaceable>, <option>--ratelimit_us=</option><replaceable>RLIMIT</replaceable></para></entry>
                              <entry><para>Ratelimit attempts to limit the number of schedules per second</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para><command>xl</command><option>sched-credit2</option><replaceable>OPTIONS</replaceable></para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> status</title>
                     <para><command>virsh</command> only supports credit scheduler, not credit2 scheduler</para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>sched-credit2</option> Removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>sched-credit2</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><option>-d</option><replaceable>DOMAIN</replaceable>, <option>--domain=</option><replaceable>DOMAIN</replaceable></para></entry>
                              <entry><para>Domain</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-w</option><replaceable>WEIGHT</replaceable>, <option>--weight=</option><replaceable>WEIGHT</replaceable></para></entry>
                              <entry><para>Legal weights range from 1 to 65535 and the default is 256</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>sched-credit2</option> Added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>sched-credit2</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-p</option><replaceable>CPUPOOL</replaceable>, <option>--cpupool=</option><replaceable>CPUPOOL</replaceable></para></entry>
                              <entry><para>Restrict output to domains in the specified cpupool</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para><command>xl</command><option>sched-sedf</option><replaceable>OPTIONS</replaceable></para>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>sched-sedf</option> removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>sched-sedf</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><option>-p</option><replaceable>PERIOD</replaceable>, <option>--period=</option><replaceable>PERIOD</replaceable></para></entry>
                              <entry><para>The normal <xref linkend="gloss-xmtoxl-vt-edf"/> scheduling usage in milliseconds</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-s</option><replaceable>SLICE</replaceable>, <option>--slice=</option><replaceable>SLICE</replaceable></para></entry>
                              <entry><para>The normal <xref linkend="gloss-xmtoxl-vt-edf"/> scheduling usage in milliseconds</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-l</option><replaceable>LATENCY</replaceable>, <option>--latency=</option><replaceable>LATENCY</replaceable></para></entry>
                              <entry><para>Scaled period if domain is doing heavy I/O</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-e</option><replaceable>EXTRA</replaceable>, <option>--extra=</option><replaceable>EXTRA</replaceable></para></entry>
                              <entry><para>Flag for allowing domain to run in extra time (0 or 1)</para></entry>
                           </row>
                           <row>
                              <entry><para><option>-w</option><replaceable>WEIGHT</replaceable>, <option>--weight=</option><replaceable>WEIGHT</replaceable></para></entry>
                              <entry><para>Another way of setting CPU slice</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>sched-sedf</option> added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>sched-sedf</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-c</option><replaceable>CPUPOOL</replaceable>, <option>--cpupool=</option><replaceable>CPUPOOL</replaceable></para></entry>
                              <entry><para>Restrict output to domains in the specified cpupool</para></entry>
                           </row>
                           <row>
                              <entry><para>(+) <option>-d</option><replaceable>DOMAIN</replaceable>, <option>--domain=</option><replaceable>DOMAIN</replaceable></para></entry>
                              <entry><para>Domain</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-cpu">
                  <title>
                     <command>xl</command>
                     <option>cpupool-*</option>
                  </title>
                  <para><command>xl</command><option>cpupool-cpu-remove</option><replaceable>CPU_POOL</replaceable> &lt;CPU nr&gt;|node:&lt;node nr&gt;</para>
                  <para><command>xl</command><option>cpupool-list</option> [-c|--cpus] <replaceable>CPU_POOL</replaceable></para>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>cpupool-list</option> removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>cpupool-*</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-l</option>, <option>--long</option></para></entry>
                              <entry><para>Output all CPU pool details in <xref linkend="gloss-xmtoxl-vt-sxp"/> format</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <para><command>xl</command><option>cpupool-cpu-add</option><replaceable>CPU_POOL</replaceable> cpu-nr|node:node-nr</para>
                  <para><command>xl</command><option>cpupool-create</option><replaceable>OPTIONS</replaceable><replaceable>CONFIG_FILE</replaceable> [Variable=Value ...]</para>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>cpupool-create</option> removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>cpupool-create</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Options</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-f</option><replaceable>FILE</replaceable>, --defconfig=<replaceable>FILE</replaceable></para></entry>
                              <entry><para>Use the given Python configuration script. The configuration script is loaded after arguments have been processed</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-n</option>, <option>--dryrun</option></para></entry>
                              <entry><para>Dry run - prints the resulting configuration in <xref linkend="gloss-xmtoxl-vt-sxp"/> but does not create the CPU pool</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--help_config</option></para></entry>
                              <entry><para>Print the available configuration variables (vars) for the configuration script</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>--path=</option><replaceable>PATH</replaceable></para></entry>
                              <entry><para>Search path for configuration scripts. The value of PATH is a colon-separated directory list</para></entry>
                           </row>
                           <row>
                              <entry><para>(-) <option>-F=</option><replaceable>FILE</replaceable>, --config=<replaceable>FILE</replaceable></para></entry>
                              <entry><para>CPU pool configuration to use (<xref linkend="gloss-xmtoxl-vt-sxp"/>)</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-attach">
                  <title>PCI and block devices</title>
                  <para><command>xl</command><option>pci-detach</option> [-f] <replaceable>DOMAIN_ID</replaceable> &lt;BDF&gt;</para>
                  <note>
                     <title>
                        <systemitem class="library">libvirt</systemitem> equivalent</title>
                     <para><command>virsh</command><option>detach-device</option></para>
                  </note>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>pci-detach</option> added options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>pci-detach</option> Added Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(+) <option>-f</option></para></entry>
                              <entry><para>If <option>-f</option> is specified, <command>xl</command> is going to forcefully remove the device even without guest's collaboration</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xm</command>
                        <option>block-list</option> removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para><option>block-list</option> Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-l</option>, <option>--long</option></para></entry>
                              <entry><para>List virtual block devices for a domain</para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="1">
                     <title>Other options</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1" colwidth="1*"/>
                        <colspec colnum="2" colname="2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry><para>Option</para></entry>
                              <entry><para><systemitem class="library">libvirt</systemitem> equivalent</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><command>xl</command><option>block-attach</option><replaceable>DOMAIN</replaceable> &lt;disk-spec-component(s)&gt;</para></entry>
                              <entry><para><command>virsh</command><option>attach-disk/attach-device</option></para></entry>
                           </row>
                           <row>
                              <entry><para><command>xl</command><option>block-list</option><replaceable>DOMAIN_ID</replaceable></para></entry>
                              <entry><para><command>virsh</command><option>domblklist</option></para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
               <sect3 xml:id="sec-xmvsxl-changed-net">
                  <title>Network</title>
                  <table rowsep="1">
                     <title>Network options</title>
                     <tgroup cols="2">
                        <colspec colnum="1" colname="1" colwidth="1*"/>
                        <colspec colnum="2" colname="2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry><para>Option</para></entry>
                              <entry><para><systemitem class="library">libvirt</systemitem> equivalent</para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para><command>xl</command><option>network-list</option><replaceable>DOMAIN(s)</replaceable></para></entry>
                              <entry><para><command>virsh</command><option>domiflist</option></para></entry>
                           </row>
                           <row>
                              <entry><para><command>xl</command><option>network-detach</option><replaceable>DOMAIN_ID</replaceable> devid|mac</para></entry>
                              <entry><para><command>virsh</command><option>detach-interface</option></para></entry>
                           </row>
                           <row>
                              <entry><para><command>xl</command><option>network-attach</option><replaceable>DOMAIN(s)</replaceable></para></entry>
                              <entry><para><command>virsh</command><option>attach-interface/attach-device</option></para></entry>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
                  <table rowsep="0">
                     <title>
                        <command>xl</command>
                        <option>network-attach</option> removed options</title>
                     <tgroup cols="2">
                        <colspec colname="c1" colwidth="1*"/>
                        <colspec colname="c2" colwidth="2*"/>
                        <thead>
                           <row>
                              <entry namest="c1" nameend="c2"><para>Removed Options</para></entry>
                           </row>
                           <row>
                              <entry><para><emphasis>Option</emphasis></para></entry>
                              <entry><para><emphasis>Task</emphasis></para></entry>
                           </row>
                        </thead>
                        <tbody>
                           <row>
                              <entry><para>(-) <option>-l</option>, <option>--long</option></para></entry>
                              <entry/>
                           </row>
                        </tbody>
                     </tgroup>
                  </table>
               </sect3>
            </sect2>
            <sect2 xml:id="sec-xmvsxl-new">
               <title>New options</title>
               <table rowsep="1" xml:id="table-xmtoxl-new-options">
                  <title>New options</title>
                  <tgroup cols="2">
                     <colspec colnum="1" colname="1" colwidth="1*"/>
                     <colspec colnum="2" colname="2" colwidth="2*"/>
                     <thead>
                        <row>
                           <entry colname="1"><para>Options</para></entry>
                           <entry colname="2"><para>Task</para></entry>
                        </row>
                     </thead>
                     <tbody>
                        <row>
                           <entry colname="1"><para><option>config-update</option><replaceable>DOMAIN</replaceable><replaceable>CONFIG_FILE</replaceable><replaceable>OPTIONS</replaceable><replaceable>VARS</replaceable></para></entry>
                           <entry colname="2"><para>Update the saved configuration for a running domain. This has no immediate effect but will be applied when the guest is next restarted. This command is useful to ensure that runtime modifications made to the guest will be preserved when the guest is restarted</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>migrate-receive</option></para></entry>
                           <entry colname="2"/>
                        </row>
                        <row>
                           <entry colname="1"><para><option>sharing</option><replaceable>DOMAIN</replaceable></para></entry>
                           <entry colname="2"><para>List count of shared pages.List specifically for that domain. Otherwise, list for all domains</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>vm-list</option></para></entry>
                           <entry colname="2"><para>Prints information about guests. This list excludes information about service or auxiliary domains such as Dom0 and stubdoms</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>cpupool-rename</option><replaceable>CPU_POOL</replaceable><replaceable>NEWNAME</replaceable></para></entry>
                           <entry colname="2"><para>Renames a cpu-pool to newname</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>cpupool-numa-split</option></para></entry>
                           <entry colname="2"><para>Splits up the machine into one cpu-pool per numa node</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para>cd-insert <replaceable>DOMAIN</replaceable> &lt;VirtualDevice&gt; &lt;type:path&gt;</para></entry>
                           <entry colname="2"><para>Insert a CD-ROM into a guest domain's existing virtual CD drive. The virtual drive must already exist but can be current empty</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>cd-eject</option><replaceable>DOMAIN</replaceable> &lt;VirtualDevice&gt;</para></entry>
                           <entry colname="2"><para>Eject a CD-ROM from a guest's virtual CD drive. Only works with HVM domains</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>pci-assignable-list</option></para></entry>
                           <entry colname="2"><para>List all the assignable PCI devices. These are devices in the system which are configured to be available for pass-through and are bound to a suitable PCI back-end driver in Dom0 rather than a real driver</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>pci-assignable-add</option> &lt;BDF&gt;</para></entry>
                           <entry colname="2"><para>Make the device at PCI Bus/Device/Function <xref linkend="gloss-xmtoxl-vt-bdf"/> assignable to guests.This will bind the device to the pciback driver</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>pci-assignable-remove</option><replaceable>OPTIONS</replaceable> &lt;BDF&gt;</para></entry>
                           <entry colname="2"><para>Make the device at PCI Bus/Device/Function <xref linkend="gloss-xmtoxl-vt-bdf"/> assignable to guests. This will at least unbind the device from pciback</para></entry>
                        </row>
                        <row>
                           <entry colname="1"><para><option>loadpolicy</option><replaceable>POLICY_FILE</replaceable></para></entry>
                           <entry colname="2"><para>Load <xref linkend="gloss-xmtoxl-vt-flask"/> policy from the given policy file. The initial policy is provided to the hypervisor as a multiboot module; this command allows runtime updates to the policy. Loading new security policy will reset runtime changes to device labels</para></entry>
                        </row>
                     </tbody>
                  </tgroup>
               </table>
            </sect2>
         </sect1>
         <!-- external ref -->
         <sect1 version="5.2" xml:id="sec-xmtoxl-links"><?file xm_vs_xl_links.xml?>
            <title>External links</title>
            <info/>
            <para>For more information on Xen tool stacks refer to the following online resources:</para>
            <variablelist>
               <varlistentry>
                  <term>XL in Xen</term>
                  <listitem>
                     <para><link xlink:href="https://wiki.xenproject.org/wiki/XL_in_Xen_4.2">XL in Xen 4.2</link></para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>
                     <command>xl</command> command</term>
                  <listitem>
                     <para><link xlink:href="https://xenbits.xen.org/docs/unstable/man/xl.1.html">XL</link> command line.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>xl.cfg</term>
                  <listitem>
                     <para><link xlink:href="https://xenbits.xen.org/docs/unstable/man/xl.cfg.5.html">xl.cfg</link> domain configuration file syntax.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>xl disk</term>
                  <listitem>
                     <para><link xlink:href="https://xenbits.xen.org/docs/4.3-testing/misc/xl-disk-configuration.txt">xl disk</link> configuration option.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>XL vs Xend</term>
                  <listitem>
                     <para><link xlink:href="https://wiki.xenproject.org/wiki/XL_vs_Xend_Feature_Comparison">XL vs Xend</link> feature comparison.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>BDF doc</term>
                  <listitem>
                     <para><link xlink:href="https://wiki.xen.org/wiki/Bus:Device.Function_%28BDF%29_Notation">BDF documentation</link>.</para>
                  </listitem>
               </varlistentry>
               <varlistentry>
                  <term>libvirt</term>
                  <listitem>
                     <para><link xlink:href="https://libvirt.org/sources/virshcmdref/html/">virsh</link> command.</para>
                  </listitem>
               </varlistentry>
            </variablelist>
         </sect1>
         <!-- savin xen to xm -->
         <sect1 xml:id="sec-libvirt-managing-export-Xen-xm">
            <title>Saving a Xen guest configuration in an <command>xm</command> compatible format</title>
            <para>Although <command>xl</command> is now the current toolkit for managing Xen guests (apart from the preferred <systemitem class="library">libvirt</systemitem>), you may need to export the guest configuration to the previously used <command>xm</command> format. To do this, follow these steps:</para>
            <procedure>
               <step>
                  <para>First export the guest configuration to a file:</para>
                  <screen><prompt>&gt;</prompt>virsh dumpxml guest_id &gt; guest_cfg.xml</screen>
               </step>
               <step>
                  <para>Then convert the configuration to the <command>xm</command> format:</para>
                  <screen><prompt>&gt;</prompt>virsh domxml-to-native xen-xm guest_cfg.xml &gt; guest_xm_cfg</screen>
               </step>
            </procedure>
         </sect1>
      </appendix>
      <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
      <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
      <appendix version="5.2" role="legal"><?include common_legal.xml?>
         <title>GNU licenses</title>
         <info/>
         <para>This appendix contains the GNU Free Documentation License version 1.2.</para>
         <!-- This file is part of the project https://github.com/openSUSE/doc-kit -->
         <!-- DO NOT EDIT THIS FILE DOWNSTREAM. IT MAY BE OVERWRITTEN BY AN UPDATE. -->
         <sect1 version="5.2" role="legal"><?include common_license_gfdl1.2.xml?>
            <title>GNU Free Documentation License</title>
            <info/>
            <para>Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA. Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</para>
            <bridgehead renderas="sect4">0. PREAMBLE</bridgehead>
            <para>The purpose of this License is to make a manual, textbook, or other functional and useful document "free" in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or non-commercially. Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</para>
            <para>This License is a kind of "copyleft", which means that derivative works of the document must themselves be free in the same sense. It complements the GNU General Public License, which is a copyleft license designed for free software.</para>
            <para>We have designed this License to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does. But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book. We recommend this License principally for works whose purpose is instruction or reference.</para>
            <bridgehead renderas="sect4">1. APPLICABILITY AND DEFINITIONS</bridgehead>
            <para>This License applies to any manual or other work, in any medium, that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License. Such a notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under the conditions stated herein. The "Document", below, refers to any such manual or work. Any member of the public is a licensee, and is addressed as "you". You accept the license if you copy, modify or distribute the work in a way requiring permission under copyright law.</para>
            <para>A "Modified Version" of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</para>
            <para>A "Secondary Section" is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document's overall subject (or to related matters) and contains nothing that could fall directly within that overall subject. (Thus, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</para>
            <para>The "Invariant Sections" are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License. If a section does not fit the above definition of Secondary then it is not allowed to be designated as Invariant. The Document may contain zero Invariant Sections. If the Document does not identify any Invariant Sections then there are none.</para>
            <para>The "Cover Texts" are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License. A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.</para>
            <para>A "Transparent" copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, that is suitable for revising the document straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters. A copy made in an otherwise Transparent file format whose markup, or absence of markup, has been arranged to thwart or discourage subsequent modification by readers is not Transparent. An image format is not Transparent if used for any substantial amount of text. A copy that is not "Transparent" is called "Opaque".</para>
            <para>Examples of suitable formats for Transparent copies include plain ASCII without markup, Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML, PostScript or PDF designed for human modification. Examples of transparent image formats include PNG, XCF and JPG. Opaque formats include proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML, PostScript or PDF produced by some word processors for output purposes only.</para>
            <para>The "Title Page" means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page. For works in formats which do not have any title page as such, "Title Page" means the text near the most prominent appearance of the work's title, preceding the beginning of the body of the text.</para>
            <para>A section "Entitled XYZ" means a named subunit of the Document whose title either is precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another language. (Here XYZ stands for a specific section name mentioned below, such as "Acknowledgements", "Dedications", "Endorsements", or "History".) To "Preserve the Title" of such a section when you modify the Document means that it remains a section "Entitled XYZ" according to this definition.</para>
            <para>The Document may include Warranty Disclaimers next to the notice which states that this License applies to the Document. These Warranty Disclaimers are considered to be included by reference in this License, but only as regards disclaiming warranties: any other implication that these Warranty Disclaimers may have is void and has no effect on the meaning of this License.</para>
            <bridgehead renderas="sect4">2. VERBATIM COPYING</bridgehead>
            <para>You may copy and distribute the Document in any medium, either commercially or non-commercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License. You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute. However, you may accept compensation in exchange for copies. If you distribute a large enough number of copies you must also follow the conditions in section 3.</para>
            <para>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</para>
            <bridgehead renderas="sect4">3. COPYING IN QUANTITY</bridgehead>
            <para>If you publish printed copies (or copies in media that commonly have printed covers) of the Document, numbering more than 100, and the Document's license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover. Both covers must also clearly and legibly identify you as the publisher of these copies. The front cover must present the full title with all words of the title equally prominent and visible. You may add other material on the covers in addition. Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</para>
            <para>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</para>
            <para>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a computer-network location from which the general network-using public has access to download using public-standard network protocols a complete Transparent copy of the Document, free of added material. If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</para>
            <para>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</para>
            <bridgehead renderas="sect4">4. MODIFICATIONS</bridgehead>
            <para>You may copy and distribute a Modified Version of the Document under the conditions of sections 2 and 3 above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it. In addition, you must do these things in the Modified Version:</para>
            <orderedlist numeration="upperalpha" spacing="normal">
               <listitem>
                  <para>Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission.</para>
               </listitem>
               <listitem>
                  <para>List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has fewer than five), unless they release you from this requirement.</para>
               </listitem>
               <listitem>
                  <para>State on the Title page the name of the publisher of the Modified Version, as the publisher.</para>
               </listitem>
               <listitem>
                  <para>Preserve all the copyright notices of the Document.</para>
               </listitem>
               <listitem>
                  <para>Add an appropriate copyright notice for your modifications adjacent to the other copyright notices.</para>
               </listitem>
               <listitem>
                  <para>Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below.</para>
               </listitem>
               <listitem>
                  <para>Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document's license notice.</para>
               </listitem>
               <listitem>
                  <para>Include an unaltered copy of this License.</para>
               </listitem>
               <listitem>
                  <para>Preserve the section Entitled "History", Preserve its Title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section Entitled "History" in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence.</para>
               </listitem>
               <listitem>
                  <para>Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the "History" section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission.</para>
               </listitem>
               <listitem>
                  <para>For any section Entitled "Acknowledgements" or "Dedications", Preserve the Title of the section, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein.</para>
               </listitem>
               <listitem>
                  <para>Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles.</para>
               </listitem>
               <listitem>
                  <para>Delete any section Entitled "Endorsements". Such a section may not be included in the Modified Version.</para>
               </listitem>
               <listitem>
                  <para>Do not retitle any existing section to be Entitled "Endorsements" or to conflict in title with any Invariant Section.</para>
               </listitem>
               <listitem>
                  <para>Preserve any Warranty Disclaimers.</para>
               </listitem>
            </orderedlist>
            <para>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant. To do this, add their titles to the list of Invariant Sections in the Modified Version's license notice. These titles must be distinct from any other section titles.</para>
            <para>You may add a section Entitled "Endorsements", provided it contains nothing but endorsements of your Modified Version by various parties--for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</para>
            <para>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version. Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity. If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</para>
            <para>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</para>
            <bridgehead renderas="sect4">5. COMBINING DOCUMENTS</bridgehead>
            <para>You may combine the Document with other documents released under this License, under the terms defined in section 4 above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice, and that you preserve all their Warranty Disclaimers.</para>
            <para>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy. If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number. Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</para>
            <para>In the combination, you must combine any sections Entitled "History" in the various original documents, forming one section Entitled "History"; likewise combine any sections Entitled "Acknowledgements", and any sections Entitled "Dedications". You must delete all sections Entitled "Endorsements".</para>
            <bridgehead renderas="sect4">6. COLLECTIONS OF DOCUMENTS</bridgehead>
            <para>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</para>
            <para>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</para>
            <bridgehead renderas="sect4">7. AGGREGATION WITH INDEPENDENT WORKS</bridgehead>
            <para>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, is called an "aggregate" if the copyright resulting from the compilation is not used to limit the legal rights of the compilation's users beyond what the individual works permit. When the Document is included in an aggregate, this License does not apply to the other works in the aggregate which are not themselves derivative works of the Document.</para>
            <para>If the Cover Text requirement of section 3 is applicable to these copies of the Document, then if the Document is less than one half of the entire aggregate, the Document's Cover Texts may be placed on covers that bracket the Document within the aggregate, or the electronic equivalent of covers if the Document is in electronic form. Otherwise they must appear on printed covers that bracket the whole aggregate.</para>
            <bridgehead renderas="sect4">8. TRANSLATION</bridgehead>
            <para>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of section 4. Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections. You may include a translation of this License, and all the license notices in the Document, and any Warranty Disclaimers, provided that you also include the original English version of this License and the original versions of those notices and disclaimers. In case of a disagreement between the translation and the original version of this License or a notice or disclaimer, the original version will prevail.</para>
            <para>If a section in the Document is Entitled "Acknowledgements", "Dedications", or "History", the requirement (section 4) to Preserve its Title (section 1) will typically require changing the actual title.</para>
            <bridgehead renderas="sect4">9. TERMINATION</bridgehead>
            <para>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License. Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License. However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</para>
            <bridgehead renderas="sect4">10. FUTURE REVISIONS OF THIS LICENSE</bridgehead>
            <para>The Free Software Foundation may publish new, revised versions of the GNU Free Documentation License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns. See <link xlink:href="https://www.gnu.org/copyleft/"/>.</para>
            <para>Each version of the License is given a distinguishing version number. If the Document specifies that a particular numbered version of this License "or any later version" applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation. If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</para>
            <bridgehead renderas="sect4">ADDENDUM: How to use this License for your documents</bridgehead>
            <screen>Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</screen>
            <para>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts, replace the “with...Texts.” line with this:</para>
            <screen>with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
            <para>If you have Invariant Sections without Cover Texts, or some other combination of the three, merge those two alternatives to suit the situation.</para>
            <para>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the GNU General Public License, to permit their use in free software.</para>
         </sect1>
      </appendix>
   </book>
   <!-- ##################################################################### -->
   <!-- Quick Starts                                                            -->
   <!--                                                                       -->
</set>
